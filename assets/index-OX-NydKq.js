(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();var zo={},ui={};ui.byteLength=nu;ui.toByteArray=ou;ui.fromByteArray=cu;var Je=[],qe=[],eu=typeof Uint8Array<"u"?Uint8Array:Array,Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zr=0,ru=Gi.length;zr<ru;++zr)Je[zr]=Gi[zr],qe[Gi.charCodeAt(zr)]=zr;qe[45]=62;qe[95]=63;function Na(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function nu(n){var t=Na(n),e=t[0],r=t[1];return(e+r)*3/4-r}function iu(n,t,e){return(t+e)*3/4-e}function ou(n){var t,e=Na(n),r=e[0],o=e[1],i=new eu(iu(n,r,o)),a=0,f=o>0?r-4:r,d;for(d=0;d<f;d+=4)t=qe[n.charCodeAt(d)]<<18|qe[n.charCodeAt(d+1)]<<12|qe[n.charCodeAt(d+2)]<<6|qe[n.charCodeAt(d+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=t&255;return o===2&&(t=qe[n.charCodeAt(d)]<<2|qe[n.charCodeAt(d+1)]>>4,i[a++]=t&255),o===1&&(t=qe[n.charCodeAt(d)]<<10|qe[n.charCodeAt(d+1)]<<4|qe[n.charCodeAt(d+2)]>>2,i[a++]=t>>8&255,i[a++]=t&255),i}function su(n){return Je[n>>18&63]+Je[n>>12&63]+Je[n>>6&63]+Je[n&63]}function au(n,t,e){for(var r,o=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),o.push(su(r));return o.join("")}function cu(n){for(var t,e=n.length,r=e%3,o=[],i=16383,a=0,f=e-r;a<f;a+=i)o.push(au(n,a,a+i>f?f:a+i));return r===1?(t=n[e-1],o.push(Je[t>>2]+Je[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push(Je[t>>10]+Je[t>>4&63]+Je[t<<2&63]+"=")),o.join("")}var Fo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Fo.read=function(n,t,e,r,o){var i,a,f=o*8-r-1,d=(1<<f)-1,A=d>>1,b=-7,O=e?o-1:0,L=e?-1:1,P=n[t+O];for(O+=L,i=P&(1<<-b)-1,P>>=-b,b+=f;b>0;i=i*256+n[t+O],O+=L,b-=8);for(a=i&(1<<-b)-1,i>>=-b,b+=r;b>0;a=a*256+n[t+O],O+=L,b-=8);if(i===0)i=1-A;else{if(i===d)return a?NaN:(P?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-A}return(P?-1:1)*a*Math.pow(2,i-r)};Fo.write=function(n,t,e,r,o,i){var a,f,d,A=i*8-o-1,b=(1<<A)-1,O=b>>1,L=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:i-1,z=r?1:-1,D=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,a=b):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+O>=1?t+=L/d:t+=L*Math.pow(2,1-O),t*d>=2&&(a++,d/=2),a+O>=b?(f=0,a=b):a+O>=1?(f=(t*d-1)*Math.pow(2,o),a=a+O):(f=t*Math.pow(2,O-1)*Math.pow(2,o),a=0));o>=8;n[e+P]=f&255,P+=z,f/=256,o-=8);for(a=a<<o|f,A+=o;A>0;n[e+P]=a&255,P+=z,a/=256,A-=8);n[e+P-z]|=D*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=ui,e=Fo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=b,n.SlowBuffer=at,n.INSPECT_MAX_BYTES=50;const o=2147483647;n.kMaxLength=o;const{Uint8Array:i,ArrayBuffer:a,SharedArrayBuffer:f}=globalThis;b.TYPED_ARRAY_SUPPORT=d(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const k=new i(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,i.prototype),Object.setPrototypeOf(k,p),k.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function A(k){if(k>o)throw new RangeError('The value "'+k+'" is invalid for option "size"');const p=new i(k);return Object.setPrototypeOf(p,b.prototype),p}function b(k,p,m){if(typeof k=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return z(k)}return O(k,p,m)}b.poolSize=8192;function O(k,p,m){if(typeof k=="string")return D(k,p);if(a.isView(k))return $(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Ie(k,a)||k&&Ie(k.buffer,a)||typeof f<"u"&&(Ie(k,f)||k&&Ie(k.buffer,f)))return V(k,p,m);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=k.valueOf&&k.valueOf();if(C!=null&&C!==k)return b.from(C,p,m);const K=H(k);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return b.from(k[Symbol.toPrimitive]("string"),p,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}b.from=function(k,p,m){return O(k,p,m)},Object.setPrototypeOf(b.prototype,i.prototype),Object.setPrototypeOf(b,i);function L(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function P(k,p,m){return L(k),k<=0?A(k):p!==void 0?typeof m=="string"?A(k).fill(p,m):A(k).fill(p):A(k)}b.alloc=function(k,p,m){return P(k,p,m)};function z(k){return L(k),A(k<0?0:rt(k)|0)}b.allocUnsafe=function(k){return z(k)},b.allocUnsafeSlow=function(k){return z(k)};function D(k,p){if((typeof p!="string"||p==="")&&(p="utf8"),!b.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const m=st(k,p)|0;let C=A(m);const K=C.write(k,p);return K!==m&&(C=C.slice(0,K)),C}function N(k){const p=k.length<0?0:rt(k.length)|0,m=A(p);for(let C=0;C<p;C+=1)m[C]=k[C]&255;return m}function $(k){if(Ie(k,i)){const p=new i(k);return V(p.buffer,p.byteOffset,p.byteLength)}return N(k)}function V(k,p,m){if(p<0||k.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<p+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return p===void 0&&m===void 0?C=new i(k):m===void 0?C=new i(k,p):C=new i(k,p,m),Object.setPrototypeOf(C,b.prototype),C}function H(k){if(b.isBuffer(k)){const p=rt(k.length)|0,m=A(p);return m.length===0||k.copy(m,0,0,p),m}if(k.length!==void 0)return typeof k.length!="number"||jt(k.length)?A(0):N(k);if(k.type==="Buffer"&&Array.isArray(k.data))return N(k.data)}function rt(k){if(k>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return k|0}function at(k){return+k!=k&&(k=0),b.alloc(+k)}b.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==b.prototype},b.compare=function(p,m){if(Ie(p,i)&&(p=b.from(p,p.offset,p.byteLength)),Ie(m,i)&&(m=b.from(m,m.offset,m.byteLength)),!b.isBuffer(p)||!b.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===m)return 0;let C=p.length,K=m.length;for(let Y=0,et=Math.min(C,K);Y<et;++Y)if(p[Y]!==m[Y]){C=p[Y],K=m[Y];break}return C<K?-1:K<C?1:0},b.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(p,m){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return b.alloc(0);let C;if(m===void 0)for(m=0,C=0;C<p.length;++C)m+=p[C].length;const K=b.allocUnsafe(m);let Y=0;for(C=0;C<p.length;++C){let et=p[C];if(Ie(et,i))Y+et.length>K.length?(b.isBuffer(et)||(et=b.from(et)),et.copy(K,Y)):i.prototype.set.call(K,et,Y);else if(b.isBuffer(et))et.copy(K,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=et.length}return K};function st(k,p){if(b.isBuffer(k))return k.length;if(a.isView(k)||Ie(k,a))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const m=k.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let K=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Vt(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Nt(k).length;default:if(K)return C?-1:Vt(k).length;p=(""+p).toLowerCase(),K=!0}}b.byteLength=st;function ot(k,p,m){let C=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,p>>>=0,m<=p))return"";for(k||(k="utf8");;)switch(k){case"hex":return c(this,p,m);case"utf8":case"utf-8":return S(this,p,m);case"ascii":return g(this,p,m);case"latin1":case"binary":return h(this,p,m);case"base64":return E(this,p,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,p,m);default:if(C)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),C=!0}}b.prototype._isBuffer=!0;function nt(k,p,m){const C=k[p];k[p]=k[m],k[m]=C}b.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<p;m+=2)nt(this,m,m+1);return this},b.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<p;m+=4)nt(this,m,m+3),nt(this,m+1,m+2);return this},b.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<p;m+=8)nt(this,m,m+7),nt(this,m+1,m+6),nt(this,m+2,m+5),nt(this,m+3,m+4);return this},b.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?S(this,0,p):ot.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(p){if(!b.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:b.compare(this,p)===0},b.prototype.inspect=function(){let p="";const m=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(p+=" ... "),"<Buffer "+p+">"},r&&(b.prototype[r]=b.prototype.inspect),b.prototype.compare=function(p,m,C,K,Y){if(Ie(p,i)&&(p=b.from(p,p.offset,p.byteLength)),!b.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(m===void 0&&(m=0),C===void 0&&(C=p?p.length:0),K===void 0&&(K=0),Y===void 0&&(Y=this.length),m<0||C>p.length||K<0||Y>this.length)throw new RangeError("out of range index");if(K>=Y&&m>=C)return 0;if(K>=Y)return-1;if(m>=C)return 1;if(m>>>=0,C>>>=0,K>>>=0,Y>>>=0,this===p)return 0;let et=Y-K,Tt=C-m;const At=Math.min(et,Tt),It=this.slice(K,Y),Yt=p.slice(m,C);for(let Et=0;Et<At;++Et)if(It[Et]!==Yt[Et]){et=It[Et],Tt=Yt[Et];break}return et<Tt?-1:Tt<et?1:0};function j(k,p,m,C,K){if(k.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,jt(m)&&(m=K?0:k.length-1),m<0&&(m=k.length+m),m>=k.length){if(K)return-1;m=k.length-1}else if(m<0)if(K)m=0;else return-1;if(typeof p=="string"&&(p=b.from(p,C)),b.isBuffer(p))return p.length===0?-1:q(k,p,m,C,K);if(typeof p=="number")return p=p&255,typeof i.prototype.indexOf=="function"?K?i.prototype.indexOf.call(k,p,m):i.prototype.lastIndexOf.call(k,p,m):q(k,[p],m,C,K);throw new TypeError("val must be string, number or Buffer")}function q(k,p,m,C,K){let Y=1,et=k.length,Tt=p.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(k.length<2||p.length<2)return-1;Y=2,et/=2,Tt/=2,m/=2}function At(Yt,Et){return Y===1?Yt[Et]:Yt.readUInt16BE(Et*Y)}let It;if(K){let Yt=-1;for(It=m;It<et;It++)if(At(k,It)===At(p,Yt===-1?0:It-Yt)){if(Yt===-1&&(Yt=It),It-Yt+1===Tt)return Yt*Y}else Yt!==-1&&(It-=It-Yt),Yt=-1}else for(m+Tt>et&&(m=et-Tt),It=m;It>=0;It--){let Yt=!0;for(let Et=0;Et<Tt;Et++)if(At(k,It+Et)!==At(p,Et)){Yt=!1;break}if(Yt)return It}return-1}b.prototype.includes=function(p,m,C){return this.indexOf(p,m,C)!==-1},b.prototype.indexOf=function(p,m,C){return j(this,p,m,C,!0)},b.prototype.lastIndexOf=function(p,m,C){return j(this,p,m,C,!1)};function G(k,p,m,C){m=Number(m)||0;const K=k.length-m;C?(C=Number(C),C>K&&(C=K)):C=K;const Y=p.length;C>Y/2&&(C=Y/2);let et;for(et=0;et<C;++et){const Tt=parseInt(p.substr(et*2,2),16);if(jt(Tt))return et;k[m+et]=Tt}return et}function x(k,p,m,C){return $t(Vt(p,k.length-m),k,m,C)}function I(k,p,m,C){return $t(re(p),k,m,C)}function s(k,p,m,C){return $t(Nt(p),k,m,C)}function l(k,p,m,C){return $t(oe(p,k.length-m),k,m,C)}b.prototype.write=function(p,m,C,K){if(m===void 0)K="utf8",C=this.length,m=0;else if(C===void 0&&typeof m=="string")K=m,C=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(C)?(C=C>>>0,K===void 0&&(K="utf8")):(K=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-m;if((C===void 0||C>Y)&&(C=Y),p.length>0&&(C<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let et=!1;for(;;)switch(K){case"hex":return G(this,p,m,C);case"utf8":case"utf-8":return x(this,p,m,C);case"ascii":case"latin1":case"binary":return I(this,p,m,C);case"base64":return s(this,p,m,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,p,m,C);default:if(et)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),et=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(k,p,m){return p===0&&m===k.length?t.fromByteArray(k):t.fromByteArray(k.slice(p,m))}function S(k,p,m){m=Math.min(k.length,m);const C=[];let K=p;for(;K<m;){const Y=k[K];let et=null,Tt=Y>239?4:Y>223?3:Y>191?2:1;if(K+Tt<=m){let At,It,Yt,Et;switch(Tt){case 1:Y<128&&(et=Y);break;case 2:At=k[K+1],(At&192)===128&&(Et=(Y&31)<<6|At&63,Et>127&&(et=Et));break;case 3:At=k[K+1],It=k[K+2],(At&192)===128&&(It&192)===128&&(Et=(Y&15)<<12|(At&63)<<6|It&63,Et>2047&&(Et<55296||Et>57343)&&(et=Et));break;case 4:At=k[K+1],It=k[K+2],Yt=k[K+3],(At&192)===128&&(It&192)===128&&(Yt&192)===128&&(Et=(Y&15)<<18|(At&63)<<12|(It&63)<<6|Yt&63,Et>65535&&Et<1114112&&(et=Et))}}et===null?(et=65533,Tt=1):et>65535&&(et-=65536,C.push(et>>>10&1023|55296),et=56320|et&1023),C.push(et),K+=Tt}return R(C)}const v=4096;function R(k){const p=k.length;if(p<=v)return String.fromCharCode.apply(String,k);let m="",C=0;for(;C<p;)m+=String.fromCharCode.apply(String,k.slice(C,C+=v));return m}function g(k,p,m){let C="";m=Math.min(k.length,m);for(let K=p;K<m;++K)C+=String.fromCharCode(k[K]&127);return C}function h(k,p,m){let C="";m=Math.min(k.length,m);for(let K=p;K<m;++K)C+=String.fromCharCode(k[K]);return C}function c(k,p,m){const C=k.length;(!p||p<0)&&(p=0),(!m||m<0||m>C)&&(m=C);let K="";for(let Y=p;Y<m;++Y)K+=Qt[k[Y]];return K}function u(k,p,m){const C=k.slice(p,m);let K="";for(let Y=0;Y<C.length-1;Y+=2)K+=String.fromCharCode(C[Y]+C[Y+1]*256);return K}b.prototype.slice=function(p,m){const C=this.length;p=~~p,m=m===void 0?C:~~m,p<0?(p+=C,p<0&&(p=0)):p>C&&(p=C),m<0?(m+=C,m<0&&(m=0)):m>C&&(m=C),m<p&&(m=p);const K=this.subarray(p,m);return Object.setPrototypeOf(K,b.prototype),K};function _(k,p,m){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+p>m)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let K=this[p],Y=1,et=0;for(;++et<m&&(Y*=256);)K+=this[p+et]*Y;return K},b.prototype.readUintBE=b.prototype.readUIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let K=this[p+--m],Y=1;for(;m>0&&(Y*=256);)K+=this[p+--m]*Y;return K},b.prototype.readUint8=b.prototype.readUInt8=function(p,m){return p=p>>>0,m||_(p,1,this.length),this[p]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(p,m){return p=p>>>0,m||_(p,2,this.length),this[p]|this[p+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(p,m){return p=p>>>0,m||_(p,2,this.length),this[p]<<8|this[p+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(p,m){return p=p>>>0,m||_(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},b.prototype.readBigUInt64LE=Me(function(p){p=p>>>0,Be(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ft(p,this.length-8);const K=m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,Y=this[++p]+this[++p]*2**8+this[++p]*2**16+C*2**24;return BigInt(K)+(BigInt(Y)<<BigInt(32))}),b.prototype.readBigUInt64BE=Me(function(p){p=p>>>0,Be(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ft(p,this.length-8);const K=m*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],Y=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C;return(BigInt(K)<<BigInt(32))+BigInt(Y)}),b.prototype.readIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let K=this[p],Y=1,et=0;for(;++et<m&&(Y*=256);)K+=this[p+et]*Y;return Y*=128,K>=Y&&(K-=Math.pow(2,8*m)),K},b.prototype.readIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let K=m,Y=1,et=this[p+--K];for(;K>0&&(Y*=256);)et+=this[p+--K]*Y;return Y*=128,et>=Y&&(et-=Math.pow(2,8*m)),et},b.prototype.readInt8=function(p,m){return p=p>>>0,m||_(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},b.prototype.readInt16LE=function(p,m){p=p>>>0,m||_(p,2,this.length);const C=this[p]|this[p+1]<<8;return C&32768?C|4294901760:C},b.prototype.readInt16BE=function(p,m){p=p>>>0,m||_(p,2,this.length);const C=this[p+1]|this[p]<<8;return C&32768?C|4294901760:C},b.prototype.readInt32LE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},b.prototype.readInt32BE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},b.prototype.readBigInt64LE=Me(function(p){p=p>>>0,Be(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ft(p,this.length-8);const K=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(C<<24);return(BigInt(K)<<BigInt(32))+BigInt(m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),b.prototype.readBigInt64BE=Me(function(p){p=p>>>0,Be(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ft(p,this.length-8);const K=(m<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(K)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C)}),b.prototype.readFloatLE=function(p,m){return p=p>>>0,m||_(p,4,this.length),e.read(this,p,!0,23,4)},b.prototype.readFloatBE=function(p,m){return p=p>>>0,m||_(p,4,this.length),e.read(this,p,!1,23,4)},b.prototype.readDoubleLE=function(p,m){return p=p>>>0,m||_(p,8,this.length),e.read(this,p,!0,52,8)},b.prototype.readDoubleBE=function(p,m){return p=p>>>0,m||_(p,8,this.length),e.read(this,p,!1,52,8)};function B(k,p,m,C,K,Y){if(!b.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>K||p<Y)throw new RangeError('"value" argument is out of bounds');if(m+C>k.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(p,m,C,K){if(p=+p,m=m>>>0,C=C>>>0,!K){const Tt=Math.pow(2,8*C)-1;B(this,p,m,C,Tt,0)}let Y=1,et=0;for(this[m]=p&255;++et<C&&(Y*=256);)this[m+et]=p/Y&255;return m+C},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(p,m,C,K){if(p=+p,m=m>>>0,C=C>>>0,!K){const Tt=Math.pow(2,8*C)-1;B(this,p,m,C,Tt,0)}let Y=C-1,et=1;for(this[m+Y]=p&255;--Y>=0&&(et*=256);)this[m+Y]=p/et&255;return m+C},b.prototype.writeUint8=b.prototype.writeUInt8=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,1,255,0),this[m]=p&255,m+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,2,65535,0),this[m]=p&255,this[m+1]=p>>>8,m+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,2,65535,0),this[m]=p>>>8,this[m+1]=p&255,m+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,4,4294967295,0),this[m+3]=p>>>24,this[m+2]=p>>>16,this[m+1]=p>>>8,this[m]=p&255,m+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,4,4294967295,0),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4};function F(k,p,m,C,K){Pt(p,C,K,k,m,7);let Y=Number(p&BigInt(4294967295));k[m++]=Y,Y=Y>>8,k[m++]=Y,Y=Y>>8,k[m++]=Y,Y=Y>>8,k[m++]=Y;let et=Number(p>>BigInt(32)&BigInt(4294967295));return k[m++]=et,et=et>>8,k[m++]=et,et=et>>8,k[m++]=et,et=et>>8,k[m++]=et,m}function tt(k,p,m,C,K){Pt(p,C,K,k,m,7);let Y=Number(p&BigInt(4294967295));k[m+7]=Y,Y=Y>>8,k[m+6]=Y,Y=Y>>8,k[m+5]=Y,Y=Y>>8,k[m+4]=Y;let et=Number(p>>BigInt(32)&BigInt(4294967295));return k[m+3]=et,et=et>>8,k[m+2]=et,et=et>>8,k[m+1]=et,et=et>>8,k[m]=et,m+8}b.prototype.writeBigUInt64LE=Me(function(p,m=0){return F(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=Me(function(p,m=0){return tt(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(p,m,C,K){if(p=+p,m=m>>>0,!K){const At=Math.pow(2,8*C-1);B(this,p,m,C,At-1,-At)}let Y=0,et=1,Tt=0;for(this[m]=p&255;++Y<C&&(et*=256);)p<0&&Tt===0&&this[m+Y-1]!==0&&(Tt=1),this[m+Y]=(p/et>>0)-Tt&255;return m+C},b.prototype.writeIntBE=function(p,m,C,K){if(p=+p,m=m>>>0,!K){const At=Math.pow(2,8*C-1);B(this,p,m,C,At-1,-At)}let Y=C-1,et=1,Tt=0;for(this[m+Y]=p&255;--Y>=0&&(et*=256);)p<0&&Tt===0&&this[m+Y+1]!==0&&(Tt=1),this[m+Y]=(p/et>>0)-Tt&255;return m+C},b.prototype.writeInt8=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,1,127,-128),p<0&&(p=255+p+1),this[m]=p&255,m+1},b.prototype.writeInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,2,32767,-32768),this[m]=p&255,this[m+1]=p>>>8,m+2},b.prototype.writeInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,2,32767,-32768),this[m]=p>>>8,this[m+1]=p&255,m+2},b.prototype.writeInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,4,2147483647,-2147483648),this[m]=p&255,this[m+1]=p>>>8,this[m+2]=p>>>16,this[m+3]=p>>>24,m+4},b.prototype.writeInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||B(this,p,m,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4},b.prototype.writeBigInt64LE=Me(function(p,m=0){return F(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=Me(function(p,m=0){return tt(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ht(k,p,m,C,K,Y){if(m+C>k.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function gt(k,p,m,C,K){return p=+p,m=m>>>0,K||ht(k,p,m,4),e.write(k,p,m,C,23,4),m+4}b.prototype.writeFloatLE=function(p,m,C){return gt(this,p,m,!0,C)},b.prototype.writeFloatBE=function(p,m,C){return gt(this,p,m,!1,C)};function zt(k,p,m,C,K){return p=+p,m=m>>>0,K||ht(k,p,m,8),e.write(k,p,m,C,52,8),m+8}b.prototype.writeDoubleLE=function(p,m,C){return zt(this,p,m,!0,C)},b.prototype.writeDoubleBE=function(p,m,C){return zt(this,p,m,!1,C)},b.prototype.copy=function(p,m,C,K){if(!b.isBuffer(p))throw new TypeError("argument should be a Buffer");if(C||(C=0),!K&&K!==0&&(K=this.length),m>=p.length&&(m=p.length),m||(m=0),K>0&&K<C&&(K=C),K===C||p.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),p.length-m<K-C&&(K=p.length-m+C);const Y=K-C;return this===p&&typeof i.prototype.copyWithin=="function"?this.copyWithin(m,C,K):i.prototype.set.call(p,this.subarray(C,K),m),Y},b.prototype.fill=function(p,m,C,K){if(typeof p=="string"){if(typeof m=="string"?(K=m,m=0,C=this.length):typeof C=="string"&&(K=C,C=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!b.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(p.length===1){const et=p.charCodeAt(0);(K==="utf8"&&et<128||K==="latin1")&&(p=et)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(m<0||this.length<m||this.length<C)throw new RangeError("Out of range index");if(C<=m)return this;m=m>>>0,C=C===void 0?this.length:C>>>0,p||(p=0);let Y;if(typeof p=="number")for(Y=m;Y<C;++Y)this[Y]=p;else{const et=b.isBuffer(p)?p:b.from(p,K),Tt=et.length;if(Tt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(Y=0;Y<C-m;++Y)this[Y+m]=et[Y%Tt]}return this};const bt={};function vt(k,p,m){bt[k]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(k,p){return`The "${k}" argument must be of type number. Received type ${typeof p}`},TypeError),vt("ERR_OUT_OF_RANGE",function(k,p,m){let C=`The value of "${k}" is out of range.`,K=m;return Number.isInteger(m)&&Math.abs(m)>2**32?K=le(String(m)):typeof m=="bigint"&&(K=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(K=le(K)),K+="n"),C+=` It must be ${p}. Received ${K}`,C},RangeError);function le(k){let p="",m=k.length;const C=k[0]==="-"?1:0;for(;m>=C+4;m-=3)p=`_${k.slice(m-3,m)}${p}`;return`${k.slice(0,m)}${p}`}function Mt(k,p,m){Be(p,"offset"),(k[p]===void 0||k[p+m]===void 0)&&Ft(p,k.length-(m+1))}function Pt(k,p,m,C,K,Y){if(k>m||k<p){const et=typeof p=="bigint"?"n":"";let Tt;throw p===0||p===BigInt(0)?Tt=`>= 0${et} and < 2${et} ** ${(Y+1)*8}${et}`:Tt=`>= -(2${et} ** ${(Y+1)*8-1}${et}) and < 2 ** ${(Y+1)*8-1}${et}`,new bt.ERR_OUT_OF_RANGE("value",Tt,k)}Mt(C,K,Y)}function Be(k,p){if(typeof k!="number")throw new bt.ERR_INVALID_ARG_TYPE(p,"number",k)}function Ft(k,p,m){throw Math.floor(k)!==k?(Be(k,m),new bt.ERR_OUT_OF_RANGE("offset","an integer",k)):p<0?new bt.ERR_BUFFER_OUT_OF_BOUNDS:new bt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,k)}const Zt=/[^+/0-9A-Za-z-_]/g;function pr(k){if(k=k.split("=")[0],k=k.trim().replace(Zt,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Vt(k,p){p=p||1/0;let m;const C=k.length;let K=null;const Y=[];for(let et=0;et<C;++et){if(m=k.charCodeAt(et),m>55295&&m<57344){if(!K){if(m>56319){(p-=3)>-1&&Y.push(239,191,189);continue}else if(et+1===C){(p-=3)>-1&&Y.push(239,191,189);continue}K=m;continue}if(m<56320){(p-=3)>-1&&Y.push(239,191,189),K=m;continue}m=(K-55296<<10|m-56320)+65536}else K&&(p-=3)>-1&&Y.push(239,191,189);if(K=null,m<128){if((p-=1)<0)break;Y.push(m)}else if(m<2048){if((p-=2)<0)break;Y.push(m>>6|192,m&63|128)}else if(m<65536){if((p-=3)<0)break;Y.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((p-=4)<0)break;Y.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Y}function re(k){const p=[];for(let m=0;m<k.length;++m)p.push(k.charCodeAt(m)&255);return p}function oe(k,p){let m,C,K;const Y=[];for(let et=0;et<k.length&&!((p-=2)<0);++et)m=k.charCodeAt(et),C=m>>8,K=m%256,Y.push(K),Y.push(C);return Y}function Nt(k){return t.toByteArray(pr(k))}function $t(k,p,m,C){let K;for(K=0;K<C&&!(K+m>=p.length||K>=k.length);++K)p[K+m]=k[K];return K}function Ie(k,p){return k instanceof p||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===p.name}function jt(k){return k!==k}const Qt=function(){const k="0123456789abcdef",p=new Array(256);for(let m=0;m<16;++m){const C=m*16;for(let K=0;K<16;++K)p[C+K]=k[m]+k[K]}return p}();function Me(k){return typeof BigInt>"u"?qt:k}function qt(){throw new Error("BigInt not supported")}})(zo);const Ut=zo.Buffer,_t=zo.Buffer,Fr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uu(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function gn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Mr(n,...t){if(!uu(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function hu(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");gn(n.outputLen),gn(n.blockLen)}function Zr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Ca(n,t){Mr(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function lu(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ar(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function ji(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ye(n,t){return n<<32-t|n>>>t}const fu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function du(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function pu(n){for(let t=0;t<n.length;t++)n[t]=du(n[t]);return n}const _s=fu?n=>n:pu;function yu(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function hi(n){return typeof n=="string"&&(n=yu(n)),Mr(n),n}function gu(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Mr(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}class Ko{}function qo(n){const t=r=>n().update(hi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Ma(n=32){if(Fr&&typeof Fr.getRandomValues=="function")return Fr.getRandomValues(new Uint8Array(n));if(Fr&&typeof Fr.randomBytes=="function")return Uint8Array.from(Fr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function mu(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(e>>o&i),f=Number(e&i),d=r?4:0,A=r?0:4;n.setUint32(t+d,a,r),n.setUint32(t+A,f,r)}function wu(n,t,e){return n&t^~n&e}function bu(n,t,e){return n&t^n&e^t&e}class La extends Ko{constructor(t,e,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=ji(this.buffer)}update(t){Zr(this),t=hi(t),Mr(t);const{view:e,buffer:r,blockLen:o}=this,i=t.length;for(let a=0;a<i;){const f=Math.min(o-this.pos,i-a);if(f===o){const d=ji(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,a+=f,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zr(this),Ca(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:i}=this;let{pos:a}=this;e[a++]=128,Ar(this.buffer.subarray(a)),this.padOffset>o-a&&(this.process(r,0),a=0);for(let O=a;O<o;O++)e[O]=0;mu(r,o-8,BigInt(this.length*8),i),this.process(r,0);const f=ji(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=d/4,b=this.get();if(A>b.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<A;O++)f.setUint32(4*O,b[O],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:i,destroyed:a,pos:f}=this;return t.destroyed=a,t.finished=i,t.length=o,t.pos=f,o%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const yr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Se=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Mn=BigInt(2**32-1),Rs=BigInt(32);function Eu(n,t=!1){return t?{h:Number(n&Mn),l:Number(n>>Rs&Mn)}:{h:Number(n>>Rs&Mn)|0,l:Number(n&Mn)|0}}function Pa(n,t=!1){const e=n.length;let r=new Uint32Array(e),o=new Uint32Array(e);for(let i=0;i<e;i++){const{h:a,l:f}=Eu(n[i],t);[r[i],o[i]]=[a,f]}return[r,o]}const As=(n,t,e)=>n>>>e,Is=(n,t,e)=>n<<32-e|t>>>e,Kr=(n,t,e)=>n>>>e|t<<32-e,qr=(n,t,e)=>n<<32-e|t>>>e,Ln=(n,t,e)=>n<<64-e|t>>>e-32,Pn=(n,t,e)=>n>>>e-32|t<<64-e,_u=(n,t,e)=>n<<e|t>>>32-e,Ru=(n,t,e)=>t<<e|n>>>32-e,Au=(n,t,e)=>t<<e-32|n>>>64-e,Iu=(n,t,e)=>n<<e-32|t>>>64-e;function or(n,t,e,r){const o=(t>>>0)+(r>>>0);return{h:n+e+(o/2**32|0)|0,l:o|0}}const Su=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),vu=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,ku=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Tu=(n,t,e,r,o)=>t+e+r+o+(n/2**32|0)|0,xu=(n,t,e,r,o)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),Bu=(n,t,e,r,o,i)=>t+e+r+o+i+(n/2**32|0)|0,Ou=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gr=new Uint32Array(64);class Nu extends La{constructor(t=32){super(64,t,8,!1),this.A=yr[0]|0,this.B=yr[1]|0,this.C=yr[2]|0,this.D=yr[3]|0,this.E=yr[4]|0,this.F=yr[5]|0,this.G=yr[6]|0,this.H=yr[7]|0}get(){const{A:t,B:e,C:r,D:o,E:i,F:a,G:f,H:d}=this;return[t,e,r,o,i,a,f,d]}set(t,e,r,o,i,a,f,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=f|0,this.H=d|0}process(t,e){for(let O=0;O<16;O++,e+=4)gr[O]=t.getUint32(e,!1);for(let O=16;O<64;O++){const L=gr[O-15],P=gr[O-2],z=Ye(L,7)^Ye(L,18)^L>>>3,D=Ye(P,17)^Ye(P,19)^P>>>10;gr[O]=D+gr[O-7]+z+gr[O-16]|0}let{A:r,B:o,C:i,D:a,E:f,F:d,G:A,H:b}=this;for(let O=0;O<64;O++){const L=Ye(f,6)^Ye(f,11)^Ye(f,25),P=b+L+wu(f,d,A)+Ou[O]+gr[O]|0,D=(Ye(r,2)^Ye(r,13)^Ye(r,22))+bu(r,o,i)|0;b=A,A=d,d=f,f=a+P|0,a=i,i=o,o=r,r=P+D|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,f=f+this.E|0,d=d+this.F|0,A=A+this.G|0,b=b+this.H|0,this.set(r,o,i,a,f,d,A,b)}roundClean(){Ar(gr)}destroy(){this.set(0,0,0,0,0,0,0,0),Ar(this.buffer)}}const Ua=Pa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Cu=Ua[0],Mu=Ua[1],mr=new Uint32Array(80),wr=new Uint32Array(80);class Lu extends La{constructor(t=64){super(128,t,16,!1),this.Ah=Se[0]|0,this.Al=Se[1]|0,this.Bh=Se[2]|0,this.Bl=Se[3]|0,this.Ch=Se[4]|0,this.Cl=Se[5]|0,this.Dh=Se[6]|0,this.Dl=Se[7]|0,this.Eh=Se[8]|0,this.El=Se[9]|0,this.Fh=Se[10]|0,this.Fl=Se[11]|0,this.Gh=Se[12]|0,this.Gl=Se[13]|0,this.Hh=Se[14]|0,this.Hl=Se[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:i,Cl:a,Dh:f,Dl:d,Eh:A,El:b,Fh:O,Fl:L,Gh:P,Gl:z,Hh:D,Hl:N}=this;return[t,e,r,o,i,a,f,d,A,b,O,L,P,z,D,N]}set(t,e,r,o,i,a,f,d,A,b,O,L,P,z,D,N){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=a|0,this.Dh=f|0,this.Dl=d|0,this.Eh=A|0,this.El=b|0,this.Fh=O|0,this.Fl=L|0,this.Gh=P|0,this.Gl=z|0,this.Hh=D|0,this.Hl=N|0}process(t,e){for(let H=0;H<16;H++,e+=4)mr[H]=t.getUint32(e),wr[H]=t.getUint32(e+=4);for(let H=16;H<80;H++){const rt=mr[H-15]|0,at=wr[H-15]|0,st=Kr(rt,at,1)^Kr(rt,at,8)^As(rt,at,7),ot=qr(rt,at,1)^qr(rt,at,8)^Is(rt,at,7),nt=mr[H-2]|0,j=wr[H-2]|0,q=Kr(nt,j,19)^Ln(nt,j,61)^As(nt,j,6),G=qr(nt,j,19)^Pn(nt,j,61)^Is(nt,j,6),x=ku(ot,G,wr[H-7],wr[H-16]),I=Tu(x,st,q,mr[H-7],mr[H-16]);mr[H]=I|0,wr[H]=x|0}let{Ah:r,Al:o,Bh:i,Bl:a,Ch:f,Cl:d,Dh:A,Dl:b,Eh:O,El:L,Fh:P,Fl:z,Gh:D,Gl:N,Hh:$,Hl:V}=this;for(let H=0;H<80;H++){const rt=Kr(O,L,14)^Kr(O,L,18)^Ln(O,L,41),at=qr(O,L,14)^qr(O,L,18)^Pn(O,L,41),st=O&P^~O&D,ot=L&z^~L&N,nt=xu(V,at,ot,Mu[H],wr[H]),j=Bu(nt,$,rt,st,Cu[H],mr[H]),q=nt|0,G=Kr(r,o,28)^Ln(r,o,34)^Ln(r,o,39),x=qr(r,o,28)^Pn(r,o,34)^Pn(r,o,39),I=r&i^r&f^i&f,s=o&a^o&d^a&d;$=D|0,V=N|0,D=P|0,N=z|0,P=O|0,z=L|0,{h:O,l:L}=or(A|0,b|0,j|0,q|0),A=f|0,b=d|0,f=i|0,d=a|0,i=r|0,a=o|0;const l=Su(q,x,s);r=vu(l,j,G,I),o=l|0}({h:r,l:o}=or(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:a}=or(this.Bh|0,this.Bl|0,i|0,a|0),{h:f,l:d}=or(this.Ch|0,this.Cl|0,f|0,d|0),{h:A,l:b}=or(this.Dh|0,this.Dl|0,A|0,b|0),{h:O,l:L}=or(this.Eh|0,this.El|0,O|0,L|0),{h:P,l:z}=or(this.Fh|0,this.Fl|0,P|0,z|0),{h:D,l:N}=or(this.Gh|0,this.Gl|0,D|0,N|0),{h:$,l:V}=or(this.Hh|0,this.Hl|0,$|0,V|0),this.set(r,o,i,a,f,d,A,b,O,L,P,z,D,N,$,V)}roundClean(){Ar(mr,wr)}destroy(){Ar(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Da=qo(()=>new Nu),Pu=qo(()=>new Lu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wo=BigInt(0),vo=BigInt(1);function Xr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Vo(n){if(!Xr(n))throw new Error("Uint8Array expected")}function Er(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function Un(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Ha(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Wo:BigInt("0x"+n)}const za=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Uu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Jr(n){if(Vo(n),za)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Uu[n[e]];return t}const sr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ss(n){if(n>=sr._0&&n<=sr._9)return n-sr._0;if(n>=sr.A&&n<=sr.F)return n-(sr.A-10);if(n>=sr.a&&n<=sr.f)return n-(sr.a-10)}function Yn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(za)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){const a=Ss(n.charCodeAt(i)),f=Ss(n.charCodeAt(i+1));if(a===void 0||f===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[o]=a*16+f}return r}function Or(n){return Ha(Jr(n))}function fn(n){return Vo(n),Ha(Jr(Uint8Array.from(n).reverse()))}function mn(n,t){return Yn(n.toString(16).padStart(t*2,"0"))}function Zn(n,t){return mn(n,t).reverse()}function ge(n,t,e){let r;if(typeof t=="string")try{r=Yn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Xr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(n+" of length "+e+" expected, got "+o);return r}function Qr(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Vo(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}const Yi=n=>typeof n=="bigint"&&Wo<=n;function $o(n,t,e){return Yi(n)&&Yi(t)&&Yi(e)&&t<=n&&n<e}function $e(n,t,e,r){if(!$o(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Du(n){let t;for(t=0;n>Wo;n>>=vo,t+=1);return t}const li=n=>(vo<<BigInt(n))-vo,Zi=n=>new Uint8Array(n),vs=n=>Uint8Array.from(n);function Hu(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Zi(n),o=Zi(n),i=0;const a=()=>{r.fill(1),o.fill(0),i=0},f=(...O)=>e(o,r,...O),d=(O=Zi(0))=>{o=f(vs([0]),O),r=f(),O.length!==0&&(o=f(vs([1]),O),r=f())},A=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let O=0;const L=[];for(;O<t;){r=f();const P=r.slice();L.push(P),O+=r.length}return Qr(...L)};return(O,L)=>{a(),d(O);let P;for(;!(P=L(A()));)d();return a(),P}}const zu={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Xr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Sn(n,t,e={}){const r=(o,i,a)=>{const f=zu[i];if(typeof f!="function")throw new Error("invalid validator function");const d=n[o];if(!(a&&d===void 0)&&!f(d,n))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+d)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(e))r(o,i,!0);return n}function Xn(n){const t=new WeakMap;return(e,...r)=>{const o=t.get(e);if(o!==void 0)return o;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const De=BigInt(0),_e=BigInt(1),kr=BigInt(2),Fu=BigInt(3),ko=BigInt(4),ks=BigInt(5),Ts=BigInt(8);function ie(n,t){const e=n%t;return e>=De?e:t+e}function he(n,t,e){let r=n;for(;t-- >De;)r*=r,r%=e;return r}function To(n,t){if(n===De)throw new Error("invert: expected non-zero number");if(t<=De)throw new Error("invert: expected positive modulus, got "+t);let e=ie(n,t),r=t,o=De,i=_e;for(;e!==De;){const f=r/e,d=r%e,A=o-i*f;r=e,e=d,o=i,i=A}if(r!==_e)throw new Error("invert: does not exist");return ie(o,t)}function Ku(n){let t=n-_e,e=0;for(;t%kr===De;)t/=kr,e++;let r=kr;const o=vn(n);for(;r<n&&xs(o,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1){const a=(n+_e)/ko;return function(d,A){const b=d.pow(A,a);if(!d.eql(d.sqr(b),A))throw new Error("Cannot find square root");return b}}const i=(t+_e)/kr;return function(f,d){if(!xs(f,d))throw new Error("Cannot find square root");let A=e,b=f.pow(f.mul(f.ONE,r),t),O=f.pow(d,i),L=f.pow(d,t);for(;!f.eql(L,f.ONE);){if(f.eql(L,f.ZERO))return f.ZERO;let P=1;for(let D=f.sqr(L);P<A&&!f.eql(D,f.ONE);P++)D=f.sqr(D);const z=f.pow(b,_e<<BigInt(A-P-1));b=f.sqr(z),O=f.mul(O,z),L=f.mul(L,b),A=P}return O}}function qu(n){return n%ko===Fu?function(e,r){const o=(n+_e)/ko,i=e.pow(r,o);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}:n%Ts===ks?function(e,r){const o=e.mul(r,kr),i=(n-ks)/Ts,a=e.pow(o,i),f=e.mul(r,a),d=e.mul(e.mul(f,kr),a),A=e.mul(f,e.sub(d,e.ONE));if(!e.eql(e.sqr(A),r))throw new Error("Cannot find square root");return A}:Ku(n)}const Wu=(n,t)=>(ie(n,t)&_e)===_e,Vu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $u(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Vu.reduce((r,o)=>(r[o]="function",r),t);return Sn(n,e)}function Gu(n,t,e){if(e<De)throw new Error("invalid exponent, negatives unsupported");if(e===De)return n.ONE;if(e===_e)return t;let r=n.ONE,o=t;for(;e>De;)e&_e&&(r=n.mul(r,o)),o=n.sqr(o),e>>=_e;return r}function Go(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),o=t.reduce((a,f,d)=>n.is0(f)?a:(r[d]=a,n.mul(a,f)),n.ONE),i=n.inv(o);return t.reduceRight((a,f,d)=>n.is0(f)?a:(r[d]=n.mul(a,r[d]),n.mul(a,f)),i),r}function ju(n,t){const e=(n.ORDER-_e)/kr,r=n.pow(t,e),o=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!o&&!i&&!a)throw new Error("Cannot find square root: probably non-prime P");return o?1:i?0:-1}function xs(n,t){const e=ju(n,t);return e===0||e===1}function Fa(n,t){t!==void 0&&gn(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function vn(n,t,e=!1,r={}){if(n<=De)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:o,nByteLength:i}=Fa(n,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const f=Object.freeze({ORDER:n,isLE:e,BITS:o,BYTES:i,MASK:li(o),ZERO:De,ONE:_e,create:d=>ie(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return De<=d&&d<n},is0:d=>d===De,isOdd:d=>(d&_e)===_e,neg:d=>ie(-d,n),eql:(d,A)=>d===A,sqr:d=>ie(d*d,n),add:(d,A)=>ie(d+A,n),sub:(d,A)=>ie(d-A,n),mul:(d,A)=>ie(d*A,n),pow:(d,A)=>Gu(f,d,A),div:(d,A)=>ie(d*To(A,n),n),sqrN:d=>d*d,addN:(d,A)=>d+A,subN:(d,A)=>d-A,mulN:(d,A)=>d*A,inv:d=>To(d,n),sqrt:r.sqrt||(d=>(a||(a=qu(n)),a(f,d))),toBytes:d=>e?Zn(d,i):mn(d,i),fromBytes:d=>{if(d.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+d.length);return e?fn(d):Or(d)},invertBatch:d=>Go(f,d),cmov:(d,A,b)=>b?A:d});return Object.freeze(f)}function Ka(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function qa(n){const t=Ka(n);return t+Math.ceil(t/2)}function Yu(n,t,e=!1){const r=n.length,o=Ka(t),i=qa(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=e?fn(n):Or(n),f=ie(a,t-_e)+_e;return e?Zn(f,o):mn(f,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bs=BigInt(0),xo=BigInt(1);function Xi(n,t){const e=t.negate();return n?e:t}function Wa(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Ji(n,t){Wa(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),o=2**n,i=li(n),a=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:o,shiftBy:a}}function Os(n,t,e){const{windowSize:r,mask:o,maxNumber:i,shiftBy:a}=e;let f=Number(n&o),d=n>>a;f>r&&(f-=i,d+=xo);const A=t*r,b=A+Math.abs(f)-1,O=f===0,L=f<0,P=t%2!==0;return{nextN:d,offset:b,isZero:O,isNeg:L,isNegF:P,offsetF:A}}function Zu(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Xu(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Qi=new WeakMap,Va=new WeakMap;function to(n){return Va.get(n)||1}function $a(n,t){return{constTimeNegate:Xi,hasPrecomputes(e){return to(e)!==1},unsafeLadder(e,r,o=n.ZERO){let i=e;for(;r>Bs;)r&xo&&(o=o.add(i)),i=i.double(),r>>=xo;return o},precomputeWindow(e,r){const{windows:o,windowSize:i}=Ji(r,t),a=[];let f=e,d=f;for(let A=0;A<o;A++){d=f,a.push(d);for(let b=1;b<i;b++)d=d.add(f),a.push(d);f=d.double()}return a},wNAF(e,r,o){let i=n.ZERO,a=n.BASE;const f=Ji(e,t);for(let d=0;d<f.windows;d++){const{nextN:A,offset:b,isZero:O,isNeg:L,isNegF:P,offsetF:z}=Os(o,d,f);o=A,O?a=a.add(Xi(P,r[z])):i=i.add(Xi(L,r[b]))}return{p:i,f:a}},wNAFUnsafe(e,r,o,i=n.ZERO){const a=Ji(e,t);for(let f=0;f<a.windows&&o!==Bs;f++){const{nextN:d,offset:A,isZero:b,isNeg:O}=Os(o,f,a);if(o=d,!b){const L=r[A];i=i.add(O?L.negate():L)}}return i},getPrecomputes(e,r,o){let i=Qi.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&Qi.set(r,o(i))),i},wNAFCached(e,r,o){const i=to(e);return this.wNAF(i,this.getPrecomputes(i,e,o),r)},wNAFCachedUnsafe(e,r,o,i){const a=to(e);return a===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,o),r,i)},setWindowSize(e,r){Wa(r,t),Va.set(e,r),Qi.delete(e)}}}function Ga(n,t,e,r){if(Zu(e,n),Xu(r,t),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,i=Du(BigInt(e.length)),a=i>12?i-3:i>4?i-2:i?2:1,f=li(a),d=new Array(Number(f)+1).fill(o),A=Math.floor((t.BITS-1)/a)*a;let b=o;for(let O=A;O>=0;O-=a){d.fill(o);for(let P=0;P<r.length;P++){const z=r[P],D=Number(z>>BigInt(O)&f);d[D]=d[D].add(e[P])}let L=o;for(let P=d.length-1,z=o;P>0;P--)z=z.add(d[P]),L=L.add(z);if(b=b.add(L),O!==0)for(let P=0;P<a;P++)b=b.double()}return b}function jo(n){return $u(n.Fp),Sn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fa(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ze=BigInt(0),Oe=BigInt(1),Ns=BigInt(2),Ju=BigInt(8),Qu={zip215:!0};function th(n){const t=jo(n);return Sn(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function eh(n){const t=th(n),{Fp:e,n:r,prehash:o,hash:i,randomBytes:a,nByteLength:f,h:d}=t,A=Ns<<BigInt(f*8)-Oe,b=e.create,O=vn(t.n,t.nBitLength),L=t.uvRatio||((S,v)=>{try{return{isValid:!0,value:e.sqrt(S*e.inv(v))}}catch{return{isValid:!1,value:Ze}}}),P=t.adjustScalarBytes||(S=>S),z=t.domain||((S,v,R)=>{if(Er("phflag",R),v.length||R)throw new Error("Contexts/pre-hash are not supported");return S});function D(S,v,R=!1){const g=R?Oe:Ze;$e("coordinate "+S,v,g,A)}function N(S){if(!(S instanceof H))throw new Error("ExtendedPoint expected")}const $=Xn((S,v)=>{const{ex:R,ey:g,ez:h}=S,c=S.is0();v==null&&(v=c?Ju:e.inv(h));const u=b(R*v),_=b(g*v),B=b(h*v);if(c)return{x:Ze,y:Oe};if(B!==Oe)throw new Error("invZ was invalid");return{x:u,y:_}}),V=Xn(S=>{const{a:v,d:R}=t;if(S.is0())throw new Error("bad point: ZERO");const{ex:g,ey:h,ez:c,et:u}=S,_=b(g*g),B=b(h*h),F=b(c*c),tt=b(F*F),ht=b(_*v),gt=b(F*b(ht+B)),zt=b(tt+b(R*b(_*B)));if(gt!==zt)throw new Error("bad point: equation left != right (1)");const bt=b(g*h),vt=b(c*u);if(bt!==vt)throw new Error("bad point: equation left != right (2)");return!0});class H{constructor(v,R,g,h){D("x",v),D("y",R),D("z",g,!0),D("t",h),this.ex=v,this.ey=R,this.ez=g,this.et=h,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof H)throw new Error("extended point not allowed");const{x:R,y:g}=v||{};return D("x",R),D("y",g),new H(R,g,Oe,b(R*g))}static normalizeZ(v){const R=Go(e,v.map(g=>g.ez));return v.map((g,h)=>g.toAffine(R[h])).map(H.fromAffine)}static msm(v,R){return Ga(H,O,v,R)}_setWindowSize(v){st.setWindowSize(this,v)}assertValidity(){V(this)}equals(v){N(v);const{ex:R,ey:g,ez:h}=this,{ex:c,ey:u,ez:_}=v,B=b(R*_),F=b(c*h),tt=b(g*_),ht=b(u*h);return B===F&&tt===ht}is0(){return this.equals(H.ZERO)}negate(){return new H(b(-this.ex),this.ey,this.ez,b(-this.et))}double(){const{a:v}=t,{ex:R,ey:g,ez:h}=this,c=b(R*R),u=b(g*g),_=b(Ns*b(h*h)),B=b(v*c),F=R+g,tt=b(b(F*F)-c-u),ht=B+u,gt=ht-_,zt=B-u,bt=b(tt*gt),vt=b(ht*zt),le=b(tt*zt),Mt=b(gt*ht);return new H(bt,vt,Mt,le)}add(v){N(v);const{a:R,d:g}=t,{ex:h,ey:c,ez:u,et:_}=this,{ex:B,ey:F,ez:tt,et:ht}=v,gt=b(h*B),zt=b(c*F),bt=b(_*g*ht),vt=b(u*tt),le=b((h+c)*(B+F)-gt-zt),Mt=vt-bt,Pt=vt+bt,Be=b(zt-R*gt),Ft=b(le*Mt),Zt=b(Pt*Be),pr=b(le*Be),Vt=b(Mt*Pt);return new H(Ft,Zt,Vt,pr)}subtract(v){return this.add(v.negate())}wNAF(v){return st.wNAFCached(this,v,H.normalizeZ)}multiply(v){const R=v;$e("scalar",R,Oe,r);const{p:g,f:h}=this.wNAF(R);return H.normalizeZ([g,h])[0]}multiplyUnsafe(v,R=H.ZERO){const g=v;return $e("scalar",g,Ze,r),g===Ze?at:this.is0()||g===Oe?this:st.wNAFCachedUnsafe(this,g,H.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return st.unsafeLadder(this,r).is0()}toAffine(v){return $(this,v)}clearCofactor(){const{h:v}=t;return v===Oe?this:this.multiplyUnsafe(v)}static fromHex(v,R=!1){const{d:g,a:h}=t,c=e.BYTES;v=ge("pointHex",v,c),Er("zip215",R);const u=v.slice(),_=v[c-1];u[c-1]=_&-129;const B=fn(u),F=R?A:e.ORDER;$e("pointHex.y",B,Ze,F);const tt=b(B*B),ht=b(tt-Oe),gt=b(g*tt-h);let{isValid:zt,value:bt}=L(ht,gt);if(!zt)throw new Error("Point.fromHex: invalid y coordinate");const vt=(bt&Oe)===Oe,le=(_&128)!==0;if(!R&&bt===Ze&&le)throw new Error("Point.fromHex: x=0 and x_0=1");return le!==vt&&(bt=b(-bt)),H.fromAffine({x:bt,y:B})}static fromPrivateKey(v){const{scalar:R}=j(v);return rt.multiply(R)}toRawBytes(){const{x:v,y:R}=this.toAffine(),g=Zn(R,e.BYTES);return g[g.length-1]|=v&Oe?128:0,g}toHex(){return Jr(this.toRawBytes())}}H.BASE=new H(t.Gx,t.Gy,Oe,b(t.Gx*t.Gy)),H.ZERO=new H(Ze,Oe,Oe,Ze);const{BASE:rt,ZERO:at}=H,st=$a(H,f*8);function ot(S){return ie(S,r)}function nt(S){return ot(fn(S))}function j(S){const v=e.BYTES;S=ge("private key",S,v);const R=ge("hashed private key",i(S),2*v),g=P(R.slice(0,v)),h=R.slice(v,2*v),c=nt(g);return{head:g,prefix:h,scalar:c}}function q(S){const{head:v,prefix:R,scalar:g}=j(S),h=rt.multiply(g),c=h.toRawBytes();return{head:v,prefix:R,scalar:g,point:h,pointBytes:c}}function G(S){return q(S).pointBytes}function x(S=Uint8Array.of(),...v){const R=Qr(...v);return nt(i(z(R,ge("context",S),!!o)))}function I(S,v,R={}){S=ge("message",S),o&&(S=o(S));const{prefix:g,scalar:h,pointBytes:c}=q(v),u=x(R.context,g,S),_=rt.multiply(u).toRawBytes(),B=x(R.context,_,c,S),F=ot(u+B*h);$e("signature.s",F,Ze,r);const tt=Qr(_,Zn(F,e.BYTES));return ge("result",tt,e.BYTES*2)}const s=Qu;function l(S,v,R,g=s){const{context:h,zip215:c}=g,u=e.BYTES;S=ge("signature",S,2*u),v=ge("message",v),R=ge("publicKey",R,u),c!==void 0&&Er("zip215",c),o&&(v=o(v));const _=fn(S.slice(u,2*u));let B,F,tt;try{B=H.fromHex(R,c),F=H.fromHex(S.slice(0,u),c),tt=rt.multiplyUnsafe(_)}catch{return!1}if(!c&&B.isSmallOrder())return!1;const ht=x(h,F.toRawBytes(),B.toRawBytes(),v);return F.add(B.multiplyUnsafe(ht)).subtract(tt).clearCofactor().equals(H.ZERO)}return rt._setWindowSize(8),{CURVE:t,getPublicKey:G,sign:I,verify:l,ExtendedPoint:H,utils:{getExtendedPublicKey:q,randomPrivateKey:()=>a(e.BYTES),precompute(S=8,v=H.BASE){return v._setWindowSize(S),v.multiply(BigInt(3)),v}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Cs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const rh=BigInt(1),Ms=BigInt(2);BigInt(3);const nh=BigInt(5),ih=BigInt(8);function oh(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),o=BigInt(80),i=Yo,f=n*n%i*n%i,d=he(f,Ms,i)*f%i,A=he(d,rh,i)*n%i,b=he(A,nh,i)*A%i,O=he(b,t,i)*b%i,L=he(O,e,i)*O%i,P=he(L,r,i)*L%i,z=he(P,o,i)*P%i,D=he(z,o,i)*P%i,N=he(D,t,i)*b%i;return{pow_p_5_8:he(N,Ms,i)*n%i,b2:f}}function sh(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function ah(n,t){const e=Yo,r=ie(t*t*t,e),o=ie(r*r*t,e),i=oh(n*o).pow_p_5_8;let a=ie(n*r*i,e);const f=ie(t*a*a,e),d=a,A=ie(a*Cs,e),b=f===n,O=f===ie(-n,e),L=f===ie(-n*Cs,e);return b&&(a=d),(O||L)&&(a=A),Wu(a,e)&&(a=ie(-a,e)),{isValid:b||O,value:a}}const Ls=vn(Yo,void 0,!0),ch={a:Ls.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ls,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ih,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Pu,randomBytes:Ma,adjustScalarBytes:sh,uvRatio:ah},nn=eh(ch);function fi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Zo(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),e}var Wn={exports:{}},eo={},Ps;function Xo(){return Ps||(Ps=1,function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},e={};e.byteLength=b,e.toByteArray=L,e.fromByteArray=D;for(var r=[],o=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=a.length;f<d;++f)r[f]=a[f],o[a.charCodeAt(f)]=f;o[45]=62,o[95]=63;function A(V){var H=V.length;if(H%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var rt=V.indexOf("=");rt===-1&&(rt=H);var at=rt===H?0:4-rt%4;return[rt,at]}function b(V){var H=A(V),rt=H[0],at=H[1];return(rt+at)*3/4-at}function O(V,H,rt){return(H+rt)*3/4-rt}function L(V){var H,rt=A(V),at=rt[0],st=rt[1],ot=new i(O(V,at,st)),nt=0,j=st>0?at-4:at,q;for(q=0;q<j;q+=4)H=o[V.charCodeAt(q)]<<18|o[V.charCodeAt(q+1)]<<12|o[V.charCodeAt(q+2)]<<6|o[V.charCodeAt(q+3)],ot[nt++]=H>>16&255,ot[nt++]=H>>8&255,ot[nt++]=H&255;return st===2&&(H=o[V.charCodeAt(q)]<<2|o[V.charCodeAt(q+1)]>>4,ot[nt++]=H&255),st===1&&(H=o[V.charCodeAt(q)]<<10|o[V.charCodeAt(q+1)]<<4|o[V.charCodeAt(q+2)]>>2,ot[nt++]=H>>8&255,ot[nt++]=H&255),ot}function P(V){return r[V>>18&63]+r[V>>12&63]+r[V>>6&63]+r[V&63]}function z(V,H,rt){for(var at,st=[],ot=H;ot<rt;ot+=3)at=(V[ot]<<16&16711680)+(V[ot+1]<<8&65280)+(V[ot+2]&255),st.push(P(at));return st.join("")}function D(V){for(var H,rt=V.length,at=rt%3,st=[],ot=16383,nt=0,j=rt-at;nt<j;nt+=ot)st.push(z(V,nt,nt+ot>j?j:nt+ot));return at===1?(H=V[rt-1],st.push(r[H>>2]+r[H<<4&63]+"==")):at===2&&(H=(V[rt-2]<<8)+V[rt-1],st.push(r[H>>10]+r[H>>4&63]+r[H<<2&63]+"=")),st.join("")}var N={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */N.read=function(V,H,rt,at,st){var ot,nt,j=st*8-at-1,q=(1<<j)-1,G=q>>1,x=-7,I=rt?st-1:0,s=rt?-1:1,l=V[H+I];for(I+=s,ot=l&(1<<-x)-1,l>>=-x,x+=j;x>0;ot=ot*256+V[H+I],I+=s,x-=8);for(nt=ot&(1<<-x)-1,ot>>=-x,x+=at;x>0;nt=nt*256+V[H+I],I+=s,x-=8);if(ot===0)ot=1-G;else{if(ot===q)return nt?NaN:(l?-1:1)*(1/0);nt=nt+Math.pow(2,at),ot=ot-G}return(l?-1:1)*nt*Math.pow(2,ot-at)},N.write=function(V,H,rt,at,st,ot){var nt,j,q,G=ot*8-st-1,x=(1<<G)-1,I=x>>1,s=st===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=at?0:ot-1,E=at?1:-1,S=H<0||H===0&&1/H<0?1:0;for(H=Math.abs(H),isNaN(H)||H===1/0?(j=isNaN(H)?1:0,nt=x):(nt=Math.floor(Math.log(H)/Math.LN2),H*(q=Math.pow(2,-nt))<1&&(nt--,q*=2),nt+I>=1?H+=s/q:H+=s*Math.pow(2,1-I),H*q>=2&&(nt++,q/=2),nt+I>=x?(j=0,nt=x):nt+I>=1?(j=(H*q-1)*Math.pow(2,st),nt=nt+I):(j=H*Math.pow(2,I-1)*Math.pow(2,st),nt=0));st>=8;V[rt+l]=j&255,l+=E,j/=256,st-=8);for(nt=nt<<st|j,G+=st;G>0;V[rt+l]=nt&255,l+=E,nt/=256,G-=8);V[rt+l-E]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(V){const H=e,rt=N,at=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;V.Buffer=x,V.SlowBuffer=u,V.INSPECT_MAX_BYTES=50;const st=2147483647;V.kMaxLength=st;const{Uint8Array:ot,ArrayBuffer:nt,SharedArrayBuffer:j}=globalThis;x.TYPED_ARRAY_SUPPORT=q(),!x.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function q(){try{const T=new ot(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,ot.prototype),Object.setPrototypeOf(T,y),T.foo()===42}catch{return!1}}Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}});function G(T){if(T>st)throw new RangeError('The value "'+T+'" is invalid for option "size"');const y=new ot(T);return Object.setPrototypeOf(y,x.prototype),y}function x(T,y,w){if(typeof T=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(T)}return I(T,y,w)}x.poolSize=8192;function I(T,y,w){if(typeof T=="string")return S(T,y);if(nt.isView(T))return R(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(ze(T,nt)||T&&ze(T.buffer,nt)||typeof j<"u"&&(ze(T,j)||T&&ze(T.buffer,j)))return g(T,y,w);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=T.valueOf&&T.valueOf();if(M!=null&&M!==T)return x.from(M,y,w);const W=h(T);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return x.from(T[Symbol.toPrimitive]("string"),y,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}x.from=function(T,y,w){return I(T,y,w)},Object.setPrototypeOf(x.prototype,ot.prototype),Object.setPrototypeOf(x,ot);function s(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function l(T,y,w){return s(T),T<=0?G(T):y!==void 0?typeof w=="string"?G(T).fill(y,w):G(T).fill(y):G(T)}x.alloc=function(T,y,w){return l(T,y,w)};function E(T){return s(T),G(T<0?0:c(T)|0)}x.allocUnsafe=function(T){return E(T)},x.allocUnsafeSlow=function(T){return E(T)};function S(T,y){if((typeof y!="string"||y==="")&&(y="utf8"),!x.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const w=_(T,y)|0;let M=G(w);const W=M.write(T,y);return W!==w&&(M=M.slice(0,W)),M}function v(T){const y=T.length<0?0:c(T.length)|0,w=G(y);for(let M=0;M<y;M+=1)w[M]=T[M]&255;return w}function R(T){if(ze(T,ot)){const y=new ot(T);return g(y.buffer,y.byteOffset,y.byteLength)}return v(T)}function g(T,y,w){if(y<0||T.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<y+(w||0))throw new RangeError('"length" is outside of buffer bounds');let M;return y===void 0&&w===void 0?M=new ot(T):w===void 0?M=new ot(T,y):M=new ot(T,y,w),Object.setPrototypeOf(M,x.prototype),M}function h(T){if(x.isBuffer(T)){const y=c(T.length)|0,w=G(y);return w.length===0||T.copy(w,0,0,y),w}if(T.length!==void 0)return typeof T.length!="number"||ne(T.length)?G(0):v(T);if(T.type==="Buffer"&&Array.isArray(T.data))return v(T.data)}function c(T){if(T>=st)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+st.toString(16)+" bytes");return T|0}function u(T){return+T!=T&&(T=0),x.alloc(+T)}x.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==x.prototype},x.compare=function(y,w){if(ze(y,ot)&&(y=x.from(y,y.offset,y.byteLength)),ze(w,ot)&&(w=x.from(w,w.offset,w.byteLength)),!x.isBuffer(y)||!x.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===w)return 0;let M=y.length,W=w.length;for(let Z=0,it=Math.min(M,W);Z<it;++Z)if(y[Z]!==w[Z]){M=y[Z],W=w[Z];break}return M<W?-1:W<M?1:0},x.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(y,w){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return x.alloc(0);let M;if(w===void 0)for(w=0,M=0;M<y.length;++M)w+=y[M].length;const W=x.allocUnsafe(w);let Z=0;for(M=0;M<y.length;++M){let it=y[M];if(ze(it,ot))Z+it.length>W.length?(x.isBuffer(it)||(it=x.from(it)),it.copy(W,Z)):ot.prototype.set.call(W,it,Z);else if(x.isBuffer(it))it.copy(W,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=it.length}return W};function _(T,y){if(x.isBuffer(T))return T.length;if(nt.isView(T)||ze(T,nt))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const w=T.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&w===0)return 0;let W=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return At(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return Et(T).length;default:if(W)return M?-1:At(T).length;y=(""+y).toLowerCase(),W=!0}}x.byteLength=_;function B(T,y,w){let M=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,y>>>=0,w<=y))return"";for(T||(T="utf8");;)switch(T){case"hex":return Vt(this,y,w);case"utf8":case"utf-8":return Pt(this,y,w);case"ascii":return Zt(this,y,w);case"latin1":case"binary":return pr(this,y,w);case"base64":return Mt(this,y,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,y,w);default:if(M)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),M=!0}}x.prototype._isBuffer=!0;function F(T,y,w){const M=T[y];T[y]=T[w],T[w]=M}x.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<y;w+=2)F(this,w,w+1);return this},x.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<y;w+=4)F(this,w,w+3),F(this,w+1,w+2);return this},x.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<y;w+=8)F(this,w,w+7),F(this,w+1,w+6),F(this,w+2,w+5),F(this,w+3,w+4);return this},x.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?Pt(this,0,y):B.apply(this,arguments)},x.prototype.toLocaleString=x.prototype.toString,x.prototype.equals=function(y){if(!x.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:x.compare(this,y)===0},x.prototype.inspect=function(){let y="";const w=V.INSPECT_MAX_BYTES;return y=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(y+=" ... "),"<Buffer "+y+">"},at&&(x.prototype[at]=x.prototype.inspect),x.prototype.compare=function(y,w,M,W,Z){if(ze(y,ot)&&(y=x.from(y,y.offset,y.byteLength)),!x.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(w===void 0&&(w=0),M===void 0&&(M=y?y.length:0),W===void 0&&(W=0),Z===void 0&&(Z=this.length),w<0||M>y.length||W<0||Z>this.length)throw new RangeError("out of range index");if(W>=Z&&w>=M)return 0;if(W>=Z)return-1;if(w>=M)return 1;if(w>>>=0,M>>>=0,W>>>=0,Z>>>=0,this===y)return 0;let it=Z-W,xt=M-w;const kt=Math.min(it,xt),St=this.slice(W,Z),ee=y.slice(w,M);for(let Rt=0;Rt<kt;++Rt)if(St[Rt]!==ee[Rt]){it=St[Rt],xt=ee[Rt];break}return it<xt?-1:xt<it?1:0};function tt(T,y,w,M,W){if(T.length===0)return-1;if(typeof w=="string"?(M=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,ne(w)&&(w=W?0:T.length-1),w<0&&(w=T.length+w),w>=T.length){if(W)return-1;w=T.length-1}else if(w<0)if(W)w=0;else return-1;if(typeof y=="string"&&(y=x.from(y,M)),x.isBuffer(y))return y.length===0?-1:ht(T,y,w,M,W);if(typeof y=="number")return y=y&255,typeof ot.prototype.indexOf=="function"?W?ot.prototype.indexOf.call(T,y,w):ot.prototype.lastIndexOf.call(T,y,w):ht(T,[y],w,M,W);throw new TypeError("val must be string, number or Buffer")}function ht(T,y,w,M,W){let Z=1,it=T.length,xt=y.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(T.length<2||y.length<2)return-1;Z=2,it/=2,xt/=2,w/=2}function kt(ee,Rt){return Z===1?ee[Rt]:ee.readUInt16BE(Rt*Z)}let St;if(W){let ee=-1;for(St=w;St<it;St++)if(kt(T,St)===kt(y,ee===-1?0:St-ee)){if(ee===-1&&(ee=St),St-ee+1===xt)return ee*Z}else ee!==-1&&(St-=St-ee),ee=-1}else for(w+xt>it&&(w=it-xt),St=w;St>=0;St--){let ee=!0;for(let Rt=0;Rt<xt;Rt++)if(kt(T,St+Rt)!==kt(y,Rt)){ee=!1;break}if(ee)return St}return-1}x.prototype.includes=function(y,w,M){return this.indexOf(y,w,M)!==-1},x.prototype.indexOf=function(y,w,M){return tt(this,y,w,M,!0)},x.prototype.lastIndexOf=function(y,w,M){return tt(this,y,w,M,!1)};function gt(T,y,w,M){w=Number(w)||0;const W=T.length-w;M?(M=Number(M),M>W&&(M=W)):M=W;const Z=y.length;M>Z/2&&(M=Z/2);let it;for(it=0;it<M;++it){const xt=parseInt(y.substr(it*2,2),16);if(ne(xt))return it;T[w+it]=xt}return it}function zt(T,y,w,M){return te(At(y,T.length-w),T,w,M)}function bt(T,y,w,M){return te(It(y),T,w,M)}function vt(T,y,w,M){return te(Et(y),T,w,M)}function le(T,y,w,M){return te(Yt(y,T.length-w),T,w,M)}x.prototype.write=function(y,w,M,W){if(w===void 0)W="utf8",M=this.length,w=0;else if(M===void 0&&typeof w=="string")W=w,M=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(M)?(M=M>>>0,W===void 0&&(W="utf8")):(W=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-w;if((M===void 0||M>Z)&&(M=Z),y.length>0&&(M<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let it=!1;for(;;)switch(W){case"hex":return gt(this,y,w,M);case"utf8":case"utf-8":return zt(this,y,w,M);case"ascii":case"latin1":case"binary":return bt(this,y,w,M);case"base64":return vt(this,y,w,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,y,w,M);default:if(it)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),it=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Mt(T,y,w){return y===0&&w===T.length?H.fromByteArray(T):H.fromByteArray(T.slice(y,w))}function Pt(T,y,w){w=Math.min(T.length,w);const M=[];let W=y;for(;W<w;){const Z=T[W];let it=null,xt=Z>239?4:Z>223?3:Z>191?2:1;if(W+xt<=w){let kt,St,ee,Rt;switch(xt){case 1:Z<128&&(it=Z);break;case 2:kt=T[W+1],(kt&192)===128&&(Rt=(Z&31)<<6|kt&63,Rt>127&&(it=Rt));break;case 3:kt=T[W+1],St=T[W+2],(kt&192)===128&&(St&192)===128&&(Rt=(Z&15)<<12|(kt&63)<<6|St&63,Rt>2047&&(Rt<55296||Rt>57343)&&(it=Rt));break;case 4:kt=T[W+1],St=T[W+2],ee=T[W+3],(kt&192)===128&&(St&192)===128&&(ee&192)===128&&(Rt=(Z&15)<<18|(kt&63)<<12|(St&63)<<6|ee&63,Rt>65535&&Rt<1114112&&(it=Rt))}}it===null?(it=65533,xt=1):it>65535&&(it-=65536,M.push(it>>>10&1023|55296),it=56320|it&1023),M.push(it),W+=xt}return Ft(M)}const Be=4096;function Ft(T){const y=T.length;if(y<=Be)return String.fromCharCode.apply(String,T);let w="",M=0;for(;M<y;)w+=String.fromCharCode.apply(String,T.slice(M,M+=Be));return w}function Zt(T,y,w){let M="";w=Math.min(T.length,w);for(let W=y;W<w;++W)M+=String.fromCharCode(T[W]&127);return M}function pr(T,y,w){let M="";w=Math.min(T.length,w);for(let W=y;W<w;++W)M+=String.fromCharCode(T[W]);return M}function Vt(T,y,w){const M=T.length;(!y||y<0)&&(y=0),(!w||w<0||w>M)&&(w=M);let W="";for(let Z=y;Z<w;++Z)W+=ce[T[Z]];return W}function re(T,y,w){const M=T.slice(y,w);let W="";for(let Z=0;Z<M.length-1;Z+=2)W+=String.fromCharCode(M[Z]+M[Z+1]*256);return W}x.prototype.slice=function(y,w){const M=this.length;y=~~y,w=w===void 0?M:~~w,y<0?(y+=M,y<0&&(y=0)):y>M&&(y=M),w<0?(w+=M,w<0&&(w=0)):w>M&&(w=M),w<y&&(w=y);const W=this.subarray(y,w);return Object.setPrototypeOf(W,x.prototype),W};function oe(T,y,w){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+y>w)throw new RangeError("Trying to access beyond buffer length")}x.prototype.readUintLE=x.prototype.readUIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let W=this[y],Z=1,it=0;for(;++it<w&&(Z*=256);)W+=this[y+it]*Z;return W},x.prototype.readUintBE=x.prototype.readUIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let W=this[y+--w],Z=1;for(;w>0&&(Z*=256);)W+=this[y+--w]*Z;return W},x.prototype.readUint8=x.prototype.readUInt8=function(y,w){return y=y>>>0,w||oe(y,1,this.length),this[y]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(y,w){return y=y>>>0,w||oe(y,2,this.length),this[y]|this[y+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(y,w){return y=y>>>0,w||oe(y,2,this.length),this[y]<<8|this[y+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},x.prototype.readBigUInt64LE=Ve(function(y){y=y>>>0,K(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const W=w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Z=this[++y]+this[++y]*2**8+this[++y]*2**16+M*2**24;return BigInt(W)+(BigInt(Z)<<BigInt(32))}),x.prototype.readBigUInt64BE=Ve(function(y){y=y>>>0,K(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const W=w*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M;return(BigInt(W)<<BigInt(32))+BigInt(Z)}),x.prototype.readIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let W=this[y],Z=1,it=0;for(;++it<w&&(Z*=256);)W+=this[y+it]*Z;return Z*=128,W>=Z&&(W-=Math.pow(2,8*w)),W},x.prototype.readIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let W=w,Z=1,it=this[y+--W];for(;W>0&&(Z*=256);)it+=this[y+--W]*Z;return Z*=128,it>=Z&&(it-=Math.pow(2,8*w)),it},x.prototype.readInt8=function(y,w){return y=y>>>0,w||oe(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},x.prototype.readInt16LE=function(y,w){y=y>>>0,w||oe(y,2,this.length);const M=this[y]|this[y+1]<<8;return M&32768?M|4294901760:M},x.prototype.readInt16BE=function(y,w){y=y>>>0,w||oe(y,2,this.length);const M=this[y+1]|this[y]<<8;return M&32768?M|4294901760:M},x.prototype.readInt32LE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},x.prototype.readInt32BE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},x.prototype.readBigInt64LE=Ve(function(y){y=y>>>0,K(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const W=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(M<<24);return(BigInt(W)<<BigInt(32))+BigInt(w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),x.prototype.readBigInt64BE=Ve(function(y){y=y>>>0,K(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const W=(w<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(W)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M)}),x.prototype.readFloatLE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),rt.read(this,y,!0,23,4)},x.prototype.readFloatBE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),rt.read(this,y,!1,23,4)},x.prototype.readDoubleLE=function(y,w){return y=y>>>0,w||oe(y,8,this.length),rt.read(this,y,!0,52,8)},x.prototype.readDoubleBE=function(y,w){return y=y>>>0,w||oe(y,8,this.length),rt.read(this,y,!1,52,8)};function Nt(T,y,w,M,W,Z){if(!x.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>W||y<Z)throw new RangeError('"value" argument is out of bounds');if(w+M>T.length)throw new RangeError("Index out of range")}x.prototype.writeUintLE=x.prototype.writeUIntLE=function(y,w,M,W){if(y=+y,w=w>>>0,M=M>>>0,!W){const xt=Math.pow(2,8*M)-1;Nt(this,y,w,M,xt,0)}let Z=1,it=0;for(this[w]=y&255;++it<M&&(Z*=256);)this[w+it]=y/Z&255;return w+M},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(y,w,M,W){if(y=+y,w=w>>>0,M=M>>>0,!W){const xt=Math.pow(2,8*M)-1;Nt(this,y,w,M,xt,0)}let Z=M-1,it=1;for(this[w+Z]=y&255;--Z>=0&&(it*=256);)this[w+Z]=y/it&255;return w+M},x.prototype.writeUint8=x.prototype.writeUInt8=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,1,255,0),this[w]=y&255,w+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,65535,0),this[w]=y&255,this[w+1]=y>>>8,w+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,65535,0),this[w]=y>>>8,this[w+1]=y&255,w+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,4294967295,0),this[w+3]=y>>>24,this[w+2]=y>>>16,this[w+1]=y>>>8,this[w]=y&255,w+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,4294967295,0),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4};function $t(T,y,w,M,W){C(y,M,W,T,w,7);let Z=Number(y&BigInt(4294967295));T[w++]=Z,Z=Z>>8,T[w++]=Z,Z=Z>>8,T[w++]=Z,Z=Z>>8,T[w++]=Z;let it=Number(y>>BigInt(32)&BigInt(4294967295));return T[w++]=it,it=it>>8,T[w++]=it,it=it>>8,T[w++]=it,it=it>>8,T[w++]=it,w}function Ie(T,y,w,M,W){C(y,M,W,T,w,7);let Z=Number(y&BigInt(4294967295));T[w+7]=Z,Z=Z>>8,T[w+6]=Z,Z=Z>>8,T[w+5]=Z,Z=Z>>8,T[w+4]=Z;let it=Number(y>>BigInt(32)&BigInt(4294967295));return T[w+3]=it,it=it>>8,T[w+2]=it,it=it>>8,T[w+1]=it,it=it>>8,T[w]=it,w+8}x.prototype.writeBigUInt64LE=Ve(function(y,w=0){return $t(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=Ve(function(y,w=0){return Ie(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(y,w,M,W){if(y=+y,w=w>>>0,!W){const kt=Math.pow(2,8*M-1);Nt(this,y,w,M,kt-1,-kt)}let Z=0,it=1,xt=0;for(this[w]=y&255;++Z<M&&(it*=256);)y<0&&xt===0&&this[w+Z-1]!==0&&(xt=1),this[w+Z]=(y/it>>0)-xt&255;return w+M},x.prototype.writeIntBE=function(y,w,M,W){if(y=+y,w=w>>>0,!W){const kt=Math.pow(2,8*M-1);Nt(this,y,w,M,kt-1,-kt)}let Z=M-1,it=1,xt=0;for(this[w+Z]=y&255;--Z>=0&&(it*=256);)y<0&&xt===0&&this[w+Z+1]!==0&&(xt=1),this[w+Z]=(y/it>>0)-xt&255;return w+M},x.prototype.writeInt8=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,1,127,-128),y<0&&(y=255+y+1),this[w]=y&255,w+1},x.prototype.writeInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,32767,-32768),this[w]=y&255,this[w+1]=y>>>8,w+2},x.prototype.writeInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,32767,-32768),this[w]=y>>>8,this[w+1]=y&255,w+2},x.prototype.writeInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,2147483647,-2147483648),this[w]=y&255,this[w+1]=y>>>8,this[w+2]=y>>>16,this[w+3]=y>>>24,w+4},x.prototype.writeInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4},x.prototype.writeBigInt64LE=Ve(function(y,w=0){return $t(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=Ve(function(y,w=0){return Ie(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function jt(T,y,w,M,W,Z){if(w+M>T.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Qt(T,y,w,M,W){return y=+y,w=w>>>0,W||jt(T,y,w,4),rt.write(T,y,w,M,23,4),w+4}x.prototype.writeFloatLE=function(y,w,M){return Qt(this,y,w,!0,M)},x.prototype.writeFloatBE=function(y,w,M){return Qt(this,y,w,!1,M)};function Me(T,y,w,M,W){return y=+y,w=w>>>0,W||jt(T,y,w,8),rt.write(T,y,w,M,52,8),w+8}x.prototype.writeDoubleLE=function(y,w,M){return Me(this,y,w,!0,M)},x.prototype.writeDoubleBE=function(y,w,M){return Me(this,y,w,!1,M)},x.prototype.copy=function(y,w,M,W){if(!x.isBuffer(y))throw new TypeError("argument should be a Buffer");if(M||(M=0),!W&&W!==0&&(W=this.length),w>=y.length&&(w=y.length),w||(w=0),W>0&&W<M&&(W=M),W===M||y.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),y.length-w<W-M&&(W=y.length-w+M);const Z=W-M;return this===y&&typeof ot.prototype.copyWithin=="function"?this.copyWithin(w,M,W):ot.prototype.set.call(y,this.subarray(M,W),w),Z},x.prototype.fill=function(y,w,M,W){if(typeof y=="string"){if(typeof w=="string"?(W=w,w=0,M=this.length):typeof M=="string"&&(W=M,M=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!x.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(y.length===1){const it=y.charCodeAt(0);(W==="utf8"&&it<128||W==="latin1")&&(y=it)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(w<0||this.length<w||this.length<M)throw new RangeError("Out of range index");if(M<=w)return this;w=w>>>0,M=M===void 0?this.length:M>>>0,y||(y=0);let Z;if(typeof y=="number")for(Z=w;Z<M;++Z)this[Z]=y;else{const it=x.isBuffer(y)?y:x.from(y,W),xt=it.length;if(xt===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<M-w;++Z)this[Z+w]=it[Z%xt]}return this};const qt={};function k(T,y,w){qt[T]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(T,y){return`The "${T}" argument must be of type number. Received type ${typeof y}`},TypeError),k("ERR_OUT_OF_RANGE",function(T,y,w){let M=`The value of "${T}" is out of range.`,W=w;return Number.isInteger(w)&&Math.abs(w)>2**32?W=p(String(w)):typeof w=="bigint"&&(W=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(W=p(W)),W+="n"),M+=` It must be ${y}. Received ${W}`,M},RangeError);function p(T){let y="",w=T.length;const M=T[0]==="-"?1:0;for(;w>=M+4;w-=3)y=`_${T.slice(w-3,w)}${y}`;return`${T.slice(0,w)}${y}`}function m(T,y,w){K(y,"offset"),(T[y]===void 0||T[y+w]===void 0)&&Y(y,T.length-(w+1))}function C(T,y,w,M,W,Z){if(T>w||T<y){const it=typeof y=="bigint"?"n":"";let xt;throw y===0||y===BigInt(0)?xt=`>= 0${it} and < 2${it} ** ${(Z+1)*8}${it}`:xt=`>= -(2${it} ** ${(Z+1)*8-1}${it}) and < 2 ** ${(Z+1)*8-1}${it}`,new qt.ERR_OUT_OF_RANGE("value",xt,T)}m(M,W,Z)}function K(T,y){if(typeof T!="number")throw new qt.ERR_INVALID_ARG_TYPE(y,"number",T)}function Y(T,y,w){throw Math.floor(T)!==T?(K(T,w),new qt.ERR_OUT_OF_RANGE("offset","an integer",T)):y<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,T)}const et=/[^+/0-9A-Za-z-_]/g;function Tt(T){if(T=T.split("=")[0],T=T.trim().replace(et,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function At(T,y){y=y||1/0;let w;const M=T.length;let W=null;const Z=[];for(let it=0;it<M;++it){if(w=T.charCodeAt(it),w>55295&&w<57344){if(!W){if(w>56319){(y-=3)>-1&&Z.push(239,191,189);continue}else if(it+1===M){(y-=3)>-1&&Z.push(239,191,189);continue}W=w;continue}if(w<56320){(y-=3)>-1&&Z.push(239,191,189),W=w;continue}w=(W-55296<<10|w-56320)+65536}else W&&(y-=3)>-1&&Z.push(239,191,189);if(W=null,w<128){if((y-=1)<0)break;Z.push(w)}else if(w<2048){if((y-=2)<0)break;Z.push(w>>6|192,w&63|128)}else if(w<65536){if((y-=3)<0)break;Z.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((y-=4)<0)break;Z.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return Z}function It(T){const y=[];for(let w=0;w<T.length;++w)y.push(T.charCodeAt(w)&255);return y}function Yt(T,y){let w,M,W;const Z=[];for(let it=0;it<T.length&&!((y-=2)<0);++it)w=T.charCodeAt(it),M=w>>8,W=w%256,Z.push(W),Z.push(M);return Z}function Et(T){return H.toByteArray(Tt(T))}function te(T,y,w,M){let W;for(W=0;W<M&&!(W+w>=y.length||W>=T.length);++W)y[W+w]=T[W];return W}function ze(T,y){return T instanceof y||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===y.name}function ne(T){return T!==T}const ce=function(){const T="0123456789abcdef",y=new Array(256);for(let w=0;w<16;++w){const M=w*16;for(let W=0;W<16;++W)y[M+W]=T[w]+T[W]}return y}();function Ve(T){return typeof BigInt>"u"?ue:T}function ue(){throw new Error("BigInt not supported")}})(t);const $=t.Buffer;n.Blob=t.Blob,n.BlobOptions=t.BlobOptions,n.Buffer=t.Buffer,n.File=t.File,n.FileOptions=t.FileOptions,n.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,n.SlowBuffer=t.SlowBuffer,n.TranscodeEncoding=t.TranscodeEncoding,n.atob=t.atob,n.btoa=t.btoa,n.constants=t.constants,n.default=$,n.isAscii=t.isAscii,n.isUtf8=t.isUtf8,n.kMaxLength=t.kMaxLength,n.kStringMaxLength=t.kStringMaxLength,n.resolveObjectURL=t.resolveObjectURL,n.transcode=t.transcode}(eo)),eo}var uh=Wn.exports,Us;function Jo(){return Us||(Us=1,function(n){(function(t,e){function r(I,s){if(!I)throw new Error(s||"Assertion failed")}function o(I,s){I.super_=s;var l=function(){};l.prototype=s.prototype,I.prototype=new l,I.prototype.constructor=I}function i(I,s,l){if(i.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((s==="le"||s==="be")&&(l=s,s=10),this._init(I||0,s||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Xo().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,l){return s.cmp(l)>0?s:l},i.min=function(s,l){return s.cmp(l)<0?s:l},i.prototype._init=function(s,l,E){if(typeof s=="number")return this._initNumber(s,l,E);if(typeof s=="object")return this._initArray(s,l,E);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),s=s.toString().replace(/\s+/g,"");var S=0;s[0]==="-"&&(S++,this.negative=1),S<s.length&&(l===16?this._parseHex(s,S,E):(this._parseBase(s,l,S),E==="le"&&this._initArray(this.toArray(),l,E)))},i.prototype._initNumber=function(s,l,E){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),l,E)},i.prototype._initArray=function(s,l,E){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var v,R,g=0;if(E==="be")for(S=s.length-1,v=0;S>=0;S-=3)R=s[S]|s[S-1]<<8|s[S-2]<<16,this.words[v]|=R<<g&67108863,this.words[v+1]=R>>>26-g&67108863,g+=24,g>=26&&(g-=26,v++);else if(E==="le")for(S=0,v=0;S<s.length;S+=3)R=s[S]|s[S+1]<<8|s[S+2]<<16,this.words[v]|=R<<g&67108863,this.words[v+1]=R>>>26-g&67108863,g+=24,g>=26&&(g-=26,v++);return this._strip()};function f(I,s){var l=I.charCodeAt(s);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+I)}function d(I,s,l){var E=f(I,l);return l-1>=s&&(E|=f(I,l-1)<<4),E}i.prototype._parseHex=function(s,l,E){this.length=Math.ceil((s.length-l)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var v=0,R=0,g;if(E==="be")for(S=s.length-1;S>=l;S-=2)g=d(s,l,S)<<v,this.words[R]|=g&67108863,v>=18?(v-=18,R+=1,this.words[R]|=g>>>26):v+=8;else{var h=s.length-l;for(S=h%2===0?l+1:l;S<s.length;S+=2)g=d(s,l,S)<<v,this.words[R]|=g&67108863,v>=18?(v-=18,R+=1,this.words[R]|=g>>>26):v+=8}this._strip()};function A(I,s,l,E){for(var S=0,v=0,R=Math.min(I.length,l),g=s;g<R;g++){var h=I.charCodeAt(g)-48;S*=E,h>=49?v=h-49+10:h>=17?v=h-17+10:v=h,r(h>=0&&v<E,"Invalid character"),S+=v}return S}i.prototype._parseBase=function(s,l,E){this.words=[0],this.length=1;for(var S=0,v=1;v<=67108863;v*=l)S++;S--,v=v/l|0;for(var R=s.length-E,g=R%S,h=Math.min(R,R-g)+E,c=0,u=E;u<h;u+=S)c=A(s,u,u+S,l),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(g!==0){var _=1;for(c=A(s,u,s.length,l),u=0;u<g;u++)_*=l;this.imuln(_),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var l=0;l<this.length;l++)s.words[l]=this.words[l];s.length=this.length,s.negative=this.negative,s.red=this.red};function b(I,s){I.words=s.words,I.length=s.length,I.negative=s.negative,I.red=s.red}if(i.prototype._move=function(s){b(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{i.prototype.inspect=O}else i.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,l){s=s||10,l=l|0||1;var E;if(s===16||s==="hex"){E="";for(var S=0,v=0,R=0;R<this.length;R++){var g=this.words[R],h=((g<<S|v)&16777215).toString(16);v=g>>>24-S&16777215,S+=2,S>=26&&(S-=26,R--),v!==0||R!==this.length-1?E=L[6-h.length]+h+E:E=h+E}for(v!==0&&(E=v.toString(16)+E);E.length%l!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(s===(s|0)&&s>=2&&s<=36){var c=P[s],u=z[s];E="";var _=this.clone();for(_.negative=0;!_.isZero();){var B=_.modrn(u).toString(s);_=_.idivn(u),_.isZero()?E=B+E:E=L[c-B.length]+B+E}for(this.isZero()&&(E="0"+E);E.length%l!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(s,l){return this.toArrayLike(a,s,l)}),i.prototype.toArray=function(s,l){return this.toArrayLike(Array,s,l)};var D=function(s,l){return s.allocUnsafe?s.allocUnsafe(l):new s(l)};i.prototype.toArrayLike=function(s,l,E){this._strip();var S=this.byteLength(),v=E||Math.max(1,S);r(S<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var R=D(s,v),g=l==="le"?"LE":"BE";return this["_toArrayLike"+g](R,S),R},i.prototype._toArrayLikeLE=function(s,l){for(var E=0,S=0,v=0,R=0;v<this.length;v++){var g=this.words[v]<<R|S;s[E++]=g&255,E<s.length&&(s[E++]=g>>8&255),E<s.length&&(s[E++]=g>>16&255),R===6?(E<s.length&&(s[E++]=g>>24&255),S=0,R=0):(S=g>>>24,R+=2)}if(E<s.length)for(s[E++]=S;E<s.length;)s[E++]=0},i.prototype._toArrayLikeBE=function(s,l){for(var E=s.length-1,S=0,v=0,R=0;v<this.length;v++){var g=this.words[v]<<R|S;s[E--]=g&255,E>=0&&(s[E--]=g>>8&255),E>=0&&(s[E--]=g>>16&255),R===6?(E>=0&&(s[E--]=g>>24&255),S=0,R=0):(S=g>>>24,R+=2)}if(E>=0)for(s[E--]=S;E>=0;)s[E--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var l=s,E=0;return l>=4096&&(E+=13,l>>>=13),l>=64&&(E+=7,l>>>=7),l>=8&&(E+=4,l>>>=4),l>=2&&(E+=2,l>>>=2),E+l},i.prototype._zeroBits=function(s){if(s===0)return 26;var l=s,E=0;return(l&8191)===0&&(E+=13,l>>>=13),(l&127)===0&&(E+=7,l>>>=7),(l&15)===0&&(E+=4,l>>>=4),(l&3)===0&&(E+=2,l>>>=2),(l&1)===0&&E++,E},i.prototype.bitLength=function(){var s=this.words[this.length-1],l=this._countBits(s);return(this.length-1)*26+l};function N(I){for(var s=new Array(I.bitLength()),l=0;l<s.length;l++){var E=l/26|0,S=l%26;s[l]=I.words[E]>>>S&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,l=0;l<this.length;l++){var E=this._zeroBits(this.words[l]);if(s+=E,E!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]|s.words[l];return this._strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var l;this.length>s.length?l=s:l=this;for(var E=0;E<l.length;E++)this.words[E]=this.words[E]&s.words[E];return this.length=l.length,this._strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var l,E;this.length>s.length?(l=this,E=s):(l=s,E=this);for(var S=0;S<E.length;S++)this.words[S]=l.words[S]^E.words[S];if(this!==l)for(;S<l.length;S++)this.words[S]=l.words[S];return this.length=l.length,this._strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var l=Math.ceil(s/26)|0,E=s%26;this._expand(l),E>0&&l--;for(var S=0;S<l;S++)this.words[S]=~this.words[S]&67108863;return E>0&&(this.words[S]=~this.words[S]&67108863>>26-E),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,l){r(typeof s=="number"&&s>=0);var E=s/26|0,S=s%26;return this._expand(E+1),l?this.words[E]=this.words[E]|1<<S:this.words[E]=this.words[E]&~(1<<S),this._strip()},i.prototype.iadd=function(s){var l;if(this.negative!==0&&s.negative===0)return this.negative=0,l=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,l=this.isub(s),s.negative=1,l._normSign();var E,S;this.length>s.length?(E=this,S=s):(E=s,S=this);for(var v=0,R=0;R<S.length;R++)l=(E.words[R]|0)+(S.words[R]|0)+v,this.words[R]=l&67108863,v=l>>>26;for(;v!==0&&R<E.length;R++)l=(E.words[R]|0)+v,this.words[R]=l&67108863,v=l>>>26;if(this.length=E.length,v!==0)this.words[this.length]=v,this.length++;else if(E!==this)for(;R<E.length;R++)this.words[R]=E.words[R];return this},i.prototype.add=function(s){var l;return s.negative!==0&&this.negative===0?(s.negative=0,l=this.sub(s),s.negative^=1,l):s.negative===0&&this.negative!==0?(this.negative=0,l=s.sub(this),this.negative=1,l):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var l=this.iadd(s);return s.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var E=this.cmp(s);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,v;E>0?(S=this,v=s):(S=s,v=this);for(var R=0,g=0;g<v.length;g++)l=(S.words[g]|0)-(v.words[g]|0)+R,R=l>>26,this.words[g]=l&67108863;for(;R!==0&&g<S.length;g++)l=(S.words[g]|0)+R,R=l>>26,this.words[g]=l&67108863;if(R===0&&g<S.length&&S!==this)for(;g<S.length;g++)this.words[g]=S.words[g];return this.length=Math.max(this.length,g),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function $(I,s,l){l.negative=s.negative^I.negative;var E=I.length+s.length|0;l.length=E,E=E-1|0;var S=I.words[0]|0,v=s.words[0]|0,R=S*v,g=R&67108863,h=R/67108864|0;l.words[0]=g;for(var c=1;c<E;c++){for(var u=h>>>26,_=h&67108863,B=Math.min(c,s.length-1),F=Math.max(0,c-I.length+1);F<=B;F++){var tt=c-F|0;S=I.words[tt]|0,v=s.words[F]|0,R=S*v+_,u+=R/67108864|0,_=R&67108863}l.words[c]=_|0,h=u|0}return h!==0?l.words[c]=h|0:l.length--,l._strip()}var V=function(s,l,E){var S=s.words,v=l.words,R=E.words,g=0,h,c,u,_=S[0]|0,B=_&8191,F=_>>>13,tt=S[1]|0,ht=tt&8191,gt=tt>>>13,zt=S[2]|0,bt=zt&8191,vt=zt>>>13,le=S[3]|0,Mt=le&8191,Pt=le>>>13,Be=S[4]|0,Ft=Be&8191,Zt=Be>>>13,pr=S[5]|0,Vt=pr&8191,re=pr>>>13,oe=S[6]|0,Nt=oe&8191,$t=oe>>>13,Ie=S[7]|0,jt=Ie&8191,Qt=Ie>>>13,Me=S[8]|0,qt=Me&8191,k=Me>>>13,p=S[9]|0,m=p&8191,C=p>>>13,K=v[0]|0,Y=K&8191,et=K>>>13,Tt=v[1]|0,At=Tt&8191,It=Tt>>>13,Yt=v[2]|0,Et=Yt&8191,te=Yt>>>13,ze=v[3]|0,ne=ze&8191,ce=ze>>>13,Ve=v[4]|0,ue=Ve&8191,T=Ve>>>13,y=v[5]|0,w=y&8191,M=y>>>13,W=v[6]|0,Z=W&8191,it=W>>>13,xt=v[7]|0,kt=xt&8191,St=xt>>>13,ee=v[8]|0,Rt=ee&8191,de=ee>>>13,Es=v[9]|0,pe=Es&8191,ye=Es>>>13;E.negative=s.negative^l.negative,E.length=19,h=Math.imul(B,Y),c=Math.imul(B,et),c=c+Math.imul(F,Y)|0,u=Math.imul(F,et);var Ti=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,h=Math.imul(ht,Y),c=Math.imul(ht,et),c=c+Math.imul(gt,Y)|0,u=Math.imul(gt,et),h=h+Math.imul(B,At)|0,c=c+Math.imul(B,It)|0,c=c+Math.imul(F,At)|0,u=u+Math.imul(F,It)|0;var xi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(xi>>>26)|0,xi&=67108863,h=Math.imul(bt,Y),c=Math.imul(bt,et),c=c+Math.imul(vt,Y)|0,u=Math.imul(vt,et),h=h+Math.imul(ht,At)|0,c=c+Math.imul(ht,It)|0,c=c+Math.imul(gt,At)|0,u=u+Math.imul(gt,It)|0,h=h+Math.imul(B,Et)|0,c=c+Math.imul(B,te)|0,c=c+Math.imul(F,Et)|0,u=u+Math.imul(F,te)|0;var Bi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,h=Math.imul(Mt,Y),c=Math.imul(Mt,et),c=c+Math.imul(Pt,Y)|0,u=Math.imul(Pt,et),h=h+Math.imul(bt,At)|0,c=c+Math.imul(bt,It)|0,c=c+Math.imul(vt,At)|0,u=u+Math.imul(vt,It)|0,h=h+Math.imul(ht,Et)|0,c=c+Math.imul(ht,te)|0,c=c+Math.imul(gt,Et)|0,u=u+Math.imul(gt,te)|0,h=h+Math.imul(B,ne)|0,c=c+Math.imul(B,ce)|0,c=c+Math.imul(F,ne)|0,u=u+Math.imul(F,ce)|0;var Oi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,h=Math.imul(Ft,Y),c=Math.imul(Ft,et),c=c+Math.imul(Zt,Y)|0,u=Math.imul(Zt,et),h=h+Math.imul(Mt,At)|0,c=c+Math.imul(Mt,It)|0,c=c+Math.imul(Pt,At)|0,u=u+Math.imul(Pt,It)|0,h=h+Math.imul(bt,Et)|0,c=c+Math.imul(bt,te)|0,c=c+Math.imul(vt,Et)|0,u=u+Math.imul(vt,te)|0,h=h+Math.imul(ht,ne)|0,c=c+Math.imul(ht,ce)|0,c=c+Math.imul(gt,ne)|0,u=u+Math.imul(gt,ce)|0,h=h+Math.imul(B,ue)|0,c=c+Math.imul(B,T)|0,c=c+Math.imul(F,ue)|0,u=u+Math.imul(F,T)|0;var Ni=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,h=Math.imul(Vt,Y),c=Math.imul(Vt,et),c=c+Math.imul(re,Y)|0,u=Math.imul(re,et),h=h+Math.imul(Ft,At)|0,c=c+Math.imul(Ft,It)|0,c=c+Math.imul(Zt,At)|0,u=u+Math.imul(Zt,It)|0,h=h+Math.imul(Mt,Et)|0,c=c+Math.imul(Mt,te)|0,c=c+Math.imul(Pt,Et)|0,u=u+Math.imul(Pt,te)|0,h=h+Math.imul(bt,ne)|0,c=c+Math.imul(bt,ce)|0,c=c+Math.imul(vt,ne)|0,u=u+Math.imul(vt,ce)|0,h=h+Math.imul(ht,ue)|0,c=c+Math.imul(ht,T)|0,c=c+Math.imul(gt,ue)|0,u=u+Math.imul(gt,T)|0,h=h+Math.imul(B,w)|0,c=c+Math.imul(B,M)|0,c=c+Math.imul(F,w)|0,u=u+Math.imul(F,M)|0;var Ci=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,h=Math.imul(Nt,Y),c=Math.imul(Nt,et),c=c+Math.imul($t,Y)|0,u=Math.imul($t,et),h=h+Math.imul(Vt,At)|0,c=c+Math.imul(Vt,It)|0,c=c+Math.imul(re,At)|0,u=u+Math.imul(re,It)|0,h=h+Math.imul(Ft,Et)|0,c=c+Math.imul(Ft,te)|0,c=c+Math.imul(Zt,Et)|0,u=u+Math.imul(Zt,te)|0,h=h+Math.imul(Mt,ne)|0,c=c+Math.imul(Mt,ce)|0,c=c+Math.imul(Pt,ne)|0,u=u+Math.imul(Pt,ce)|0,h=h+Math.imul(bt,ue)|0,c=c+Math.imul(bt,T)|0,c=c+Math.imul(vt,ue)|0,u=u+Math.imul(vt,T)|0,h=h+Math.imul(ht,w)|0,c=c+Math.imul(ht,M)|0,c=c+Math.imul(gt,w)|0,u=u+Math.imul(gt,M)|0,h=h+Math.imul(B,Z)|0,c=c+Math.imul(B,it)|0,c=c+Math.imul(F,Z)|0,u=u+Math.imul(F,it)|0;var Mi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,h=Math.imul(jt,Y),c=Math.imul(jt,et),c=c+Math.imul(Qt,Y)|0,u=Math.imul(Qt,et),h=h+Math.imul(Nt,At)|0,c=c+Math.imul(Nt,It)|0,c=c+Math.imul($t,At)|0,u=u+Math.imul($t,It)|0,h=h+Math.imul(Vt,Et)|0,c=c+Math.imul(Vt,te)|0,c=c+Math.imul(re,Et)|0,u=u+Math.imul(re,te)|0,h=h+Math.imul(Ft,ne)|0,c=c+Math.imul(Ft,ce)|0,c=c+Math.imul(Zt,ne)|0,u=u+Math.imul(Zt,ce)|0,h=h+Math.imul(Mt,ue)|0,c=c+Math.imul(Mt,T)|0,c=c+Math.imul(Pt,ue)|0,u=u+Math.imul(Pt,T)|0,h=h+Math.imul(bt,w)|0,c=c+Math.imul(bt,M)|0,c=c+Math.imul(vt,w)|0,u=u+Math.imul(vt,M)|0,h=h+Math.imul(ht,Z)|0,c=c+Math.imul(ht,it)|0,c=c+Math.imul(gt,Z)|0,u=u+Math.imul(gt,it)|0,h=h+Math.imul(B,kt)|0,c=c+Math.imul(B,St)|0,c=c+Math.imul(F,kt)|0,u=u+Math.imul(F,St)|0;var Li=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Li>>>26)|0,Li&=67108863,h=Math.imul(qt,Y),c=Math.imul(qt,et),c=c+Math.imul(k,Y)|0,u=Math.imul(k,et),h=h+Math.imul(jt,At)|0,c=c+Math.imul(jt,It)|0,c=c+Math.imul(Qt,At)|0,u=u+Math.imul(Qt,It)|0,h=h+Math.imul(Nt,Et)|0,c=c+Math.imul(Nt,te)|0,c=c+Math.imul($t,Et)|0,u=u+Math.imul($t,te)|0,h=h+Math.imul(Vt,ne)|0,c=c+Math.imul(Vt,ce)|0,c=c+Math.imul(re,ne)|0,u=u+Math.imul(re,ce)|0,h=h+Math.imul(Ft,ue)|0,c=c+Math.imul(Ft,T)|0,c=c+Math.imul(Zt,ue)|0,u=u+Math.imul(Zt,T)|0,h=h+Math.imul(Mt,w)|0,c=c+Math.imul(Mt,M)|0,c=c+Math.imul(Pt,w)|0,u=u+Math.imul(Pt,M)|0,h=h+Math.imul(bt,Z)|0,c=c+Math.imul(bt,it)|0,c=c+Math.imul(vt,Z)|0,u=u+Math.imul(vt,it)|0,h=h+Math.imul(ht,kt)|0,c=c+Math.imul(ht,St)|0,c=c+Math.imul(gt,kt)|0,u=u+Math.imul(gt,St)|0,h=h+Math.imul(B,Rt)|0,c=c+Math.imul(B,de)|0,c=c+Math.imul(F,Rt)|0,u=u+Math.imul(F,de)|0;var Pi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,h=Math.imul(m,Y),c=Math.imul(m,et),c=c+Math.imul(C,Y)|0,u=Math.imul(C,et),h=h+Math.imul(qt,At)|0,c=c+Math.imul(qt,It)|0,c=c+Math.imul(k,At)|0,u=u+Math.imul(k,It)|0,h=h+Math.imul(jt,Et)|0,c=c+Math.imul(jt,te)|0,c=c+Math.imul(Qt,Et)|0,u=u+Math.imul(Qt,te)|0,h=h+Math.imul(Nt,ne)|0,c=c+Math.imul(Nt,ce)|0,c=c+Math.imul($t,ne)|0,u=u+Math.imul($t,ce)|0,h=h+Math.imul(Vt,ue)|0,c=c+Math.imul(Vt,T)|0,c=c+Math.imul(re,ue)|0,u=u+Math.imul(re,T)|0,h=h+Math.imul(Ft,w)|0,c=c+Math.imul(Ft,M)|0,c=c+Math.imul(Zt,w)|0,u=u+Math.imul(Zt,M)|0,h=h+Math.imul(Mt,Z)|0,c=c+Math.imul(Mt,it)|0,c=c+Math.imul(Pt,Z)|0,u=u+Math.imul(Pt,it)|0,h=h+Math.imul(bt,kt)|0,c=c+Math.imul(bt,St)|0,c=c+Math.imul(vt,kt)|0,u=u+Math.imul(vt,St)|0,h=h+Math.imul(ht,Rt)|0,c=c+Math.imul(ht,de)|0,c=c+Math.imul(gt,Rt)|0,u=u+Math.imul(gt,de)|0,h=h+Math.imul(B,pe)|0,c=c+Math.imul(B,ye)|0,c=c+Math.imul(F,pe)|0,u=u+Math.imul(F,ye)|0;var Ui=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,h=Math.imul(m,At),c=Math.imul(m,It),c=c+Math.imul(C,At)|0,u=Math.imul(C,It),h=h+Math.imul(qt,Et)|0,c=c+Math.imul(qt,te)|0,c=c+Math.imul(k,Et)|0,u=u+Math.imul(k,te)|0,h=h+Math.imul(jt,ne)|0,c=c+Math.imul(jt,ce)|0,c=c+Math.imul(Qt,ne)|0,u=u+Math.imul(Qt,ce)|0,h=h+Math.imul(Nt,ue)|0,c=c+Math.imul(Nt,T)|0,c=c+Math.imul($t,ue)|0,u=u+Math.imul($t,T)|0,h=h+Math.imul(Vt,w)|0,c=c+Math.imul(Vt,M)|0,c=c+Math.imul(re,w)|0,u=u+Math.imul(re,M)|0,h=h+Math.imul(Ft,Z)|0,c=c+Math.imul(Ft,it)|0,c=c+Math.imul(Zt,Z)|0,u=u+Math.imul(Zt,it)|0,h=h+Math.imul(Mt,kt)|0,c=c+Math.imul(Mt,St)|0,c=c+Math.imul(Pt,kt)|0,u=u+Math.imul(Pt,St)|0,h=h+Math.imul(bt,Rt)|0,c=c+Math.imul(bt,de)|0,c=c+Math.imul(vt,Rt)|0,u=u+Math.imul(vt,de)|0,h=h+Math.imul(ht,pe)|0,c=c+Math.imul(ht,ye)|0,c=c+Math.imul(gt,pe)|0,u=u+Math.imul(gt,ye)|0;var Di=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Di>>>26)|0,Di&=67108863,h=Math.imul(m,Et),c=Math.imul(m,te),c=c+Math.imul(C,Et)|0,u=Math.imul(C,te),h=h+Math.imul(qt,ne)|0,c=c+Math.imul(qt,ce)|0,c=c+Math.imul(k,ne)|0,u=u+Math.imul(k,ce)|0,h=h+Math.imul(jt,ue)|0,c=c+Math.imul(jt,T)|0,c=c+Math.imul(Qt,ue)|0,u=u+Math.imul(Qt,T)|0,h=h+Math.imul(Nt,w)|0,c=c+Math.imul(Nt,M)|0,c=c+Math.imul($t,w)|0,u=u+Math.imul($t,M)|0,h=h+Math.imul(Vt,Z)|0,c=c+Math.imul(Vt,it)|0,c=c+Math.imul(re,Z)|0,u=u+Math.imul(re,it)|0,h=h+Math.imul(Ft,kt)|0,c=c+Math.imul(Ft,St)|0,c=c+Math.imul(Zt,kt)|0,u=u+Math.imul(Zt,St)|0,h=h+Math.imul(Mt,Rt)|0,c=c+Math.imul(Mt,de)|0,c=c+Math.imul(Pt,Rt)|0,u=u+Math.imul(Pt,de)|0,h=h+Math.imul(bt,pe)|0,c=c+Math.imul(bt,ye)|0,c=c+Math.imul(vt,pe)|0,u=u+Math.imul(vt,ye)|0;var Hi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,h=Math.imul(m,ne),c=Math.imul(m,ce),c=c+Math.imul(C,ne)|0,u=Math.imul(C,ce),h=h+Math.imul(qt,ue)|0,c=c+Math.imul(qt,T)|0,c=c+Math.imul(k,ue)|0,u=u+Math.imul(k,T)|0,h=h+Math.imul(jt,w)|0,c=c+Math.imul(jt,M)|0,c=c+Math.imul(Qt,w)|0,u=u+Math.imul(Qt,M)|0,h=h+Math.imul(Nt,Z)|0,c=c+Math.imul(Nt,it)|0,c=c+Math.imul($t,Z)|0,u=u+Math.imul($t,it)|0,h=h+Math.imul(Vt,kt)|0,c=c+Math.imul(Vt,St)|0,c=c+Math.imul(re,kt)|0,u=u+Math.imul(re,St)|0,h=h+Math.imul(Ft,Rt)|0,c=c+Math.imul(Ft,de)|0,c=c+Math.imul(Zt,Rt)|0,u=u+Math.imul(Zt,de)|0,h=h+Math.imul(Mt,pe)|0,c=c+Math.imul(Mt,ye)|0,c=c+Math.imul(Pt,pe)|0,u=u+Math.imul(Pt,ye)|0;var zi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(zi>>>26)|0,zi&=67108863,h=Math.imul(m,ue),c=Math.imul(m,T),c=c+Math.imul(C,ue)|0,u=Math.imul(C,T),h=h+Math.imul(qt,w)|0,c=c+Math.imul(qt,M)|0,c=c+Math.imul(k,w)|0,u=u+Math.imul(k,M)|0,h=h+Math.imul(jt,Z)|0,c=c+Math.imul(jt,it)|0,c=c+Math.imul(Qt,Z)|0,u=u+Math.imul(Qt,it)|0,h=h+Math.imul(Nt,kt)|0,c=c+Math.imul(Nt,St)|0,c=c+Math.imul($t,kt)|0,u=u+Math.imul($t,St)|0,h=h+Math.imul(Vt,Rt)|0,c=c+Math.imul(Vt,de)|0,c=c+Math.imul(re,Rt)|0,u=u+Math.imul(re,de)|0,h=h+Math.imul(Ft,pe)|0,c=c+Math.imul(Ft,ye)|0,c=c+Math.imul(Zt,pe)|0,u=u+Math.imul(Zt,ye)|0;var Fi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,h=Math.imul(m,w),c=Math.imul(m,M),c=c+Math.imul(C,w)|0,u=Math.imul(C,M),h=h+Math.imul(qt,Z)|0,c=c+Math.imul(qt,it)|0,c=c+Math.imul(k,Z)|0,u=u+Math.imul(k,it)|0,h=h+Math.imul(jt,kt)|0,c=c+Math.imul(jt,St)|0,c=c+Math.imul(Qt,kt)|0,u=u+Math.imul(Qt,St)|0,h=h+Math.imul(Nt,Rt)|0,c=c+Math.imul(Nt,de)|0,c=c+Math.imul($t,Rt)|0,u=u+Math.imul($t,de)|0,h=h+Math.imul(Vt,pe)|0,c=c+Math.imul(Vt,ye)|0,c=c+Math.imul(re,pe)|0,u=u+Math.imul(re,ye)|0;var Ki=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,h=Math.imul(m,Z),c=Math.imul(m,it),c=c+Math.imul(C,Z)|0,u=Math.imul(C,it),h=h+Math.imul(qt,kt)|0,c=c+Math.imul(qt,St)|0,c=c+Math.imul(k,kt)|0,u=u+Math.imul(k,St)|0,h=h+Math.imul(jt,Rt)|0,c=c+Math.imul(jt,de)|0,c=c+Math.imul(Qt,Rt)|0,u=u+Math.imul(Qt,de)|0,h=h+Math.imul(Nt,pe)|0,c=c+Math.imul(Nt,ye)|0,c=c+Math.imul($t,pe)|0,u=u+Math.imul($t,ye)|0;var qi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(qi>>>26)|0,qi&=67108863,h=Math.imul(m,kt),c=Math.imul(m,St),c=c+Math.imul(C,kt)|0,u=Math.imul(C,St),h=h+Math.imul(qt,Rt)|0,c=c+Math.imul(qt,de)|0,c=c+Math.imul(k,Rt)|0,u=u+Math.imul(k,de)|0,h=h+Math.imul(jt,pe)|0,c=c+Math.imul(jt,ye)|0,c=c+Math.imul(Qt,pe)|0,u=u+Math.imul(Qt,ye)|0;var Wi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,h=Math.imul(m,Rt),c=Math.imul(m,de),c=c+Math.imul(C,Rt)|0,u=Math.imul(C,de),h=h+Math.imul(qt,pe)|0,c=c+Math.imul(qt,ye)|0,c=c+Math.imul(k,pe)|0,u=u+Math.imul(k,ye)|0;var Vi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,h=Math.imul(m,pe),c=Math.imul(m,ye),c=c+Math.imul(C,pe)|0,u=Math.imul(C,ye);var $i=(g+h|0)+((c&8191)<<13)|0;return g=(u+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,R[0]=Ti,R[1]=xi,R[2]=Bi,R[3]=Oi,R[4]=Ni,R[5]=Ci,R[6]=Mi,R[7]=Li,R[8]=Pi,R[9]=Ui,R[10]=Di,R[11]=Hi,R[12]=zi,R[13]=Fi,R[14]=Ki,R[15]=qi,R[16]=Wi,R[17]=Vi,R[18]=$i,g!==0&&(R[19]=g,E.length++),E};Math.imul||(V=$);function H(I,s,l){l.negative=s.negative^I.negative,l.length=I.length+s.length;for(var E=0,S=0,v=0;v<l.length-1;v++){var R=S;S=0;for(var g=E&67108863,h=Math.min(v,s.length-1),c=Math.max(0,v-I.length+1);c<=h;c++){var u=v-c,_=I.words[u]|0,B=s.words[c]|0,F=_*B,tt=F&67108863;R=R+(F/67108864|0)|0,tt=tt+g|0,g=tt&67108863,R=R+(tt>>>26)|0,S+=R>>>26,R&=67108863}l.words[v]=g,E=R,R=S}return E!==0?l.words[v]=E:l.length--,l._strip()}function rt(I,s,l){return H(I,s,l)}i.prototype.mulTo=function(s,l){var E,S=this.length+s.length;return this.length===10&&s.length===10?E=V(this,s,l):S<63?E=$(this,s,l):S<1024?E=H(this,s,l):E=rt(this,s,l),E},i.prototype.mul=function(s){var l=new i(null);return l.words=new Array(this.length+s.length),this.mulTo(s,l)},i.prototype.mulf=function(s){var l=new i(null);return l.words=new Array(this.length+s.length),rt(this,s,l)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var l=s<0;l&&(s=-s),r(typeof s=="number"),r(s<67108864);for(var E=0,S=0;S<this.length;S++){var v=(this.words[S]|0)*s,R=(v&67108863)+(E&67108863);E>>=26,E+=v/67108864|0,E+=R>>>26,this.words[S]=R&67108863}return E!==0&&(this.words[S]=E,this.length++),l?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var l=N(s);if(l.length===0)return new i(1);for(var E=this,S=0;S<l.length&&l[S]===0;S++,E=E.sqr());if(++S<l.length)for(var v=E.sqr();S<l.length;S++,v=v.sqr())l[S]!==0&&(E=E.mul(v));return E},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26,S=67108863>>>26-l<<26-l,v;if(l!==0){var R=0;for(v=0;v<this.length;v++){var g=this.words[v]&S,h=(this.words[v]|0)-g<<l;this.words[v]=h|R,R=g>>>26-l}R&&(this.words[v]=R,this.length++)}if(E!==0){for(v=this.length-1;v>=0;v--)this.words[v+E]=this.words[v];for(v=0;v<E;v++)this.words[v]=0;this.length+=E}return this._strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,l,E){r(typeof s=="number"&&s>=0);var S;l?S=(l-l%26)/26:S=0;var v=s%26,R=Math.min((s-v)/26,this.length),g=67108863^67108863>>>v<<v,h=E;if(S-=R,S=Math.max(0,S),h){for(var c=0;c<R;c++)h.words[c]=this.words[c];h.length=R}if(R!==0)if(this.length>R)for(this.length-=R,c=0;c<this.length;c++)this.words[c]=this.words[c+R];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=S);c--){var _=this.words[c]|0;this.words[c]=u<<26-v|_>>>v,u=_&g}return h&&u!==0&&(h.words[h.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,l,E){return r(this.negative===0),this.iushrn(s,l,E)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26,S=1<<l;if(this.length<=E)return!1;var v=this.words[E];return!!(v&S)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(l!==0&&E++,this.length=Math.min(E,this.length),l!==0){var S=67108863^67108863>>>l<<l;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,l,E){var S=s.length+E,v;this._expand(S);var R,g=0;for(v=0;v<s.length;v++){R=(this.words[v+E]|0)+g;var h=(s.words[v]|0)*l;R-=h&67108863,g=(R>>26)-(h/67108864|0),this.words[v+E]=R&67108863}for(;v<this.length-E;v++)R=(this.words[v+E]|0)+g,g=R>>26,this.words[v+E]=R&67108863;if(g===0)return this._strip();for(r(g===-1),g=0,v=0;v<this.length;v++)R=-(this.words[v]|0)+g,g=R>>26,this.words[v]=R&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,l){var E=this.length-s.length,S=this.clone(),v=s,R=v.words[v.length-1]|0,g=this._countBits(R);E=26-g,E!==0&&(v=v.ushln(E),S.iushln(E),R=v.words[v.length-1]|0);var h=S.length-v.length,c;if(l!=="mod"){c=new i(null),c.length=h+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var _=S.clone()._ishlnsubmul(v,1,h);_.negative===0&&(S=_,c&&(c.words[h]=1));for(var B=h-1;B>=0;B--){var F=(S.words[v.length+B]|0)*67108864+(S.words[v.length+B-1]|0);for(F=Math.min(F/R|0,67108863),S._ishlnsubmul(v,F,B);S.negative!==0;)F--,S.negative=0,S._ishlnsubmul(v,1,B),S.isZero()||(S.negative^=1);c&&(c.words[B]=F)}return c&&c._strip(),S._strip(),l!=="div"&&E!==0&&S.iushrn(E),{div:c||null,mod:S}},i.prototype.divmod=function(s,l,E){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,v,R;return this.negative!==0&&s.negative===0?(R=this.neg().divmod(s,l),l!=="mod"&&(S=R.div.neg()),l!=="div"&&(v=R.mod.neg(),E&&v.negative!==0&&v.iadd(s)),{div:S,mod:v}):this.negative===0&&s.negative!==0?(R=this.divmod(s.neg(),l),l!=="mod"&&(S=R.div.neg()),{div:S,mod:R.mod}):(this.negative&s.negative)!==0?(R=this.neg().divmod(s.neg(),l),l!=="div"&&(v=R.mod.neg(),E&&v.negative!==0&&v.isub(s)),{div:R.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?l==="div"?{div:this.divn(s.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,l)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var l=this.divmod(s);if(l.mod.isZero())return l.div;var E=l.div.negative!==0?l.mod.isub(s):l.mod,S=s.ushrn(1),v=s.andln(1),R=E.cmp(S);return R<0||v===1&&R===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(s){var l=s<0;l&&(s=-s),r(s<=67108863);for(var E=(1<<26)%s,S=0,v=this.length-1;v>=0;v--)S=(E*S+(this.words[v]|0))%s;return l?-S:S},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var l=s<0;l&&(s=-s),r(s<=67108863);for(var E=0,S=this.length-1;S>=0;S--){var v=(this.words[S]|0)+E*67108864;this.words[S]=v/s|0,E=v%s}return this._strip(),l?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var l=this,E=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var S=new i(1),v=new i(0),R=new i(0),g=new i(1),h=0;l.isEven()&&E.isEven();)l.iushrn(1),E.iushrn(1),++h;for(var c=E.clone(),u=l.clone();!l.isZero();){for(var _=0,B=1;(l.words[0]&B)===0&&_<26;++_,B<<=1);if(_>0)for(l.iushrn(_);_-- >0;)(S.isOdd()||v.isOdd())&&(S.iadd(c),v.isub(u)),S.iushrn(1),v.iushrn(1);for(var F=0,tt=1;(E.words[0]&tt)===0&&F<26;++F,tt<<=1);if(F>0)for(E.iushrn(F);F-- >0;)(R.isOdd()||g.isOdd())&&(R.iadd(c),g.isub(u)),R.iushrn(1),g.iushrn(1);l.cmp(E)>=0?(l.isub(E),S.isub(R),v.isub(g)):(E.isub(l),R.isub(S),g.isub(v))}return{a:R,b:g,gcd:E.iushln(h)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var l=this,E=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var S=new i(1),v=new i(0),R=E.clone();l.cmpn(1)>0&&E.cmpn(1)>0;){for(var g=0,h=1;(l.words[0]&h)===0&&g<26;++g,h<<=1);if(g>0)for(l.iushrn(g);g-- >0;)S.isOdd()&&S.iadd(R),S.iushrn(1);for(var c=0,u=1;(E.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(E.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(R),v.iushrn(1);l.cmp(E)>=0?(l.isub(E),S.isub(v)):(E.isub(l),v.isub(S))}var _;return l.cmpn(1)===0?_=S:_=v,_.cmpn(0)<0&&_.iadd(s),_},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var l=this.clone(),E=s.clone();l.negative=0,E.negative=0;for(var S=0;l.isEven()&&E.isEven();S++)l.iushrn(1),E.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;E.isEven();)E.iushrn(1);var v=l.cmp(E);if(v<0){var R=l;l=E,E=R}else if(v===0||E.cmpn(1)===0)break;l.isub(E)}while(!0);return E.iushln(S)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var l=s%26,E=(s-l)/26,S=1<<l;if(this.length<=E)return this._expand(E+1),this.words[E]|=S,this;for(var v=S,R=E;v!==0&&R<this.length;R++){var g=this.words[R]|0;g+=v,v=g>>>26,g&=67108863,this.words[R]=g}return v!==0&&(this.words[R]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var l=s<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var E;if(this.length>1)E=1;else{l&&(s=-s),r(s<=67108863,"Number is too big");var S=this.words[0]|0;E=S===s?0:S<s?-1:1}return this.negative!==0?-E|0:E},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var l=this.ucmp(s);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var l=0,E=this.length-1;E>=0;E--){var S=this.words[E]|0,v=s.words[E]|0;if(S!==v){S<v?l=-1:S>v&&(l=1);break}}return l},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new G(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var at={k256:null,p224:null,p192:null,p25519:null};function st(I,s){this.name=I,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}st.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},st.prototype.ireduce=function(s){var l=s,E;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),E=l.bitLength();while(E>this.n);var S=E<this.n?-1:l.ucmp(this.p);return S===0?(l.words[0]=0,l.length=1):S>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},st.prototype.split=function(s,l){s.iushrn(this.n,0,l)},st.prototype.imulK=function(s){return s.imul(this.k)};function ot(){st.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(ot,st),ot.prototype.split=function(s,l){for(var E=4194303,S=Math.min(s.length,9),v=0;v<S;v++)l.words[v]=s.words[v];if(l.length=S,s.length<=9){s.words[0]=0,s.length=1;return}var R=s.words[9];for(l.words[l.length++]=R&E,v=10;v<s.length;v++){var g=s.words[v]|0;s.words[v-10]=(g&E)<<4|R>>>22,R=g}R>>>=22,s.words[v-10]=R,R===0&&s.length>10?s.length-=10:s.length-=9},ot.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var l=0,E=0;E<s.length;E++){var S=s.words[E]|0;l+=S*977,s.words[E]=l&67108863,l=S*64+(l/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function nt(){st.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(nt,st);function j(){st.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(j,st);function q(){st.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(q,st),q.prototype.imulK=function(s){for(var l=0,E=0;E<s.length;E++){var S=(s.words[E]|0)*19+l,v=S&67108863;S>>>=26,s.words[E]=v,l=S}return l!==0&&(s.words[s.length++]=l),s},i._prime=function(s){if(at[s])return at[s];var l;if(s==="k256")l=new ot;else if(s==="p224")l=new nt;else if(s==="p192")l=new j;else if(s==="p25519")l=new q;else throw new Error("Unknown prime "+s);return at[s]=l,l};function G(I){if(typeof I=="string"){var s=i._prime(I);this.m=s.p,this.prime=s}else r(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}G.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},G.prototype._verify2=function(s,l){r((s.negative|l.negative)===0,"red works only with positives"),r(s.red&&s.red===l.red,"red works only with red numbers")},G.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(b(s,s.umod(this.m)._forceRed(this)),s)},G.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},G.prototype.add=function(s,l){this._verify2(s,l);var E=s.add(l);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},G.prototype.iadd=function(s,l){this._verify2(s,l);var E=s.iadd(l);return E.cmp(this.m)>=0&&E.isub(this.m),E},G.prototype.sub=function(s,l){this._verify2(s,l);var E=s.sub(l);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},G.prototype.isub=function(s,l){this._verify2(s,l);var E=s.isub(l);return E.cmpn(0)<0&&E.iadd(this.m),E},G.prototype.shl=function(s,l){return this._verify1(s),this.imod(s.ushln(l))},G.prototype.imul=function(s,l){return this._verify2(s,l),this.imod(s.imul(l))},G.prototype.mul=function(s,l){return this._verify2(s,l),this.imod(s.mul(l))},G.prototype.isqr=function(s){return this.imul(s,s.clone())},G.prototype.sqr=function(s){return this.mul(s,s)},G.prototype.sqrt=function(s){if(s.isZero())return s.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var E=this.m.add(new i(1)).iushrn(2);return this.pow(s,E)}for(var S=this.m.subn(1),v=0;!S.isZero()&&S.andln(1)===0;)v++,S.iushrn(1);r(!S.isZero());var R=new i(1).toRed(this),g=R.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,h).cmp(g)!==0;)c.redIAdd(g);for(var u=this.pow(c,S),_=this.pow(s,S.addn(1).iushrn(1)),B=this.pow(s,S),F=v;B.cmp(R)!==0;){for(var tt=B,ht=0;tt.cmp(R)!==0;ht++)tt=tt.redSqr();r(ht<F);var gt=this.pow(u,new i(1).iushln(F-ht-1));_=_.redMul(gt),u=gt.redSqr(),B=B.redMul(u),F=ht}return _},G.prototype.invm=function(s){var l=s._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},G.prototype.pow=function(s,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return s.clone();var E=4,S=new Array(1<<E);S[0]=new i(1).toRed(this),S[1]=s;for(var v=2;v<S.length;v++)S[v]=this.mul(S[v-1],s);var R=S[0],g=0,h=0,c=l.bitLength()%26;for(c===0&&(c=26),v=l.length-1;v>=0;v--){for(var u=l.words[v],_=c-1;_>=0;_--){var B=u>>_&1;if(R!==S[0]&&(R=this.sqr(R)),B===0&&g===0){h=0;continue}g<<=1,g|=B,h++,!(h!==E&&(v!==0||_!==0))&&(R=this.mul(R,S[g]),h=0,g=0)}c=26}return R},G.prototype.convertTo=function(s){var l=s.umod(this.m);return l===s?l.clone():l},G.prototype.convertFrom=function(s){var l=s.clone();return l.red=null,l},i.mont=function(s){return new x(s)};function x(I){G.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(x,G),x.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},x.prototype.convertFrom=function(s){var l=this.imod(s.mul(this.rinv));return l.red=null,l},x.prototype.imul=function(s,l){if(s.isZero()||l.isZero())return s.words[0]=0,s.length=1,s;var E=s.imul(l),S=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=E.isub(S).iushrn(this.shift),R=v;return v.cmp(this.m)>=0?R=v.isub(this.m):v.cmpn(0)<0&&(R=v.iadd(this.m)),R._forceRed(this)},x.prototype.mul=function(s,l){if(s.isZero()||l.isZero())return new i(0)._forceRed(this);var E=s.mul(l),S=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=E.isub(S).iushrn(this.shift),R=v;return v.cmp(this.m)>=0?R=v.isub(this.m):v.cmpn(0)<0&&(R=v.iadd(this.m)),R._forceRed(this)},x.prototype.invm=function(s){var l=this.imod(s._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,uh)}(Wn)),Wn.exports}var hh=Jo();const wn=fi(hh);var Dn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ds;function lh(){return Ds||(Ds=1,function(n,t){var e=Xo(),r=e.Buffer;function o(a,f){for(var d in a)f[d]=a[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(o(e,t),t.Buffer=i);function i(a,f,d){return r(a,f,d)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(a,f,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,f,d)},i.alloc=function(a,f,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var A=r(a);return f!==void 0?typeof d=="string"?A.fill(f,d):A.fill(f):A.fill(0),A},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}}(Dn,Dn.exports)),Dn.exports}var ro,Hs;function fh(){if(Hs)return ro;Hs=1;var n=lh().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),f=a.charCodeAt(0);if(r[f]!==255)throw new TypeError(a+" is ambiguous");r[f]=i}var d=e.length,A=e.charAt(0),b=Math.log(d)/Math.log(256),O=Math.log(256)/Math.log(d);function L(D){if((Array.isArray(D)||D instanceof Uint8Array)&&(D=n.from(D)),!n.isBuffer(D))throw new TypeError("Expected Buffer");if(D.length===0)return"";for(var N=0,$=0,V=0,H=D.length;V!==H&&D[V]===0;)V++,N++;for(var rt=(H-V)*O+1>>>0,at=new Uint8Array(rt);V!==H;){for(var st=D[V],ot=0,nt=rt-1;(st!==0||ot<$)&&nt!==-1;nt--,ot++)st+=256*at[nt]>>>0,at[nt]=st%d>>>0,st=st/d>>>0;if(st!==0)throw new Error("Non-zero carry");$=ot,V++}for(var j=rt-$;j!==rt&&at[j]===0;)j++;for(var q=A.repeat(N);j<rt;++j)q+=e.charAt(at[j]);return q}function P(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return n.alloc(0);for(var N=0,$=0,V=0;D[N]===A;)$++,N++;for(var H=(D.length-N)*b+1>>>0,rt=new Uint8Array(H);N<D.length;){var at=D.charCodeAt(N);if(at>255)return;var st=r[at];if(st===255)return;for(var ot=0,nt=H-1;(st!==0||ot<V)&&nt!==-1;nt--,ot++)st+=d*rt[nt]>>>0,rt[nt]=st%256>>>0,st=st/256>>>0;if(st!==0)throw new Error("Non-zero carry");V=ot,N++}for(var j=H-V;j!==H&&rt[j]===0;)j++;var q=n.allocUnsafe($+(H-j));q.fill(0,0,$);for(var G=$;j!==H;)q[G++]=rt[j++];return q}function z(D){var N=P(D);if(N)return N;throw new Error("Non-base"+d+" character")}return{encode:L,decodeUnsafe:P,decode:z}}return ro=t,ro}var no,zs;function ja(){if(zs)return no;zs=1;var n=fh(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return no=n(t),no}var dh=ja();const Ae=fi(dh),Fs=Da;var Wt={};function ur(n,t,e){return t<=n&&n<=e}function di(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ph(n){for(var t=String(n),e=t.length,r=0,o=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)o.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var f=i&1023,d=a&1023;o.push(65536+(f<<10)+d),r+=1}else o.push(65533)}r+=1}return o}function yh(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Jn=-1;function Qo(n){this.tokens=[].slice.call(n)}Qo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Jn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var tn=-1;function io(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Qn="utf-8";function ti(n,t){if(!(this instanceof ti))return new ti(n,t);if(n=n!==void 0?String(n).toLowerCase():Qn,n!==Qn)throw new Error("Encoding not supported. Only utf-8 is supported");t=di(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ti.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=di(e),this._streaming||(this._decoder=new gh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new Qo(r),i=[],a;!o.endOfStream()&&(a=this._decoder.handler(o,o.read()),a!==tn);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(o,o.read()),a===tn)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),yh(i)}};function ei(n,t){if(!(this instanceof ei))return new ei(n,t);if(n=n!==void 0?String(n).toLowerCase():Qn,n!==Qn)throw new Error("Encoding not supported. Only utf-8 is supported");t=di(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ei.prototype={encode:function(t,e){t=t?String(t):"",e=di(e),this._streaming||(this._encoder=new mh(this._options)),this._streaming=!!e.stream;for(var r=[],o=new Qo(ph(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==tn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==tn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function gh(n){var t=n.fatal,e=0,r=0,o=0,i=128,a=191;this.handler=function(f,d){if(d===Jn&&o!==0)return o=0,io(t);if(d===Jn)return tn;if(o===0){if(ur(d,0,127))return d;if(ur(d,194,223))o=1,e=d-192;else if(ur(d,224,239))d===224&&(i=160),d===237&&(a=159),o=2,e=d-224;else if(ur(d,240,244))d===240&&(i=144),d===244&&(a=143),o=3,e=d-240;else return io(t);return e=e<<6*o,null}if(!ur(d,i,a))return e=o=r=0,i=128,a=191,f.prepend(d),io(t);if(i=128,a=191,r+=1,e+=d-128<<6*(o-r),r!==o)return null;var A=e;return e=o=r=0,A}}function mh(n){n.fatal,this.handler=function(t,e){if(e===Jn)return tn;if(ur(e,0,127))return e;var r,o;ur(e,128,2047)?(r=1,o=192):ur(e,2048,65535)?(r=2,o=224):ur(e,65536,1114111)&&(r=3,o=240);for(var i=[(e>>6*r)+o];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}const wh=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ti,TextEncoder:ei},Symbol.toStringTag,{value:"Module"})),bh=Zo(wh);var Ks;function Eh(){if(Ks)return Wt;Ks=1;var n=Wt&&Wt.__createBinding||(Object.create?function(j,q,G,x){x===void 0&&(x=G),Object.defineProperty(j,x,{enumerable:!0,get:function(){return q[G]}})}:function(j,q,G,x){x===void 0&&(x=G),j[x]=q[G]}),t=Wt&&Wt.__setModuleDefault||(Object.create?function(j,q){Object.defineProperty(j,"default",{enumerable:!0,value:q})}:function(j,q){j.default=q}),e=Wt&&Wt.__decorate||function(j,q,G,x){var I=arguments.length,s=I<3?q:x===null?x=Object.getOwnPropertyDescriptor(q,G):x,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(j,q,G,x);else for(var E=j.length-1;E>=0;E--)(l=j[E])&&(s=(I<3?l(s):I>3?l(q,G,s):l(q,G))||s);return I>3&&s&&Object.defineProperty(q,G,s),s},r=Wt&&Wt.__importStar||function(j){if(j&&j.__esModule)return j;var q={};if(j!=null)for(var G in j)G!=="default"&&Object.hasOwnProperty.call(j,G)&&n(q,j,G);return t(q,j),q},o=Wt&&Wt.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.deserializeUnchecked=Wt.deserialize=Wt.serialize=Wt.BinaryReader=Wt.BinaryWriter=Wt.BorshError=Wt.baseDecode=Wt.baseEncode=void 0;const i=o(Jo()),a=o(ja()),f=r(bh),d=typeof TextDecoder!="function"?f.TextDecoder:TextDecoder,A=new d("utf-8",{fatal:!0});function b(j){return typeof j=="string"&&(j=Ut.from(j,"utf8")),a.default.encode(Ut.from(j))}Wt.baseEncode=b;function O(j){return Ut.from(a.default.decode(j))}Wt.baseDecode=O;const L=1024;class P extends Error{constructor(q){super(q),this.fieldPath=[],this.originalMessage=q}addToFieldPath(q){this.fieldPath.splice(0,0,q),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Wt.BorshError=P;class z{constructor(){this.buf=Ut.alloc(L),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Ut.concat([this.buf,Ut.alloc(L)]))}writeU8(q){this.maybeResize(),this.buf.writeUInt8(q,this.length),this.length+=1}writeU16(q){this.maybeResize(),this.buf.writeUInt16LE(q,this.length),this.length+=2}writeU32(q){this.maybeResize(),this.buf.writeUInt32LE(q,this.length),this.length+=4}writeU64(q){this.maybeResize(),this.writeBuffer(Ut.from(new i.default(q).toArray("le",8)))}writeU128(q){this.maybeResize(),this.writeBuffer(Ut.from(new i.default(q).toArray("le",16)))}writeU256(q){this.maybeResize(),this.writeBuffer(Ut.from(new i.default(q).toArray("le",32)))}writeU512(q){this.maybeResize(),this.writeBuffer(Ut.from(new i.default(q).toArray("le",64)))}writeBuffer(q){this.buf=Ut.concat([Ut.from(this.buf.subarray(0,this.length)),q,Ut.alloc(L)]),this.length+=q.length}writeString(q){this.maybeResize();const G=Ut.from(q,"utf8");this.writeU32(G.length),this.writeBuffer(G)}writeFixedArray(q){this.writeBuffer(Ut.from(q))}writeArray(q,G){this.maybeResize(),this.writeU32(q.length);for(const x of q)this.maybeResize(),G(x)}toArray(){return this.buf.subarray(0,this.length)}}Wt.BinaryWriter=z;function D(j,q,G){const x=G.value;G.value=function(...I){try{return x.apply(this,I)}catch(s){if(s instanceof RangeError){const l=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new P("Reached the end of buffer when deserializing")}throw s}}}class N{constructor(q){this.buf=q,this.offset=0}readU8(){const q=this.buf.readUInt8(this.offset);return this.offset+=1,q}readU16(){const q=this.buf.readUInt16LE(this.offset);return this.offset+=2,q}readU32(){const q=this.buf.readUInt32LE(this.offset);return this.offset+=4,q}readU64(){const q=this.readBuffer(8);return new i.default(q,"le")}readU128(){const q=this.readBuffer(16);return new i.default(q,"le")}readU256(){const q=this.readBuffer(32);return new i.default(q,"le")}readU512(){const q=this.readBuffer(64);return new i.default(q,"le")}readBuffer(q){if(this.offset+q>this.buf.length)throw new P(`Expected buffer length ${q} isn't within bounds`);const G=this.buf.slice(this.offset,this.offset+q);return this.offset+=q,G}readString(){const q=this.readU32(),G=this.readBuffer(q);try{return A.decode(G)}catch(x){throw new P(`Error decoding UTF-8 string: ${x}`)}}readFixedArray(q){return new Uint8Array(this.readBuffer(q))}readArray(q){const G=this.readU32(),x=Array();for(let I=0;I<G;++I)x.push(q());return x}}e([D],N.prototype,"readU8",null),e([D],N.prototype,"readU16",null),e([D],N.prototype,"readU32",null),e([D],N.prototype,"readU64",null),e([D],N.prototype,"readU128",null),e([D],N.prototype,"readU256",null),e([D],N.prototype,"readU512",null),e([D],N.prototype,"readString",null),e([D],N.prototype,"readFixedArray",null),e([D],N.prototype,"readArray",null),Wt.BinaryReader=N;function $(j){return j.charAt(0).toUpperCase()+j.slice(1)}function V(j,q,G,x,I){try{if(typeof x=="string")I[`write${$(x)}`](G);else if(x instanceof Array)if(typeof x[0]=="number"){if(G.length!==x[0])throw new P(`Expecting byte array of length ${x[0]}, but got ${G.length} bytes`);I.writeFixedArray(G)}else if(x.length===2&&typeof x[1]=="number"){if(G.length!==x[1])throw new P(`Expecting byte array of length ${x[1]}, but got ${G.length} bytes`);for(let s=0;s<x[1];s++)V(j,null,G[s],x[0],I)}else I.writeArray(G,s=>{V(j,q,s,x[0],I)});else if(x.kind!==void 0)switch(x.kind){case"option":{G==null?I.writeU8(0):(I.writeU8(1),V(j,q,G,x.type,I));break}case"map":{I.writeU32(G.size),G.forEach((s,l)=>{V(j,q,l,x.key,I),V(j,q,s,x.value,I)});break}default:throw new P(`FieldType ${x} unrecognized`)}else H(j,G,I)}catch(s){throw s instanceof P&&s.addToFieldPath(q),s}}function H(j,q,G){if(typeof q.borshSerialize=="function"){q.borshSerialize(G);return}const x=j.get(q.constructor);if(!x)throw new P(`Class ${q.constructor.name} is missing in schema`);if(x.kind==="struct")x.fields.map(([I,s])=>{V(j,I,q[I],s,G)});else if(x.kind==="enum"){const I=q[x.field];for(let s=0;s<x.values.length;++s){const[l,E]=x.values[s];if(l===I){G.writeU8(s),V(j,l,q[l],E,G);break}}}else throw new P(`Unexpected schema kind: ${x.kind} for ${q.constructor.name}`)}function rt(j,q,G=z){const x=new G;return H(j,q,x),x.toArray()}Wt.serialize=rt;function at(j,q,G,x){try{if(typeof G=="string")return x[`read${$(G)}`]();if(G instanceof Array){if(typeof G[0]=="number")return x.readFixedArray(G[0]);if(typeof G[1]=="number"){const I=[];for(let s=0;s<G[1];s++)I.push(at(j,null,G[0],x));return I}else return x.readArray(()=>at(j,q,G[0],x))}if(G.kind==="option")return x.readU8()?at(j,q,G.type,x):void 0;if(G.kind==="map"){let I=new Map;const s=x.readU32();for(let l=0;l<s;l++){const E=at(j,q,G.key,x),S=at(j,q,G.value,x);I.set(E,S)}return I}return st(j,G,x)}catch(I){throw I instanceof P&&I.addToFieldPath(q),I}}function st(j,q,G){if(typeof q.borshDeserialize=="function")return q.borshDeserialize(G);const x=j.get(q);if(!x)throw new P(`Class ${q.name} is missing in schema`);if(x.kind==="struct"){const I={};for(const[s,l]of j.get(q).fields)I[s]=at(j,s,l,G);return new q(I)}if(x.kind==="enum"){const I=G.readU8();if(I>=x.values.length)throw new P(`Enum index: ${I} is out of range`);const[s,l]=x.values[I],E=at(j,s,l,G);return new q({[s]:E})}throw new P(`Unexpected schema kind: ${x.kind} for ${q.constructor.name}`)}function ot(j,q,G,x=N){const I=new x(G),s=st(j,q,I);if(I.offset<G.length)throw new P(`Unexpected ${G.length-I.offset} bytes after deserialized data`);return s}Wt.deserialize=ot;function nt(j,q,G,x=N){const I=new x(G);return st(j,q,I)}return Wt.deserializeUnchecked=nt,Wt}var oo=Eh(),Q={},qs;function _h(){if(qs)return Q;qs=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0,Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;const n=Xo();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}Q.uint8ArrayToBuffer=e;class r{constructor(u,_){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=_}makeDestinationObject(){return{}}getSpan(u,_){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const _=Object.create(this.constructor.prototype);return Object.assign(_,this),_.property=u,_}fromArray(u){}}Q.Layout=r;function o(c,u){return u.property?c+"["+u.property+"]":c}Q.nameWithProperty=o;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(_,B){return u.encode(this,_,B)},writable:!0}),Object.defineProperty(c,"decode",{value(_,B){return u.decode(_,B)},writable:!0})}Q.bindConstructorLayout=i;class a extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Q.ExternalLayout=a;class f extends a{constructor(u=1,_){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,_),this.elementSpan=u}isCount(){return!0}decode(u,_=0){t(u);const B=u.length-_;return Math.floor(B/this.elementSpan)}encode(u,_,B){return 0}}Q.GreedyCount=f;class d extends a{constructor(u,_=0,B){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(_))throw new TypeError("offset must be integer or undefined");super(u.span,B||u.property),this.layout=u,this.offset=_}isCount(){return this.layout instanceof A||this.layout instanceof b}decode(u,_=0){return this.layout.decode(u,_+this.offset)}encode(u,_,B=0){return this.layout.encode(u,_,B+this.offset)}}Q.OffsetLayout=d;class A extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readUIntLE(_,this.span)}encode(u,_,B=0){return e(_).writeUIntLE(u,B,this.span),this.span}}Q.UInt=A;class b extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readUIntBE(_,this.span)}encode(u,_,B=0){return e(_).writeUIntBE(u,B,this.span),this.span}}Q.UIntBE=b;class O extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readIntLE(_,this.span)}encode(u,_,B=0){return e(_).writeIntLE(u,B,this.span),this.span}}Q.Int=O;class L extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readIntBE(_,this.span)}encode(u,_,B=0){return e(_).writeIntBE(u,B,this.span),this.span}}Q.IntBE=L;const P=Math.pow(2,32);function z(c){const u=Math.floor(c/P),_=c-u*P;return{hi32:u,lo32:_}}function D(c,u){return c*P+u}class N extends r{constructor(u){super(8,u)}decode(u,_=0){const B=e(u),F=B.readUInt32LE(_),tt=B.readUInt32LE(_+4);return D(tt,F)}encode(u,_,B=0){const F=z(u),tt=e(_);return tt.writeUInt32LE(F.lo32,B),tt.writeUInt32LE(F.hi32,B+4),8}}Q.NearUInt64=N;class $ extends r{constructor(u){super(8,u)}decode(u,_=0){const B=e(u),F=B.readUInt32BE(_),tt=B.readUInt32BE(_+4);return D(F,tt)}encode(u,_,B=0){const F=z(u),tt=e(_);return tt.writeUInt32BE(F.hi32,B),tt.writeUInt32BE(F.lo32,B+4),8}}Q.NearUInt64BE=$;class V extends r{constructor(u){super(8,u)}decode(u,_=0){const B=e(u),F=B.readUInt32LE(_),tt=B.readInt32LE(_+4);return D(tt,F)}encode(u,_,B=0){const F=z(u),tt=e(_);return tt.writeUInt32LE(F.lo32,B),tt.writeInt32LE(F.hi32,B+4),8}}Q.NearInt64=V;class H extends r{constructor(u){super(8,u)}decode(u,_=0){const B=e(u),F=B.readInt32BE(_),tt=B.readUInt32BE(_+4);return D(F,tt)}encode(u,_,B=0){const F=z(u),tt=e(_);return tt.writeInt32BE(F.hi32,B),tt.writeUInt32BE(F.lo32,B+4),8}}Q.NearInt64BE=H;class rt extends r{constructor(u){super(4,u)}decode(u,_=0){return e(u).readFloatLE(_)}encode(u,_,B=0){return e(_).writeFloatLE(u,B),4}}Q.Float=rt;class at extends r{constructor(u){super(4,u)}decode(u,_=0){return e(u).readFloatBE(_)}encode(u,_,B=0){return e(_).writeFloatBE(u,B),4}}Q.FloatBE=at;class st extends r{constructor(u){super(8,u)}decode(u,_=0){return e(u).readDoubleLE(_)}encode(u,_,B=0){return e(_).writeDoubleLE(u,B),8}}Q.Double=st;class ot extends r{constructor(u){super(8,u)}decode(u,_=0){return e(u).readDoubleBE(_)}encode(u,_,B=0){return e(_).writeDoubleBE(u,B),8}}Q.DoubleBE=ot;class nt extends r{constructor(u,_,B){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(_ instanceof a&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let F=-1;!(_ instanceof a)&&0<u.span&&(F=_*u.span),super(F,B),this.elementLayout=u,this.count=_}getSpan(u,_=0){if(0<=this.span)return this.span;let B=0,F=this.count;if(F instanceof a&&(F=F.decode(u,_)),0<this.elementLayout.span)B=F*this.elementLayout.span;else{let tt=0;for(;tt<F;)B+=this.elementLayout.getSpan(u,_+B),++tt}return B}decode(u,_=0){const B=[];let F=0,tt=this.count;for(tt instanceof a&&(tt=tt.decode(u,_));F<tt;)B.push(this.elementLayout.decode(u,_)),_+=this.elementLayout.getSpan(u,_),F+=1;return B}encode(u,_,B=0){const F=this.elementLayout,tt=u.reduce((ht,gt)=>ht+F.encode(gt,_,B+ht),0);return this.count instanceof a&&this.count.encode(u.length,_,B),tt}}Q.Sequence=nt;class j extends r{constructor(u,_,B){if(!(Array.isArray(u)&&u.reduce((tt,ht)=>tt&&ht instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof _=="boolean"&&B===void 0&&(B=_,_=void 0);for(const tt of u)if(0>tt.span&&tt.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let F=-1;try{F=u.reduce((tt,ht)=>tt+ht.getSpan(),0)}catch{}super(F,_),this.fields=u,this.decodePrefixes=!!B}getSpan(u,_=0){if(0<=this.span)return this.span;let B=0;try{B=this.fields.reduce((F,tt)=>{const ht=tt.getSpan(u,_);return _+=ht,F+ht},0)}catch{throw new RangeError("indeterminate span")}return B}decode(u,_=0){t(u);const B=this.makeDestinationObject();for(const F of this.fields)if(F.property!==void 0&&(B[F.property]=F.decode(u,_)),_+=F.getSpan(u,_),this.decodePrefixes&&u.length===_)break;return B}encode(u,_,B=0){const F=B;let tt=0,ht=0;for(const gt of this.fields){let zt=gt.span;if(ht=0<zt?zt:0,gt.property!==void 0){const bt=u[gt.property];bt!==void 0&&(ht=gt.encode(bt,_,B),0>zt&&(zt=gt.getSpan(_,B)))}tt=B,B+=zt}return tt+ht-F}fromArray(u){const _=this.makeDestinationObject();for(const B of this.fields)B.property!==void 0&&0<u.length&&(_[B.property]=u.shift());return _}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===u)return _}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let _=0;for(const B of this.fields){if(B.property===u)return _;0>B.span?_=-1:0<=_&&(_+=B.span)}}}Q.Structure=j;class q{constructor(u){this.property=u}decode(u,_){throw new Error("UnionDiscriminator is abstract")}encode(u,_,B){throw new Error("UnionDiscriminator is abstract")}}Q.UnionDiscriminator=q;class G extends q{constructor(u,_){if(!(u instanceof a&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(_||u.property||"variant"),this.layout=u}decode(u,_){return this.layout.decode(u,_)}encode(u,_,B){return this.layout.encode(u,_,B)}}Q.UnionLayoutDiscriminator=G;class x extends r{constructor(u,_,B){let F;if(u instanceof A||u instanceof b)F=new G(new d(u));else if(u instanceof a&&u.isCount())F=new G(u);else if(u instanceof q)F=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(_===void 0&&(_=null),!(_===null||_ instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(_!==null){if(0>_.span)throw new Error("defaultLayout must have constant span");_.property===void 0&&(_=_.replicate("content"))}let tt=-1;_&&(tt=_.span,0<=tt&&(u instanceof A||u instanceof b)&&(tt+=F.layout.span)),super(tt,B),this.discriminator=F,this.usesPrefixDiscriminator=u instanceof A||u instanceof b,this.defaultLayout=_,this.registry={};let ht=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(gt){return ht(gt)},this.configGetSourceVariant=function(gt){ht=gt.bind(this)}}getSpan(u,_=0){if(0<=this.span)return this.span;const B=this.getVariant(u,_);if(!B)throw new Error("unable to determine span for unrecognized variant");return B.getSpan(u,_)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const _=this.registry[u[this.discriminator.property]];if(_&&(!_.layout||_.property&&Object.prototype.hasOwnProperty.call(u,_.property)))return _}else for(const _ in this.registry){const B=this.registry[_];if(B.property&&Object.prototype.hasOwnProperty.call(u,B.property))return B}throw new Error("unable to infer src variant")}decode(u,_=0){let B;const F=this.discriminator,tt=F.decode(u,_),ht=this.registry[tt];if(ht===void 0){const gt=this.defaultLayout;let zt=0;this.usesPrefixDiscriminator&&(zt=F.layout.span),B=this.makeDestinationObject(),B[F.property]=tt,B[gt.property]=gt.decode(u,_+zt)}else B=ht.decode(u,_);return B}encode(u,_,B=0){const F=this.getSourceVariant(u);if(F===void 0){const tt=this.discriminator,ht=this.defaultLayout;let gt=0;return this.usesPrefixDiscriminator&&(gt=tt.layout.span),tt.encode(u[tt.property],_,B),gt+ht.encode(u[ht.property],_,B+gt)}return F.encode(u,_,B)}addVariant(u,_,B){const F=new I(this,u,_,B);return this.registry[u]=F,F}getVariant(u,_=0){let B;return u instanceof Uint8Array?B=this.discriminator.decode(u,_):B=u,this.registry[B]}}Q.Union=x;class I extends r{constructor(u,_,B,F){if(!(u instanceof x))throw new TypeError("union must be a Union");if(!Number.isInteger(_)||0>_)throw new TypeError("variant must be a (non-negative) integer");if(typeof B=="string"&&F===void 0&&(F=B,B=null),B){if(!(B instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=B.span&&B.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof F!="string")throw new TypeError("variant must have a String property")}let tt=u.span;0>u.span&&(tt=B?B.span:0,0<=tt&&u.usesPrefixDiscriminator&&(tt+=u.discriminator.layout.span)),super(tt,F),this.union=u,this.variant=_,this.layout=B||null}getSpan(u,_=0){if(0<=this.span)return this.span;let B=0;this.union.usesPrefixDiscriminator&&(B=this.union.discriminator.layout.span);let F=0;return this.layout&&(F=this.layout.getSpan(u,_+B)),B+F}decode(u,_=0){const B=this.makeDestinationObject();if(this!==this.union.getVariant(u,_))throw new Error("variant mismatch");let F=0;return this.union.usesPrefixDiscriminator&&(F=this.union.discriminator.layout.span),this.layout?B[this.property]=this.layout.decode(u,_+F):this.property?B[this.property]=!0:this.union.usesPrefixDiscriminator&&(B[this.union.discriminator.property]=this.variant),B}encode(u,_,B=0){let F=0;if(this.union.usesPrefixDiscriminator&&(F=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,_,B);let tt=F;if(this.layout&&(this.layout.encode(u[this.property],_,B+F),tt+=this.layout.getSpan(_,B+F),0<=this.union.span&&tt>this.union.span))throw new Error("encoded variant overruns containing union");return tt}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}Q.VariantLayout=I;function s(c){return 0>c&&(c+=4294967296),c}class l extends r{constructor(u,_,B){if(!(u instanceof A||u instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof _=="string"&&B===void 0&&(B=_,_=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,B),this.word=u,this.msb=!!_,this.fields=[];let F=0;this._packedSetValue=function(tt){return F=s(tt),this},this._packedGetValue=function(){return F}}decode(u,_=0){const B=this.makeDestinationObject(),F=this.word.decode(u,_);this._packedSetValue(F);for(const tt of this.fields)tt.property!==void 0&&(B[tt.property]=tt.decode(u));return B}encode(u,_,B=0){const F=this.word.decode(_,B);this._packedSetValue(F);for(const tt of this.fields)if(tt.property!==void 0){const ht=u[tt.property];ht!==void 0&&tt.encode(ht)}return this.word.encode(this._packedGetValue(),_,B)}addField(u,_){const B=new E(this,u,_);return this.fields.push(B),B}addBoolean(u){const _=new S(this,u);return this.fields.push(_),_}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===u)return _}}Q.BitStructure=l;class E{constructor(u,_,B){if(!(u instanceof l))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(_)||0>=_)throw new TypeError("bits must be positive integer");const F=8*u.span,tt=u.fields.reduce((ht,gt)=>ht+gt.bits,0);if(_+tt>F)throw new Error("bits too long for span remainder ("+(F-tt)+" of "+F+" remain)");this.container=u,this.bits=_,this.valueMask=(1<<_)-1,_===32&&(this.valueMask=4294967295),this.start=tt,this.container.msb&&(this.start=F-tt-_),this.wordMask=s(this.valueMask<<this.start),this.property=B}decode(u,_){const B=this.container._packedGetValue();return s(B&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==s(u&this.valueMask))throw new TypeError(o("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const _=this.container._packedGetValue(),B=s(u<<this.start);this.container._packedSetValue(s(_&~this.wordMask)|B)}}Q.BitField=E;class S extends E{constructor(u,_){super(u,1,_)}decode(u,_){return!!super.decode(u,_)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}Q.Boolean=S;class v extends r{constructor(u,_){if(!(u instanceof a&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let B=-1;u instanceof a||(B=u),super(B,_),this.length=u}getSpan(u,_){let B=this.span;return 0>B&&(B=this.length.decode(u,_)),B}decode(u,_=0){let B=this.span;return 0>B&&(B=this.length.decode(u,_)),e(u).slice(_,_+B)}encode(u,_,B){let F=this.length;if(this.length instanceof a&&(F=u.length),!(u instanceof Uint8Array&&F===u.length))throw new TypeError(o("Blob.encode",this)+" requires (length "+F+") Uint8Array as src");if(B+F>_.length)throw new RangeError("encoding overruns Uint8Array");const tt=e(u);return e(_).write(tt.toString("hex"),B,F,"hex"),this.length instanceof a&&this.length.encode(F,_,B),F}}Q.Blob=v;class R extends r{constructor(u){super(-1,u)}getSpan(u,_=0){t(u);let B=_;for(;B<u.length&&u[B]!==0;)B+=1;return 1+B-_}decode(u,_=0){const B=this.getSpan(u,_);return e(u).slice(_,_+B-1).toString("utf-8")}encode(u,_,B=0){typeof u!="string"&&(u=String(u));const F=n.Buffer.from(u,"utf8"),tt=F.length;if(B+tt>_.length)throw new RangeError("encoding overruns Buffer");const ht=e(_);return F.copy(ht,B),ht[B+tt]=0,tt+1}}Q.CString=R;class g extends r{constructor(u,_){if(typeof u=="string"&&_===void 0&&(_=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,_),this.maxSpan=u}getSpan(u,_=0){return t(u),u.length-_}decode(u,_=0){const B=this.getSpan(u,_);if(0<=this.maxSpan&&this.maxSpan<B)throw new RangeError("text length exceeds maxSpan");return e(u).slice(_,_+B).toString("utf-8")}encode(u,_,B=0){typeof u!="string"&&(u=String(u));const F=n.Buffer.from(u,"utf8"),tt=F.length;if(0<=this.maxSpan&&this.maxSpan<tt)throw new RangeError("text length exceeds maxSpan");if(B+tt>_.length)throw new RangeError("encoding overruns Buffer");return F.copy(e(_),B),tt}}Q.UTF8=g;class h extends r{constructor(u,_){super(0,_),this.value=u}decode(u,_){return this.value}encode(u,_,B){return 0}}return Q.Constant=h,Q.greedy=(c,u)=>new f(c,u),Q.offset=(c,u,_)=>new d(c,u,_),Q.u8=c=>new A(1,c),Q.u16=c=>new A(2,c),Q.u24=c=>new A(3,c),Q.u32=c=>new A(4,c),Q.u40=c=>new A(5,c),Q.u48=c=>new A(6,c),Q.nu64=c=>new N(c),Q.u16be=c=>new b(2,c),Q.u24be=c=>new b(3,c),Q.u32be=c=>new b(4,c),Q.u40be=c=>new b(5,c),Q.u48be=c=>new b(6,c),Q.nu64be=c=>new $(c),Q.s8=c=>new O(1,c),Q.s16=c=>new O(2,c),Q.s24=c=>new O(3,c),Q.s32=c=>new O(4,c),Q.s40=c=>new O(5,c),Q.s48=c=>new O(6,c),Q.ns64=c=>new V(c),Q.s16be=c=>new L(2,c),Q.s24be=c=>new L(3,c),Q.s32be=c=>new L(4,c),Q.s40be=c=>new L(5,c),Q.s48be=c=>new L(6,c),Q.ns64be=c=>new H(c),Q.f32=c=>new rt(c),Q.f32be=c=>new at(c),Q.f64=c=>new st(c),Q.f64be=c=>new ot(c),Q.struct=(c,u,_)=>new j(c,u,_),Q.bits=(c,u,_)=>new l(c,u,_),Q.seq=(c,u,_)=>new nt(c,u,_),Q.union=(c,u,_)=>new x(c,u,_),Q.unionLayoutDiscriminator=(c,u)=>new G(c,u),Q.blob=(c,u)=>new v(c,u),Q.cstr=c=>new R(c),Q.utf8=(c,u)=>new g(c,u),Q.constant=(c,u)=>new h(c,u),Q}var U=_h(),Rh=8078e3,Ah=8078001,Ih=8078004,Sh=8078005,vh=8078006,kh=8078011;function Ya(n){return Array.isArray(n)?"%5B"+n.map(Ya).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Th([n,t]){return`${n}=${Ya(t)}`}function xh(n){const t=Object.entries(n).map(Th).join("&");return btoa(t)}function Bh(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${xh(t)}'`),`${e}\``}}var Gr=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...a}=t;i&&(r={cause:i}),Object.keys(a).length>0&&(e=a)}const o=Bh(n,e);super(o,r),this.context={__code:n,...e},this.name="SolanaError"}};function Oh(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Nh(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(Oh(t,n));return n.write(t,e,0),e}})}function Ch(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Wr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Mh(n,t){if(Wr(n)!==Wr(t))throw new Gr(Ih);if(Wr(n)&&Wr(t)&&n.fixedSize!==t.fixedSize)throw new Gr(Sh,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Wr(n)&&!Wr(t)&&n.maxSize!==t.maxSize)throw new Gr(vh,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Lh(n,t,e=0){if(t.length-e<=0)throw new Gr(Rh,{codecDescription:n})}function Ph(n,t,e,r=0){const o=e.length-r;if(o<t)throw new Gr(Ah,{bytesLength:o,codecDescription:n,expected:t})}function Uh(n,t,e,r){if(r<t||r>e)throw new Gr(kh,{codecDescription:n,max:e,min:t,value:r})}function Za(n){return n?.endian!==1}function Dh(n){return Nh({fixedSize:n.size,write(t,e,r){n.range&&Uh(n.name,n.range[0],n.range[1],t);const o=new ArrayBuffer(n.size);return n.set(new DataView(o),t,Za(n.config)),e.set(new Uint8Array(o),r),r+n.size}})}function Hh(n){return Ch({fixedSize:n.size,read(t,e=0){Lh(n.name,t,e),Ph(n.name,n.size,t,e);const r=new DataView(zh(t,e,n.size));return[n.get(r,Za(n.config)),e+n.size]}})}function zh(n,t,e){const r=n.byteOffset+(t??0),o=e??n.byteLength;return n.buffer.slice(r,r+o)}var Xa=(n={})=>Dh({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Fh=(n={})=>Hh({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Kh=(n={})=>Mh(Xa(n),Fh(n));let qh=class extends TypeError{constructor(t,e){let r;const{message:o,explanation:i,...a}=t,{path:f}=t,d=f.length===0?o:`At path: ${f.join(".")} -- ${o}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function Wh(n){return kn(n)&&typeof n[Symbol.iterator]=="function"}function kn(n){return typeof n=="object"&&n!=null}function ri(n){return kn(n)&&!Array.isArray(n)}function Ge(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Vh(n){const{done:t,value:e}=n.next();return t?void 0:e}function $h(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:a}=e,{refinement:f,message:d=`Expected a value of type \`${a}\`${f?` with refinement \`${f}\``:""}, but received: \`${Ge(r)}\``}=n;return{value:r,type:a,refinement:f,key:o[o.length-1],path:o,branch:i,...n,message:d}}function*Ws(n,t,e,r){Wh(n)||(n=[n]);for(const o of n){const i=$h(o,t,e,r);i&&(yield i)}}function*ts(n,t,e={}){const{path:r=[],branch:o=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:o,mask:a};i&&(n=t.coercer(n,f));let d="valid";for(const A of t.validator(n,f))A.explanation=e.message,d="not_valid",yield[A,void 0];for(let[A,b,O]of t.entries(n,f)){const L=ts(b,O,{path:A===void 0?r:[...r,A],branch:A===void 0?o:[...o,b],coerce:i,mask:a,message:e.message});for(const P of L)P[0]?(d=P[0].refinement!=null?"not_refined":"not_valid",yield[P[0],void 0]):i&&(b=P[1],A===void 0?n=b:n instanceof Map?n.set(A,b):n instanceof Set?n.add(b):kn(n)&&(b!==void 0||A in n)&&(n[A]=b))}if(d!=="not_valid")for(const A of t.refiner(n,f))A.explanation=e.message,d="not_refined",yield[A,void 0];d==="valid"&&(yield[void 0,n])}let ir=class{constructor(t){const{type:e,schema:r,validator:o,refiner:i,coercer:a=d=>d,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,o?this.validator=(d,A)=>{const b=o(d,A);return Ws(b,A,this,d)}:this.validator=()=>[],i?this.refiner=(d,A)=>{const b=i(d,A);return Ws(b,A,this,d)}:this.refiner=()=>[]}assert(t,e){return Ja(t,this,e)}create(t,e){return ft(t,this,e)}is(t){return Qa(t,this)}mask(t,e){return Gh(t,this,e)}validate(t,e={}){return Tn(t,this,e)}};function Ja(n,t,e){const r=Tn(n,t,{message:e});if(r[0])throw r[0]}function ft(n,t,e){const r=Tn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Gh(n,t,e){const r=Tn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Qa(n,t){return!Tn(n,t)[0]}function Tn(n,t,e={}){const r=ts(n,t,e),o=Vh(r);return o[0]?[new qh(o[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Ur(n,t){return new ir({type:n,schema:null,validator:t})}function jh(){return Ur("any",()=>!0)}function dt(n){return new ir({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ge(t)}`}})}function nr(){return Ur("boolean",n=>typeof n=="boolean")}function es(n){return Ur("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ge(t)}`)}function se(n){const t=Ge(n),e=typeof n;return new ir({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ge(r)}`}})}function Yh(){return Ur("never",()=>!1)}function pt(n){return new ir({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function X(){return Ur("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ge(n)}`)}function wt(n){return new ir({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function tc(n,t){return new ir({type:"record",schema:null,*entries(e){if(kn(e))for(const r in e){const o=e[r];yield[r,r,n],yield[r,o,t]}},validator(e){return ri(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return ri(e)?{...e}:e}})}function lt(){return Ur("string",n=>typeof n=="string"||`Expected a string, but received: ${Ge(n)}`)}function rs(n){const t=Yh();return new ir({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],n[o]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ge(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ct(n){const t=Object.keys(n);return new ir({type:"type",schema:n,*entries(e){if(kn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return ri(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return ri(e)?{...e}:e}})}function Ce(n){const t=n.map(e=>e.type).join(" | ");return new ir({type:"union",schema:null,coercer(e,r){for(const o of n){const[i,a]=o.validate(e,{coerce:!0,mask:r.mask});if(!i)return a}return e},validator(e,r){const o=[];for(const i of n){const[...a]=ts(e,i,r),[f]=a;if(f[0])for(const[d]of a)d&&o.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ge(e)}`,...o]}})}function on(){return Ur("unknown",()=>!0)}function xn(n,t,e){return new ir({...n,coercer:(r,o)=>Qa(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}var Hn,Zh=new Uint8Array(16);function ec(){if(!Hn&&(Hn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Hn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hn(Zh)}const Xh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pi(n){return typeof n=="string"&&Xh.test(n)}var Re=[];for(var so=0;so<256;++so)Re.push((so+256).toString(16).substr(1));function yi(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Re[n[t+0]]+Re[n[t+1]]+Re[n[t+2]]+Re[n[t+3]]+"-"+Re[n[t+4]]+Re[n[t+5]]+"-"+Re[n[t+6]]+Re[n[t+7]]+"-"+Re[n[t+8]]+Re[n[t+9]]+"-"+Re[n[t+10]]+Re[n[t+11]]+Re[n[t+12]]+Re[n[t+13]]+Re[n[t+14]]+Re[n[t+15]]).toLowerCase();if(!pi(e))throw TypeError("Stringified UUID is invalid");return e}var Vs,ao,co=0,uo=0;function Jh(n,t,e){var r=t&&e||0,o=t||new Array(16);n=n||{};var i=n.node||Vs,a=n.clockseq!==void 0?n.clockseq:ao;if(i==null||a==null){var f=n.random||(n.rng||ec)();i==null&&(i=Vs=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=ao=(f[6]<<8|f[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),A=n.nsecs!==void 0?n.nsecs:uo+1,b=d-co+(A-uo)/1e4;if(b<0&&n.clockseq===void 0&&(a=a+1&16383),(b<0||d>co)&&n.nsecs===void 0&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");co=d,uo=A,ao=a,d+=122192928e5;var O=((d&268435455)*1e4+A)%4294967296;o[r++]=O>>>24&255,o[r++]=O>>>16&255,o[r++]=O>>>8&255,o[r++]=O&255;var L=d/4294967296*1e4&268435455;o[r++]=L>>>8&255,o[r++]=L&255,o[r++]=L>>>24&15|16,o[r++]=L>>>16&255,o[r++]=a>>>8|128,o[r++]=a&255;for(var P=0;P<6;++P)o[r+P]=i[P];return t||yi(o)}function rc(n){if(!pi(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Qh(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var tl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",el="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function nc(n,t,e){function r(o,i,a,f){if(typeof o=="string"&&(o=Qh(o)),typeof i=="string"&&(i=rc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+o.length);if(d.set(i),d.set(o,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){f=f||0;for(var A=0;A<16;++A)a[f+A]=d[A];return a}return yi(d)}try{r.name=n}catch{}return r.DNS=tl,r.URL=el,r}function rl(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return nl(il(ol(n),n.length*8))}function nl(n){for(var t=[],e=n.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var i=n[o>>5]>>>o%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function ic(n){return(n+64>>>9<<4)+14+1}function il(n,t){n[t>>5]|=128<<t%32,n[ic(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<n.length;a+=16){var f=e,d=r,A=o,b=i;e=ve(e,r,o,i,n[a],7,-680876936),i=ve(i,e,r,o,n[a+1],12,-389564586),o=ve(o,i,e,r,n[a+2],17,606105819),r=ve(r,o,i,e,n[a+3],22,-1044525330),e=ve(e,r,o,i,n[a+4],7,-176418897),i=ve(i,e,r,o,n[a+5],12,1200080426),o=ve(o,i,e,r,n[a+6],17,-1473231341),r=ve(r,o,i,e,n[a+7],22,-45705983),e=ve(e,r,o,i,n[a+8],7,1770035416),i=ve(i,e,r,o,n[a+9],12,-1958414417),o=ve(o,i,e,r,n[a+10],17,-42063),r=ve(r,o,i,e,n[a+11],22,-1990404162),e=ve(e,r,o,i,n[a+12],7,1804603682),i=ve(i,e,r,o,n[a+13],12,-40341101),o=ve(o,i,e,r,n[a+14],17,-1502002290),r=ve(r,o,i,e,n[a+15],22,1236535329),e=ke(e,r,o,i,n[a+1],5,-165796510),i=ke(i,e,r,o,n[a+6],9,-1069501632),o=ke(o,i,e,r,n[a+11],14,643717713),r=ke(r,o,i,e,n[a],20,-373897302),e=ke(e,r,o,i,n[a+5],5,-701558691),i=ke(i,e,r,o,n[a+10],9,38016083),o=ke(o,i,e,r,n[a+15],14,-660478335),r=ke(r,o,i,e,n[a+4],20,-405537848),e=ke(e,r,o,i,n[a+9],5,568446438),i=ke(i,e,r,o,n[a+14],9,-1019803690),o=ke(o,i,e,r,n[a+3],14,-187363961),r=ke(r,o,i,e,n[a+8],20,1163531501),e=ke(e,r,o,i,n[a+13],5,-1444681467),i=ke(i,e,r,o,n[a+2],9,-51403784),o=ke(o,i,e,r,n[a+7],14,1735328473),r=ke(r,o,i,e,n[a+12],20,-1926607734),e=Te(e,r,o,i,n[a+5],4,-378558),i=Te(i,e,r,o,n[a+8],11,-2022574463),o=Te(o,i,e,r,n[a+11],16,1839030562),r=Te(r,o,i,e,n[a+14],23,-35309556),e=Te(e,r,o,i,n[a+1],4,-1530992060),i=Te(i,e,r,o,n[a+4],11,1272893353),o=Te(o,i,e,r,n[a+7],16,-155497632),r=Te(r,o,i,e,n[a+10],23,-1094730640),e=Te(e,r,o,i,n[a+13],4,681279174),i=Te(i,e,r,o,n[a],11,-358537222),o=Te(o,i,e,r,n[a+3],16,-722521979),r=Te(r,o,i,e,n[a+6],23,76029189),e=Te(e,r,o,i,n[a+9],4,-640364487),i=Te(i,e,r,o,n[a+12],11,-421815835),o=Te(o,i,e,r,n[a+15],16,530742520),r=Te(r,o,i,e,n[a+2],23,-995338651),e=xe(e,r,o,i,n[a],6,-198630844),i=xe(i,e,r,o,n[a+7],10,1126891415),o=xe(o,i,e,r,n[a+14],15,-1416354905),r=xe(r,o,i,e,n[a+5],21,-57434055),e=xe(e,r,o,i,n[a+12],6,1700485571),i=xe(i,e,r,o,n[a+3],10,-1894986606),o=xe(o,i,e,r,n[a+10],15,-1051523),r=xe(r,o,i,e,n[a+1],21,-2054922799),e=xe(e,r,o,i,n[a+8],6,1873313359),i=xe(i,e,r,o,n[a+15],10,-30611744),o=xe(o,i,e,r,n[a+6],15,-1560198380),r=xe(r,o,i,e,n[a+13],21,1309151649),e=xe(e,r,o,i,n[a+4],6,-145523070),i=xe(i,e,r,o,n[a+11],10,-1120210379),o=xe(o,i,e,r,n[a+2],15,718787259),r=xe(r,o,i,e,n[a+9],21,-343485551),e=br(e,f),r=br(r,d),o=br(o,A),i=br(i,b)}return[e,r,o,i]}function ol(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(ic(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function br(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function sl(n,t){return n<<t|n>>>32-t}function gi(n,t,e,r,o,i){return br(sl(br(br(t,n),br(r,i)),o),e)}function ve(n,t,e,r,o,i,a){return gi(t&e|~t&r,n,t,o,i,a)}function ke(n,t,e,r,o,i,a){return gi(t&r|e&~r,n,t,o,i,a)}function Te(n,t,e,r,o,i,a){return gi(t^e^r,n,t,o,i,a)}function xe(n,t,e,r,o,i,a){return gi(e^(t|~r),n,t,o,i,a)}var al=nc("v3",48,rl);function cl(n,t,e){n=n||{};var r=n.random||(n.rng||ec)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return yi(r)}function ul(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function ho(n,t){return n<<t|n>>>32-t}function hl(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var o=0;o<r.length;++o)n.push(r.charCodeAt(o))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),f=new Array(a),d=0;d<a;++d){for(var A=new Uint32Array(16),b=0;b<16;++b)A[b]=n[d*64+b*4]<<24|n[d*64+b*4+1]<<16|n[d*64+b*4+2]<<8|n[d*64+b*4+3];f[d]=A}f[a-1][14]=(n.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(n.length-1)*8&4294967295;for(var O=0;O<a;++O){for(var L=new Uint32Array(80),P=0;P<16;++P)L[P]=f[O][P];for(var z=16;z<80;++z)L[z]=ho(L[z-3]^L[z-8]^L[z-14]^L[z-16],1);for(var D=e[0],N=e[1],$=e[2],V=e[3],H=e[4],rt=0;rt<80;++rt){var at=Math.floor(rt/20),st=ho(D,5)+ul(at,N,$,V)+H+t[at]+L[rt]>>>0;H=V,V=$,$=ho(N,30)>>>0,N=D,D=st}e[0]=e[0]+D>>>0,e[1]=e[1]+N>>>0,e[2]=e[2]+$>>>0,e[3]=e[3]+V>>>0,e[4]=e[4]+H>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var ll=nc("v5",80,hl);const fl="00000000-0000-0000-0000-000000000000";function dl(n){if(!pi(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const pl=Object.freeze(Object.defineProperty({__proto__:null,NIL:fl,parse:rc,stringify:yi,v1:Jh,v3:al,v4:cl,v5:ll,validate:pi,version:dl},Symbol.toStringTag,{value:"Module"})),oc=Zo(pl);var lo,$s;function yl(){if($s)return lo;$s=1;const n=oc.v4;return lo=function(e,r,o,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const f={method:e};if(a===2&&(f.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");f.params=r}if(typeof o>"u"){const d=typeof i.generator=="function"?i.generator:function(){return n()};f.id=d(f,i)}else a===2&&o===null?i.notificationIdNull&&(f.id=null):f.id=o;return f},lo}var fo,Gs;function gl(){if(Gs)return fo;Gs=1;const n=oc.v4,t=yl(),e=function(r,o){if(!(this instanceof e))return new e(r,o);o||(o={}),this.options={reviver:typeof o.reviver<"u"?o.reviver:null,replacer:typeof o.replacer<"u"?o.replacer:null,generator:typeof o.generator<"u"?o.generator:function(){return n()},version:typeof o.version<"u"?o.version:2,notificationIdNull:typeof o.notificationIdNull=="boolean"?o.notificationIdNull:!1},this.callServer=r};return fo=e,e.prototype.request=function(r,o,i,a){const f=this;let d=null;const A=Array.isArray(r)&&typeof o=="function";if(this.options.version===1&&A)throw new TypeError("JSON-RPC 1.0 does not support batching");if(A||!A&&r&&typeof r=="object"&&typeof o=="function")a=o,d=r;else{typeof i=="function"&&(a=i,i=void 0);const L=typeof a=="function";try{d=t(r,o,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(P){if(L)return a(P);throw P}if(!L)return d}let O;try{O=JSON.stringify(d,this.options.replacer)}catch(L){return a(L)}return this.callServer(O,function(L,P){f._parseResponse(L,P,a)}),d},e.prototype._parseResponse=function(r,o,i){if(r){i(r);return}if(!o)return i();let a;try{a=JSON.parse(o,this.options.reviver)}catch(f){return i(f)}if(i.length===3)if(Array.isArray(a)){const f=function(A){return typeof A.error<"u"},d=function(A){return!f(A)};return i(null,a.filter(f),a.filter(d))}else return i(null,a.error,a.result);i(null,a)},fo}var ml=gl();const wl=fi(ml);var po={exports:{}},js;function bl(){return js||(js=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,A,b){this.fn=d,this.context=A,this.once=b||!1}function i(d,A,b,O,L){if(typeof b!="function")throw new TypeError("The listener must be a function");var P=new o(b,O||d,L),z=e?e+A:A;return d._events[z]?d._events[z].fn?d._events[z]=[d._events[z],P]:d._events[z].push(P):(d._events[z]=P,d._eventsCount++),d}function a(d,A){--d._eventsCount===0?d._events=new r:delete d._events[A]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var A=[],b,O;if(this._eventsCount===0)return A;for(O in b=this._events)t.call(b,O)&&A.push(e?O.slice(1):O);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(b)):A},f.prototype.listeners=function(A){var b=e?e+A:A,O=this._events[b];if(!O)return[];if(O.fn)return[O.fn];for(var L=0,P=O.length,z=new Array(P);L<P;L++)z[L]=O[L].fn;return z},f.prototype.listenerCount=function(A){var b=e?e+A:A,O=this._events[b];return O?O.fn?1:O.length:0},f.prototype.emit=function(A,b,O,L,P,z){var D=e?e+A:A;if(!this._events[D])return!1;var N=this._events[D],$=arguments.length,V,H;if(N.fn){switch(N.once&&this.removeListener(A,N.fn,void 0,!0),$){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,b),!0;case 3:return N.fn.call(N.context,b,O),!0;case 4:return N.fn.call(N.context,b,O,L),!0;case 5:return N.fn.call(N.context,b,O,L,P),!0;case 6:return N.fn.call(N.context,b,O,L,P,z),!0}for(H=1,V=new Array($-1);H<$;H++)V[H-1]=arguments[H];N.fn.apply(N.context,V)}else{var rt=N.length,at;for(H=0;H<rt;H++)switch(N[H].once&&this.removeListener(A,N[H].fn,void 0,!0),$){case 1:N[H].fn.call(N[H].context);break;case 2:N[H].fn.call(N[H].context,b);break;case 3:N[H].fn.call(N[H].context,b,O);break;case 4:N[H].fn.call(N[H].context,b,O,L);break;default:if(!V)for(at=1,V=new Array($-1);at<$;at++)V[at-1]=arguments[at];N[H].fn.apply(N[H].context,V)}}return!0},f.prototype.on=function(A,b,O){return i(this,A,b,O,!1)},f.prototype.once=function(A,b,O){return i(this,A,b,O,!0)},f.prototype.removeListener=function(A,b,O,L){var P=e?e+A:A;if(!this._events[P])return this;if(!b)return a(this,P),this;var z=this._events[P];if(z.fn)z.fn===b&&(!L||z.once)&&(!O||z.context===O)&&a(this,P);else{for(var D=0,N=[],$=z.length;D<$;D++)(z[D].fn!==b||L&&!z[D].once||O&&z[D].context!==O)&&N.push(z[D]);N.length?this._events[P]=N.length===1?N[0]:N:a(this,P)}return this},f.prototype.removeAllListeners=function(A){var b;return A?(b=e?e+A:A,this._events[b]&&a(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(po)),po.exports}var El=bl();const sc=fi(El);var _l=class extends sc{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(o){r(o)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function Rl(n,t){return new _l(n,t)}var Al=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Il=class extends sc{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:o=1e3,max_reconnects:i=5,...a}={},f,d){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=o,this.max_reconnects=i,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new Al,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((o,i)=>{if(!this.ready)return i(new Error("socket not ready"));const a=this.generate_request_id(n,t),f={jsonrpc:"2.0",method:n,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(f),r,d=>{if(d)return i(d);this.queue[a]={promise:[o,i]},e&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const o={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(o),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=_t.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let o=0;o<e.params.length;o++)r.push(e.params[o]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval)))})}};const Sl=BigInt(0),un=BigInt(1),vl=BigInt(2),kl=BigInt(7),Tl=BigInt(256),xl=BigInt(113),ac=[],cc=[],uc=[];for(let n=0,t=un,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],ac.push(2*(5*r+e)),cc.push((n+1)*(n+2)/2%64);let o=Sl;for(let i=0;i<7;i++)t=(t<<un^(t>>kl)*xl)%Tl,t&vl&&(o^=un<<(un<<BigInt(i))-un);uc.push(o)}const hc=Pa(uc,!0),Bl=hc[0],Ol=hc[1],Ys=(n,t,e)=>e>32?Au(n,t,e):_u(n,t,e),Zs=(n,t,e)=>e>32?Iu(n,t,e):Ru(n,t,e);function Nl(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const f=(a+8)%10,d=(a+2)%10,A=e[d],b=e[d+1],O=Ys(A,b,1)^e[f],L=Zs(A,b,1)^e[f+1];for(let P=0;P<50;P+=10)n[a+P]^=O,n[a+P+1]^=L}let o=n[2],i=n[3];for(let a=0;a<24;a++){const f=cc[a],d=Ys(o,i,f),A=Zs(o,i,f),b=ac[a];o=n[b],i=n[b+1],n[b]=d,n[b+1]=A}for(let a=0;a<50;a+=10){for(let f=0;f<10;f++)e[f]=n[a+f];for(let f=0;f<10;f++)n[a+f]^=~e[(f+2)%10]&e[(f+4)%10]}n[0]^=Bl[r],n[1]^=Ol[r]}Ar(e)}class ns extends Ko{constructor(t,e,r,o=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=o,this.rounds=i,gn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lu(this.state)}clone(){return this._cloneInto()}keccak(){_s(this.state32),Nl(this.state32,this.rounds),_s(this.state32),this.posOut=0,this.pos=0}update(t){Zr(this),t=hi(t),Mr(t);const{blockLen:e,state:r}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(e-this.pos,o-i);for(let f=0;f<a;f++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:o}=this;t[r]^=e,(e&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Zr(this,!1),Mr(t),this.finish();const e=this.state,{blockLen:r}=this;for(let o=0,i=t.length;o<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-o);t.set(e.subarray(this.posOut,this.posOut+a),o),this.posOut+=a,o+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return gn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ca(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ar(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:o,rounds:i,enableXOF:a}=this;return t||(t=new ns(e,r,o,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=o,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Cl=(n,t,e)=>qo(()=>new ns(t,n,e)),Xs=Cl(1,136,256/8);class lc extends Ko{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,hu(t);const r=hi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Ar(i)}update(t){return Zr(this),this.iHash.update(t),this}digestInto(t){Zr(this),Mr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=f,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fc=(n,t,e)=>new lc(n,t).update(e).digest();fc.create=(n,t)=>new lc(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Js(n){n.lowS!==void 0&&Er("lowS",n.lowS),n.prehash!==void 0&&Er("prehash",n.prehash)}function Ml(n){const t=jo(n);Sn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class Ll extends Error{constructor(t=""){super(t)}}const cr={Err:Ll,_tlv:{encode:(n,t)=>{const{Err:e}=cr;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,o=Un(r);if(o.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Un(o.length/2|128):"";return Un(n)+i+o+t},decode(n,t){const{Err:e}=cr;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const o=t[r++],i=!!(o&128);let a=0;if(!i)a=o;else{const d=o&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const A=t.subarray(r,r+d);if(A.length!==d)throw new e("tlv.decode: length bytes not complete");if(A[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const b of A)a=a<<8|b;if(r+=d,a<128)throw new e("tlv.decode(long): not minimal encoding")}const f=t.subarray(r,r+a);if(f.length!==a)throw new e("tlv.decode: wrong value length");return{v:f,l:t.subarray(r+a)}}},_int:{encode(n){const{Err:t}=cr;if(n<hr)throw new t("integer: negative integers are not allowed");let e=Un(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=cr;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Or(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=cr,o=ge("signature",n),{v:i,l:a}=r.decode(48,o);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:f,l:d}=r.decode(2,i),{v:A,l:b}=r.decode(2,d);if(b.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(f),s:e.decode(A)}},hexFromSig(n){const{_tlv:t,_int:e}=cr,r=t.encode(2,e.encode(n.r)),o=t.encode(2,e.encode(n.s)),i=r+o;return t.encode(48,i)}},hr=BigInt(0),we=BigInt(1);BigInt(2);const Qs=BigInt(3);BigInt(4);function Pl(n){const t=Ml(n),{Fp:e}=t,r=vn(t.n,t.nBitLength),o=t.toBytes||((D,N,$)=>{const V=N.toAffine();return Qr(Uint8Array.from([4]),e.toBytes(V.x),e.toBytes(V.y))}),i=t.fromBytes||(D=>{const N=D.subarray(1),$=e.fromBytes(N.subarray(0,e.BYTES)),V=e.fromBytes(N.subarray(e.BYTES,2*e.BYTES));return{x:$,y:V}});function a(D){const{a:N,b:$}=t,V=e.sqr(D),H=e.mul(V,D);return e.add(e.add(H,e.mul(D,N)),$)}if(!e.eql(e.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function f(D){return $o(D,we,t.n)}function d(D){const{allowedPrivateKeyLengths:N,nByteLength:$,wrapPrivateKey:V,n:H}=t;if(N&&typeof D!="bigint"){if(Xr(D)&&(D=Jr(D)),typeof D!="string"||!N.includes(D.length))throw new Error("invalid private key");D=D.padStart($*2,"0")}let rt;try{rt=typeof D=="bigint"?D:Or(ge("private key",D,$))}catch{throw new Error("invalid private key, expected hex or "+$+" bytes, got "+typeof D)}return V&&(rt=ie(rt,H)),$e("private key",rt,we,H),rt}function A(D){if(!(D instanceof L))throw new Error("ProjectivePoint expected")}const b=Xn((D,N)=>{const{px:$,py:V,pz:H}=D;if(e.eql(H,e.ONE))return{x:$,y:V};const rt=D.is0();N==null&&(N=rt?e.ONE:e.inv(H));const at=e.mul($,N),st=e.mul(V,N),ot=e.mul(H,N);if(rt)return{x:e.ZERO,y:e.ZERO};if(!e.eql(ot,e.ONE))throw new Error("invZ was invalid");return{x:at,y:st}}),O=Xn(D=>{if(D.is0()){if(t.allowInfinityPoint&&!e.is0(D.py))return;throw new Error("bad point: ZERO")}const{x:N,y:$}=D.toAffine();if(!e.isValid(N)||!e.isValid($))throw new Error("bad point: x or y not FE");const V=e.sqr($),H=a(N);if(!e.eql(V,H))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class L{constructor(N,$,V){if(N==null||!e.isValid(N))throw new Error("x required");if($==null||!e.isValid($)||e.is0($))throw new Error("y required");if(V==null||!e.isValid(V))throw new Error("z required");this.px=N,this.py=$,this.pz=V,Object.freeze(this)}static fromAffine(N){const{x:$,y:V}=N||{};if(!N||!e.isValid($)||!e.isValid(V))throw new Error("invalid affine point");if(N instanceof L)throw new Error("projective point not allowed");const H=rt=>e.eql(rt,e.ZERO);return H($)&&H(V)?L.ZERO:new L($,V,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const $=Go(e,N.map(V=>V.pz));return N.map((V,H)=>V.toAffine($[H])).map(L.fromAffine)}static fromHex(N){const $=L.fromAffine(i(ge("pointHex",N)));return $.assertValidity(),$}static fromPrivateKey(N){return L.BASE.multiply(d(N))}static msm(N,$){return Ga(L,r,N,$)}_setWindowSize(N){z.setWindowSize(this,N)}assertValidity(){O(this)}hasEvenY(){const{y:N}=this.toAffine();if(e.isOdd)return!e.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){A(N);const{px:$,py:V,pz:H}=this,{px:rt,py:at,pz:st}=N,ot=e.eql(e.mul($,st),e.mul(rt,H)),nt=e.eql(e.mul(V,st),e.mul(at,H));return ot&&nt}negate(){return new L(this.px,e.neg(this.py),this.pz)}double(){const{a:N,b:$}=t,V=e.mul($,Qs),{px:H,py:rt,pz:at}=this;let st=e.ZERO,ot=e.ZERO,nt=e.ZERO,j=e.mul(H,H),q=e.mul(rt,rt),G=e.mul(at,at),x=e.mul(H,rt);return x=e.add(x,x),nt=e.mul(H,at),nt=e.add(nt,nt),st=e.mul(N,nt),ot=e.mul(V,G),ot=e.add(st,ot),st=e.sub(q,ot),ot=e.add(q,ot),ot=e.mul(st,ot),st=e.mul(x,st),nt=e.mul(V,nt),G=e.mul(N,G),x=e.sub(j,G),x=e.mul(N,x),x=e.add(x,nt),nt=e.add(j,j),j=e.add(nt,j),j=e.add(j,G),j=e.mul(j,x),ot=e.add(ot,j),G=e.mul(rt,at),G=e.add(G,G),j=e.mul(G,x),st=e.sub(st,j),nt=e.mul(G,q),nt=e.add(nt,nt),nt=e.add(nt,nt),new L(st,ot,nt)}add(N){A(N);const{px:$,py:V,pz:H}=this,{px:rt,py:at,pz:st}=N;let ot=e.ZERO,nt=e.ZERO,j=e.ZERO;const q=t.a,G=e.mul(t.b,Qs);let x=e.mul($,rt),I=e.mul(V,at),s=e.mul(H,st),l=e.add($,V),E=e.add(rt,at);l=e.mul(l,E),E=e.add(x,I),l=e.sub(l,E),E=e.add($,H);let S=e.add(rt,st);return E=e.mul(E,S),S=e.add(x,s),E=e.sub(E,S),S=e.add(V,H),ot=e.add(at,st),S=e.mul(S,ot),ot=e.add(I,s),S=e.sub(S,ot),j=e.mul(q,E),ot=e.mul(G,s),j=e.add(ot,j),ot=e.sub(I,j),j=e.add(I,j),nt=e.mul(ot,j),I=e.add(x,x),I=e.add(I,x),s=e.mul(q,s),E=e.mul(G,E),I=e.add(I,s),s=e.sub(x,s),s=e.mul(q,s),E=e.add(E,s),x=e.mul(I,E),nt=e.add(nt,x),x=e.mul(S,E),ot=e.mul(l,ot),ot=e.sub(ot,x),x=e.mul(l,I),j=e.mul(S,j),j=e.add(j,x),new L(ot,nt,j)}subtract(N){return this.add(N.negate())}is0(){return this.equals(L.ZERO)}wNAF(N){return z.wNAFCached(this,N,L.normalizeZ)}multiplyUnsafe(N){const{endo:$,n:V}=t;$e("scalar",N,hr,V);const H=L.ZERO;if(N===hr)return H;if(this.is0()||N===we)return this;if(!$||z.hasPrecomputes(this))return z.wNAFCachedUnsafe(this,N,L.normalizeZ);let{k1neg:rt,k1:at,k2neg:st,k2:ot}=$.splitScalar(N),nt=H,j=H,q=this;for(;at>hr||ot>hr;)at&we&&(nt=nt.add(q)),ot&we&&(j=j.add(q)),q=q.double(),at>>=we,ot>>=we;return rt&&(nt=nt.negate()),st&&(j=j.negate()),j=new L(e.mul(j.px,$.beta),j.py,j.pz),nt.add(j)}multiply(N){const{endo:$,n:V}=t;$e("scalar",N,we,V);let H,rt;if($){const{k1neg:at,k1:st,k2neg:ot,k2:nt}=$.splitScalar(N);let{p:j,f:q}=this.wNAF(st),{p:G,f:x}=this.wNAF(nt);j=z.constTimeNegate(at,j),G=z.constTimeNegate(ot,G),G=new L(e.mul(G.px,$.beta),G.py,G.pz),H=j.add(G),rt=q.add(x)}else{const{p:at,f:st}=this.wNAF(N);H=at,rt=st}return L.normalizeZ([H,rt])[0]}multiplyAndAddUnsafe(N,$,V){const H=L.BASE,rt=(st,ot)=>ot===hr||ot===we||!st.equals(H)?st.multiplyUnsafe(ot):st.multiply(ot),at=rt(this,$).add(rt(N,V));return at.is0()?void 0:at}toAffine(N){return b(this,N)}isTorsionFree(){const{h:N,isTorsionFree:$}=t;if(N===we)return!0;if($)return $(L,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:$}=t;return N===we?this:$?$(L,this):this.multiplyUnsafe(t.h)}toRawBytes(N=!0){return Er("isCompressed",N),this.assertValidity(),o(L,this,N)}toHex(N=!0){return Er("isCompressed",N),Jr(this.toRawBytes(N))}}L.BASE=new L(t.Gx,t.Gy,e.ONE),L.ZERO=new L(e.ZERO,e.ONE,e.ZERO);const P=t.nBitLength,z=$a(L,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:L,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:f}}function Ul(n){const t=jo(n);return Sn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Dl(n){const t=Ul(n),{Fp:e,n:r}=t,o=e.BYTES+1,i=2*e.BYTES+1;function a(s){return ie(s,r)}function f(s){return To(s,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:A,weierstrassEquation:b,isWithinCurveOrder:O}=Pl({...t,toBytes(s,l,E){const S=l.toAffine(),v=e.toBytes(S.x),R=Qr;return Er("isCompressed",E),E?R(Uint8Array.from([l.hasEvenY()?2:3]),v):R(Uint8Array.from([4]),v,e.toBytes(S.y))},fromBytes(s){const l=s.length,E=s[0],S=s.subarray(1);if(l===o&&(E===2||E===3)){const v=Or(S);if(!$o(v,we,e.ORDER))throw new Error("Point is not on curve");const R=b(v);let g;try{g=e.sqrt(R)}catch(u){const _=u instanceof Error?": "+u.message:"";throw new Error("Point is not on curve"+_)}const h=(g&we)===we;return(E&1)===1!==h&&(g=e.neg(g)),{x:v,y:g}}else if(l===i&&E===4){const v=e.fromBytes(S.subarray(0,e.BYTES)),R=e.fromBytes(S.subarray(e.BYTES,2*e.BYTES));return{x:v,y:R}}else{const v=o,R=i;throw new Error("invalid Point, expected length of "+v+", or uncompressed "+R+", got "+l)}}}),L=s=>Jr(mn(s,t.nByteLength));function P(s){const l=r>>we;return s>l}function z(s){return P(s)?a(-s):s}const D=(s,l,E)=>Or(s.slice(l,E));class N{constructor(l,E,S){$e("r",l,we,r),$e("s",E,we,r),this.r=l,this.s=E,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(l){const E=t.nByteLength;return l=ge("compactSignature",l,E*2),new N(D(l,0,E),D(l,E,2*E))}static fromDER(l){const{r:E,s:S}=cr.toSig(ge("DER",l));return new N(E,S)}assertValidity(){}addRecoveryBit(l){return new N(this.r,this.s,l)}recoverPublicKey(l){const{r:E,s:S,recovery:v}=this,R=st(ge("msgHash",l));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const g=v===2||v===3?E+t.n:E;if(g>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=(v&1)===0?"02":"03",c=d.fromHex(h+L(g)),u=f(g),_=a(-R*u),B=a(S*u),F=d.BASE.multiplyAndAddUnsafe(c,_,B);if(!F)throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return P(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Yn(this.toDERHex())}toDERHex(){return cr.hexFromSig(this)}toCompactRawBytes(){return Yn(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}const $={isValidPrivateKey(s){try{return A(s),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const s=qa(t.n);return Yu(t.randomBytes(s),t.n)},precompute(s=8,l=d.BASE){return l._setWindowSize(s),l.multiply(BigInt(3)),l}};function V(s,l=!0){return d.fromPrivateKey(s).toRawBytes(l)}function H(s){const l=Xr(s),E=typeof s=="string",S=(l||E)&&s.length;return l?S===o||S===i:E?S===2*o||S===2*i:s instanceof d}function rt(s,l,E=!0){if(H(s))throw new Error("first arg must be private key");if(!H(l))throw new Error("second arg must be public key");return d.fromHex(l).multiply(A(s)).toRawBytes(E)}const at=t.bits2int||function(s){if(s.length>8192)throw new Error("input is too large");const l=Or(s),E=s.length*8-t.nBitLength;return E>0?l>>BigInt(E):l},st=t.bits2int_modN||function(s){return a(at(s))},ot=li(t.nBitLength);function nt(s){return $e("num < 2^"+t.nBitLength,s,hr,ot),mn(s,t.nByteLength)}function j(s,l,E=q){if(["recovered","canonical"].some(ht=>ht in E))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:v}=t;let{lowS:R,prehash:g,extraEntropy:h}=E;R==null&&(R=!0),s=ge("msgHash",s),Js(E),g&&(s=ge("prehashed msgHash",S(s)));const c=st(s),u=A(l),_=[nt(u),nt(c)];if(h!=null&&h!==!1){const ht=h===!0?v(e.BYTES):h;_.push(ge("extraEntropy",ht))}const B=Qr(..._),F=c;function tt(ht){const gt=at(ht);if(!O(gt))return;const zt=f(gt),bt=d.BASE.multiply(gt).toAffine(),vt=a(bt.x);if(vt===hr)return;const le=a(zt*a(F+vt*u));if(le===hr)return;let Mt=(bt.x===vt?0:2)|Number(bt.y&we),Pt=le;return R&&P(le)&&(Pt=z(le),Mt^=1),new N(vt,Pt,Mt)}return{seed:B,k2sig:tt}}const q={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function x(s,l,E=q){const{seed:S,k2sig:v}=j(s,l,E),R=t;return Hu(R.hash.outputLen,R.nByteLength,R.hmac)(S,v)}d.BASE._setWindowSize(8);function I(s,l,E,S=G){const v=s;l=ge("msgHash",l),E=ge("publicKey",E);const{lowS:R,prehash:g,format:h}=S;if(Js(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(h!==void 0&&h!=="compact"&&h!=="der")throw new Error("format must be compact or der");const c=typeof v=="string"||Xr(v),u=!c&&!h&&typeof v=="object"&&v!==null&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!c&&!u)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let _,B;try{if(u&&(_=new N(v.r,v.s)),c){try{h!=="compact"&&(_=N.fromDER(v))}catch(Mt){if(!(Mt instanceof cr.Err))throw Mt}!_&&h!=="der"&&(_=N.fromCompact(v))}B=d.fromHex(E)}catch{return!1}if(!_||R&&_.hasHighS())return!1;g&&(l=t.hash(l));const{r:F,s:tt}=_,ht=st(l),gt=f(tt),zt=a(ht*gt),bt=a(F*gt),vt=d.BASE.multiplyAndAddUnsafe(B,zt,bt)?.toAffine();return vt?a(vt.x)===F:!1}return{CURVE:t,getPublicKey:V,getSharedSecret:rt,sign:x,verify:I,ProjectivePoint:d,Signature:N,utils:$}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hl(n){return{hash:n,hmac:(t,...e)=>fc(n,t,gu(...e)),randomBytes:Ma}}function zl(n,t){const e=r=>Dl({...n,...Hl(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ta=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Fl=BigInt(1),Bo=BigInt(2),ea=(n,t)=>(n+t/Bo)/t;function Kl(n){const t=dc,e=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),f=BigInt(44),d=BigInt(88),A=n*n*n%t,b=A*A*n%t,O=he(b,e,t)*b%t,L=he(O,e,t)*b%t,P=he(L,Bo,t)*A%t,z=he(P,o,t)*P%t,D=he(z,i,t)*z%t,N=he(D,f,t)*D%t,$=he(N,d,t)*N%t,V=he($,f,t)*D%t,H=he(V,e,t)*b%t,rt=he(H,a,t)*z%t,at=he(rt,r,t)*A%t,st=he(at,Bo,t);if(!Oo.eql(Oo.sqr(st),n))throw new Error("Cannot find square root");return st}const Oo=vn(dc,void 0,void 0,{sqrt:Kl}),mi=zl({a:BigInt(0),b:BigInt(7),Fp:Oo,n:ta,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=ta,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Fl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),f=ea(i*n,t),d=ea(-r*n,t);let A=ie(n-f*e-d*o,t),b=ie(-f*r-d*i,t);const O=A>a,L=b>a;if(O&&(A=t-A),L&&(b=t-b),A>a||b>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:O,k1:A,k2neg:L,k2:b}}}},Da);BigInt(0);mi.ProjectivePoint;const ql=nn.utils.randomPrivateKey,ra=()=>{const n=nn.utils.randomPrivateKey(),t=ni(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},ni=nn.getPublicKey;function na(n){try{return nn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const is=(n,t)=>nn.sign(n,t.slice(0,32)),Wl=nn.verify,Ot=n=>_t.isBuffer(n)?n:n instanceof Uint8Array?_t.from(n.buffer,n.byteOffset,n.byteLength):_t.from(n);let os=class{constructor(t){Object.assign(this,t)}encode(){return _t.from(oo.serialize(dn,this))}static decode(t){return oo.deserialize(dn,this,t)}static decodeUnchecked(t){return oo.deserializeUnchecked(dn,this,t)}};class Vl extends os{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const dn=new Map;var pc;const yc=32,rr=32;function $l(n){return n._bn!==void 0}let ia=1;class ut extends os{constructor(t){if(super({}),this._bn=void 0,$l(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Ae.decode(t);if(e.length!=rr)throw new Error("Invalid public key input");this._bn=new wn(e)}else this._bn=new wn(t);if(this._bn.byteLength()>rr)throw new Error("Invalid public key input")}}static unique(){const t=new ut(ia);return ia+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(_t);if(t.length===rr)return t;const e=_t.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=_t.concat([t.toBuffer(),_t.from(e),r.toBuffer()]),i=Fs(o);return new ut(i)}static createProgramAddressSync(t,e){let r=_t.alloc(0);t.forEach(function(i){if(i.length>yc)throw new TypeError("Max seed length exceeded");r=_t.concat([r,Ot(i)])}),r=_t.concat([r,e.toBuffer(),_t.from("ProgramDerivedAddress")]);const o=Fs(r);if(na(o))throw new Error("Invalid seeds, address must fall off the curve");return new ut(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const i=t.concat(_t.from([r]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return na(e.toBytes())}}pc=ut;ut.default=new pc("11111111111111111111111111111111");dn.set(ut,{kind:"struct",fields:[["_bn","u256"]]});class Gl{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Ot(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Ot(ql()),this._publicKey=Ot(ni(this._secretKey))}get publicKey(){return new ut(this._publicKey)}get secretKey(){return _t.concat([this._secretKey,this._publicKey],64)}}const jl=new ut("BPFLoader1111111111111111111111111111111111"),_r=1232,wi=127,bn=64;class ss extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ss.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class as extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(as.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Vr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Vr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class En{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const o=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(a=>o(a.pubkey)),data:i.data}))}}const Ct=(n="publicKey")=>U.blob(32,n),Yl=(n="signature")=>U.blob(64,n),Tr=(n="string")=>{const t=U.struct([U.u32("length"),U.u32("lengthPadding"),U.blob(U.offset(U.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(i,a)=>e(i,a).chars.toString(),o.encode=(i,a,f)=>{const d={chars:_t.from(i,"utf8")};return r(d,a,f)},o.alloc=i=>U.u32().span+U.u32().span+_t.from(i,"utf8").length,o},Zl=(n="authorized")=>U.struct([Ct("staker"),Ct("withdrawer")],n),Xl=(n="lockup")=>U.struct([U.ns64("unixTimestamp"),U.ns64("epoch"),Ct("custodian")],n),Jl=(n="voteInit")=>U.struct([Ct("nodePubkey"),Ct("authorizedVoter"),Ct("authorizedWithdrawer"),U.u8("commission")],n),Ql=(n="voteAuthorizeWithSeedArgs")=>U.struct([U.u32("voteAuthorizationType"),Ct("currentAuthorityDerivedKeyOwnerPubkey"),Tr("currentAuthorityDerivedKeySeed"),Ct("newAuthorized")],n);function gc(n,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const i=t[o.property];if(Array.isArray(i))return i.length*e(o.elementLayout)}else if("fields"in o)return gc({layout:o},t[o.property]);return 0};let r=0;return n.layout.fields.forEach(o=>{r+=e(o)}),r}function Pe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Fe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Ht(n,t){if(!n)throw new Error(t||"Assertion failed")}class bi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=a=>{const f=a.toBase58();let d=r.get(f);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,d)),d},i=o(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){o(a.programId).isInvoked=!0;for(const f of a.keys){const d=o(f.pubkey);d.isSigner||=f.isSigner,d.isWritable||=f.isWritable}}return new bi(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ht(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),o=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ht(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Ht(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const f=[...e.map(([d])=>new ut(d)),...r.map(([d])=>new ut(d)),...o.map(([d])=>new ut(d)),...i.map(([d])=>new ut(d))];return[a,f]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const f=new ut(i),d=t.findIndex(A=>A.equals(f));d>=0&&(Ht(d<256,"Max lookup table index exceeded"),r.push(d),o.push(f),this.keyMetaMap.delete(i))}return[r,o]}}const mc="Reached end of buffer unexpectedly";function Qe(n){if(n.length===0)throw new Error(mc);return n.shift()}function Ue(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(mc);return n.splice(...t)}class je{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new En(this.staticAccountKeys)}static compile(t){const e=bi.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),a=new En(o).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:Ae.encode(f.data)}));return new je({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Fe(e,t);const r=this.instructions.map(O=>{const{accounts:L,programIdIndex:P}=O,z=Array.from(Ae.decode(O.data));let D=[];Fe(D,L.length);let N=[];return Fe(N,z.length),{programIdIndex:P,keyIndicesCount:_t.from(D),keyIndices:L,dataLength:_t.from(N),data:z}});let o=[];Fe(o,r.length);let i=_t.alloc(_r);_t.from(o).copy(i);let a=o.length;r.forEach(O=>{const P=U.struct([U.u8("programIdIndex"),U.blob(O.keyIndicesCount.length,"keyIndicesCount"),U.seq(U.u8("keyIndex"),O.keyIndices.length,"keyIndices"),U.blob(O.dataLength.length,"dataLength"),U.seq(U.u8("userdatum"),O.data.length,"data")]).encode(O,i,a);a+=P}),i=i.slice(0,a);const f=U.struct([U.blob(1,"numRequiredSignatures"),U.blob(1,"numReadonlySignedAccounts"),U.blob(1,"numReadonlyUnsignedAccounts"),U.blob(e.length,"keyCount"),U.seq(Ct("key"),t,"keys"),Ct("recentBlockhash")]),d={numRequiredSignatures:_t.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:_t.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:_t.from([this.header.numReadonlyUnsignedAccounts]),keyCount:_t.from(e),keys:this.accountKeys.map(O=>Ot(O.toBytes())),recentBlockhash:Ae.decode(this.recentBlockhash)};let A=_t.alloc(2048);const b=f.encode(d,A);return i.copy(A,b),A.slice(0,b+i.length)}static from(t){let e=[...t];const r=Qe(e);if(r!==(r&wi))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=Qe(e),i=Qe(e),a=Pe(e);let f=[];for(let L=0;L<a;L++){const P=Ue(e,0,rr);f.push(new ut(_t.from(P)))}const d=Ue(e,0,rr),A=Pe(e);let b=[];for(let L=0;L<A;L++){const P=Qe(e),z=Pe(e),D=Ue(e,0,z),N=Pe(e),$=Ue(e,0,N),V=Ae.encode(_t.from($));b.push({programIdIndex:P,accounts:D,data:V})}const O={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:Ae.encode(_t.from(d)),accountKeys:f,instructions:b};return new je(O)}}class Lr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new En(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,i=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){const o=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return o<a}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(i=>i.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=bi.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const O=e.extractTableLookup(b);if(O!==void 0){const[L,{writable:P,readonly:z}]=O;r.push(L),o.writable.push(...P),o.readonly.push(...z)}}const[a,f]=e.getMessageComponents(),A=new En(f,o).compileInstructions(t.instructions);return new Lr({header:a,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:A,addressTableLookups:r})}serialize(){const t=Array();Fe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Fe(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),i=Array();Fe(i,this.addressTableLookups.length);const a=U.struct([U.u8("prefix"),U.struct([U.u8("numRequiredSignatures"),U.u8("numReadonlySignedAccounts"),U.u8("numReadonlyUnsignedAccounts")],"header"),U.blob(t.length,"staticAccountKeysLength"),U.seq(Ct(),this.staticAccountKeys.length,"staticAccountKeys"),Ct("recentBlockhash"),U.blob(r.length,"instructionsLength"),U.blob(e.length,"serializedInstructions"),U.blob(i.length,"addressTableLookupsLength"),U.blob(o.length,"serializedAddressTableLookups")]),f=new Uint8Array(_r),A=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:Ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},f);return f.slice(0,A)}serializeInstructions(){let t=0;const e=new Uint8Array(_r);for(const r of this.compiledInstructions){const o=Array();Fe(o,r.accountKeyIndexes.length);const i=Array();Fe(i,r.data.length);const a=U.struct([U.u8("programIdIndex"),U.blob(o.length,"encodedAccountKeyIndexesLength"),U.seq(U.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),U.blob(i.length,"encodedDataLength"),U.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(_r);for(const r of this.addressTableLookups){const o=Array();Fe(o,r.writableIndexes.length);const i=Array();Fe(i,r.readonlyIndexes.length);const a=U.struct([Ct("accountKey"),U.blob(o.length,"encodedWritableIndexesLength"),U.seq(U.u8(),r.writableIndexes.length,"writableIndexes"),U.blob(i.length,"encodedReadonlyIndexesLength"),U.seq(U.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Qe(e),o=r&wi;Ht(r!==o,"Expected versioned message but received legacy message");const i=o;Ht(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Qe(e),numReadonlySignedAccounts:Qe(e),numReadonlyUnsignedAccounts:Qe(e)},f=[],d=Pe(e);for(let z=0;z<d;z++)f.push(new ut(Ue(e,0,rr)));const A=Ae.encode(Ue(e,0,rr)),b=Pe(e),O=[];for(let z=0;z<b;z++){const D=Qe(e),N=Pe(e),$=Ue(e,0,N),V=Pe(e),H=new Uint8Array(Ue(e,0,V));O.push({programIdIndex:D,accountKeyIndexes:$,data:H})}const L=Pe(e),P=[];for(let z=0;z<L;z++){const D=new ut(Ue(e,0,rr)),N=Pe(e),$=Ue(e,0,N),V=Pe(e),H=Ue(e,0,V);P.push({accountKey:D,writableIndexes:$,readonlyIndexes:H})}return new Lr({header:a,staticAccountKeys:f,recentBlockhash:A,compiledInstructions:O,addressTableLookups:P})}}const cs={deserializeMessageVersion(n){const t=n[0],e=t&wi;return e===t?"legacy":e},deserialize:n=>{const t=cs.deserializeMessageVersion(n);if(t==="legacy")return je.from(n);if(t===0)return Lr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let ar=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const tf=_t.alloc(bn).fill(0);class Gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=_t.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Dt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Gt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let D=0;D<e.length;D++)if(e[D].programId===void 0)throw new Error(`Transaction instruction index ${D} has undefined program id`);const o=[],i=[];e.forEach(D=>{D.keys.forEach($=>{i.push({...$})});const N=D.programId.toString();o.includes(N)||o.push(N)}),o.forEach(D=>{i.push({pubkey:new ut(D),isSigner:!1,isWritable:!1})});const a=[];i.forEach(D=>{const N=D.pubkey.toString(),$=a.findIndex(V=>V.pubkey.toString()===N);$>-1?(a[$].isWritable=a[$].isWritable||D.isWritable,a[$].isSigner=a[$].isSigner||D.isSigner):a.push(D)}),a.sort(function(D,N){if(D.isSigner!==N.isSigner)return D.isSigner?-1:1;if(D.isWritable!==N.isWritable)return D.isWritable?-1:1;const $={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return D.pubkey.toBase58().localeCompare(N.pubkey.toBase58(),"en",$)});const f=a.findIndex(D=>D.pubkey.equals(r));if(f>-1){const[D]=a.splice(f,1);D.isSigner=!0,D.isWritable=!0,a.unshift(D)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const D of this.signatures){const N=a.findIndex($=>$.pubkey.equals(D.publicKey));if(N>-1)a[N].isSigner||(a[N].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${D.publicKey.toString()}`)}let d=0,A=0,b=0;const O=[],L=[];a.forEach(({pubkey:D,isSigner:N,isWritable:$})=>{N?(O.push(D.toString()),d+=1,$||(A+=1)):(L.push(D.toString()),$||(b+=1))});const P=O.concat(L),z=e.map(D=>{const{data:N,programId:$}=D;return{programIdIndex:P.indexOf($.toString()),accounts:D.keys.map(V=>P.indexOf(V.pubkey.toString())),data:Ae.encode(N)}});return z.forEach(D=>{Ht(D.programIdIndex>=0),D.accounts.forEach(N=>Ht(N>=0))}),new je({header:{numRequiredSignatures:d,numReadonlySignedAccounts:A,numReadonlyUnsignedAccounts:b},accountKeys:P,recentBlockhash:t,instructions:z})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const i=is(r,o.secretKey);this._addSignature(o.publicKey,Ot(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Ht(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=_t.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:i}of this.signatures)o===null?e&&(r.missing||=[]).push(i):Wl(o,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(o,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];Fe(r,e.length);const o=r.length+e.length*64+t.length,i=_t.alloc(o);return Ht(e.length<256),_t.from(r).copy(i,0),e.forEach(({signature:a},f)=>{a!==null&&(Ht(a.length===64,"signature has invalid length"),_t.from(a).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),Ht(i.length<=_r,`Transaction too large: ${i.length} > ${_r}`),i}get keys(){return Ht(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ht(this.instructions.length===1),this.instructions[0].programId}get data(){return Ht(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Pe(e);let o=[];for(let i=0;i<r;i++){const a=Ue(e,0,bn);o.push(Ae.encode(_t.from(a)))}return Dt.populate(je.from(e),o)}static populate(t,e=[]){const r=new Dt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{const a={signature:o==Ae.encode(tf)?null:Ae.decode(o),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(o=>{const i=o.accounts.map(a=>{const f=t.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(d=>d.publicKey.toString()===f.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new Gt({keys:i,programId:t.accountKeys[o.programIdIndex],data:Ae.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class us{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:o,recentBlockhash:i}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:d}=r,A=a-f;Ht(A>0,"Message header is invalid");const b=t.staticAccountKeys.length-a-d;Ht(b>=0,"Message header is invalid");const O=t.getAccountKeys(e),L=O.get(0);if(L===void 0)throw new Error("Failed to decompile message because no account keys were found");const P=[];for(const z of o){const D=[];for(const $ of z.accountKeyIndexes){const V=O.get($);if(V===void 0)throw new Error(`Failed to find key for account key index ${$}`);const H=$<a;let rt;H?rt=$<A:$<O.staticAccountKeys.length?rt=$-a<b:rt=$-O.staticAccountKeys.length<O.accountKeysFromLookups.writable.length,D.push({pubkey:V,isSigner:$<r.numRequiredSignatures,isWritable:rt})}const N=O.get(z.programIdIndex);if(N===void 0)throw new Error(`Failed to find program id for program id index ${z.programIdIndex}`);P.push(new Gt({programId:N,data:Ot(z.data),keys:D}))}return new us({payerKey:L,instructions:P,recentBlockhash:i})}compileToLegacyMessage(){return je.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Lr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class hs{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ht(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(bn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Fe(e,this.signatures.length);const r=U.struct([U.blob(e.length,"encodedSignaturesLength"),U.seq(Yl(),this.signatures.length,"signatures"),U.blob(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t];const r=[],o=Pe(e);for(let a=0;a<o;a++)r.push(new Uint8Array(Ue(e,0,bn)));const i=cs.deserialize(new Uint8Array(e));return new hs(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const i=r.findIndex(a=>a.equals(o.publicKey));Ht(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=is(e,o.secretKey)}}addSignature(t,e){Ht(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ht(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const ef=160,rf=64,nf=ef/rf,wc=1e3/nf,Xe=new ut("SysvarC1ock11111111111111111111111111111111"),of=new ut("SysvarEpochSchedu1e111111111111111111111111"),sf=new ut("Sysvar1nstructions1111111111111111111111111"),Vn=new ut("SysvarRecentB1ockHashes11111111111111111111"),en=new ut("SysvarRent111111111111111111111111111111111"),af=new ut("SysvarRewards111111111111111111111111111111"),cf=new ut("SysvarS1otHashes111111111111111111111111111"),uf=new ut("SysvarS1otHistory11111111111111111111111111"),$n=new ut("SysvarStakeHistory1111111111111111111111111");class _n extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:o}){const i=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let f;switch(t){case"send":f=`Transaction ${e} resulted in an error. 
${r}. `+i+a;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+i+a;break;default:f=`Unknown action '${(d=>d)(t)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const i=o.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const hf={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class mt extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function No(n,t,e,r){const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,o);let a;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)a=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:f}=t.nonceInfo,d=f.keys[0].pubkey;a=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await n.confirmTransaction(i,r&&r.commitment)).value;if(a.err)throw i!=null?new _n({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(a)})`);return i}function vr(n){return new Promise(t=>setTimeout(t,n))}function Lt(n,t){const e=n.layout.span>=0?n.layout.span:gc(n,t),r=_t.alloc(e),o=Object.assign({instruction:n.index},t);return n.layout.encode(o,r),r}function Kt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const bc=U.nu64("lamportsPerSignature"),Ec=U.struct([U.u32("version"),U.u32("state"),Ct("authorizedPubkey"),Ct("nonce"),U.struct([bc],"feeCalculator")]),Co=Ec.span;class Ei{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ec.decode(Ot(t),0);return new Ei({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function rn(n){const t=U.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),o=t,i=Kh();return o.decode=(a,f)=>{const d=e(a,f);return i.decode(d)},o.encode=(a,f,d)=>{const A=i.encode(a);return r(A,f,d)},o}class lf{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=U.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(Jt))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a SystemInstruction");return o}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:o}=Kt(Jt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new ut(o)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Kt(Jt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:o}=Kt(Jt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new ut(o)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Kt(Jt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:o,programId:i}=Kt(Jt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,space:o,programId:new ut(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Kt(Jt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ut(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:o}=Kt(Jt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,programId:new ut(o)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:o,space:i,programId:a}=Kt(Jt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ut(e),seed:r,lamports:o,space:i,programId:new ut(a)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Kt(Jt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ut(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Kt(Jt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Kt(Jt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Kt(Jt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ut(e)}}static checkProgramId(t){if(!t.equals(Ee.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Jt=Object.freeze({Create:{index:0,layout:U.struct([U.u32("instruction"),U.ns64("lamports"),U.ns64("space"),Ct("programId")])},Assign:{index:1,layout:U.struct([U.u32("instruction"),Ct("programId")])},Transfer:{index:2,layout:U.struct([U.u32("instruction"),rn("lamports")])},CreateWithSeed:{index:3,layout:U.struct([U.u32("instruction"),Ct("base"),Tr("seed"),U.ns64("lamports"),U.ns64("space"),Ct("programId")])},AdvanceNonceAccount:{index:4,layout:U.struct([U.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:U.struct([U.u32("instruction"),Ct("authorized")])},AuthorizeNonceAccount:{index:7,layout:U.struct([U.u32("instruction"),Ct("authorized")])},Allocate:{index:8,layout:U.struct([U.u32("instruction"),U.ns64("space")])},AllocateWithSeed:{index:9,layout:U.struct([U.u32("instruction"),Ct("base"),Tr("seed"),U.ns64("space"),Ct("programId")])},AssignWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Ct("base"),Tr("seed"),Ct("programId")])},TransferWithSeed:{index:11,layout:U.struct([U.u32("instruction"),rn("lamports"),Tr("seed"),Ct("programId")])},UpgradeNonceAccount:{index:12,layout:U.struct([U.u32("instruction")])}});class Ee{constructor(){}static createAccount(t){const e=Jt.Create,r=Lt(e,{lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});return new Gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=Jt.TransferWithSeed;e=Lt(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=Jt.Transfer;e=Lt(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=Jt.AssignWithSeed;e=Lt(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Jt.Assign;e=Lt(o,{programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Jt.CreateWithSeed,r=Lt(e,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Gt({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Dt;"basePubkey"in t&&"seed"in t?e.add(Ee.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Co,programId:this.programId})):e.add(Ee.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Co,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Jt.InitializeNonceAccount,r=Lt(e,{authorized:Ot(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vn,isSigner:!1,isWritable:!1},{pubkey:en,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Gt(o)}static nonceAdvance(t){const e=Jt.AdvanceNonceAccount,r=Lt(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Gt(o)}static nonceWithdraw(t){const e=Jt.WithdrawNonceAccount,r=Lt(e,{lamports:t.lamports});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Vn,isSigner:!1,isWritable:!1},{pubkey:en,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Jt.AuthorizeNonceAccount,r=Lt(e,{authorized:Ot(t.newAuthorizedPubkey.toBuffer())});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=Jt.AllocateWithSeed;e=Lt(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Jt.Allocate;e=Lt(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}}Ee.programId=new ut("11111111111111111111111111111111");const ff=_r-300;class Pr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Pr.chunkSize)+1+1)}static async load(t,e,r,o,i){{const O=await t.getMinimumBalanceForRentExemption(i.length),L=await t.getAccountInfo(r.publicKey,"confirmed");let P=null;if(L!==null){if(L.executable)return console.error("Program load failed, account is already executable"),!1;L.data.length!==i.length&&(P=P||new Dt,P.add(Ee.allocate({accountPubkey:r.publicKey,space:i.length}))),L.owner.equals(o)||(P=P||new Dt,P.add(Ee.assign({accountPubkey:r.publicKey,programId:o}))),L.lamports<O&&(P=P||new Dt,P.add(Ee.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:O-L.lamports})))}else P=new Dt().add(Ee.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:O>0?O:1,space:i.length,programId:o}));P!==null&&await No(t,P,[e,r],{commitment:"confirmed"})}const a=U.struct([U.u32("instruction"),U.u32("offset"),U.u32("bytesLength"),U.u32("bytesLengthPadding"),U.seq(U.u8("byte"),U.offset(U.u32(),-8),"bytes")]),f=Pr.chunkSize;let d=0,A=i,b=[];for(;A.length>0;){const O=A.slice(0,f),L=_t.alloc(f+16);a.encode({instruction:0,offset:d,bytes:O,bytesLength:0,bytesLengthPadding:0},L);const P=new Dt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:L});b.push(No(t,P,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await vr(1e3/4),d+=f,A=A.slice(f)}await Promise.all(b);{const O=U.struct([U.u32("instruction")]),L=_t.alloc(O.span);O.encode({instruction:1},L);const P=new Dt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1}],programId:o,data:L}),z="processed",D=await t.sendTransaction(P,[e,r],{preflightCommitment:z}),{context:N,value:$}=await t.confirmTransaction({signature:D,lastValidBlockHeight:P.lastValidBlockHeight,blockhash:P.recentBlockhash},z);if($.err)throw new Error(`Transaction ${D} failed (${JSON.stringify($)})`);for(;;){try{if(await t.getSlot({commitment:z})>N.slot)break}catch{}await new Promise(V=>setTimeout(V,Math.round(wc/2)))}}return!0}}Pr.chunkSize=ff;const df=new ut("BPFLoader2111111111111111111111111111111111");class pf{static getMinNumSignatures(t){return Pr.getMinNumSignatures(t)}static load(t,e,r,o,i){return Pr.load(t,e,r,i,o)}}function yf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yo,oa;function gf(){if(oa)return yo;oa=1;var n=Object.prototype.toString,t=Object.keys||function(r){var o=[];for(var i in r)o.push(i);return o};function e(r,o){var i,a,f,d,A,b,O;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),o);if(O=n.call(r),O==="[object Array]"){for(f="[",a=r.length-1,i=0;i<a;i++)f+=e(r[i],!0)+",";return a>-1&&(f+=e(r[i],!0)),f+"]"}else if(O==="[object Object]"){for(d=t(r).sort(),a=d.length,f="",i=0;i<a;)A=d[i],b=e(r[A],!1),b!==void 0&&(f&&(f+=","),f+=JSON.stringify(A)+":"+b),i++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return o?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return yo=function(r){var o=e(r,!1);if(o!==void 0)return""+o},yo}var mf=gf(),sa=yf(mf);const hn=32;function go(n){let t=0;for(;n>1;)n/=2,t++;return t}function wf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class _c{constructor(t,e,r,o,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=go(wf(t+hn+1))-go(hn)-1,r=this.getSlotsInEpoch(e),o=t-(r-hn);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[o,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*hn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+go(hn)):this.slotsPerEpoch}}var bf=globalThis.fetch;class Ef extends Il{constructor(t,e,r){const o=i=>{const a=Rl(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function _f(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const aa=56;class Mo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=_f(Rf,t),r=t.length-aa;Ht(r>=0,"lookup table is invalid"),Ht(r%32===0,"lookup table is invalid");const o=r/32,{addresses:i}=U.struct([U.seq(Ct(),o,"addresses")]).decode(t.slice(aa));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(a=>new ut(a))}}}const Rf={index:1,layout:U.struct([U.u32("typeIndex"),rn("deactivationSlot"),U.nu64("lastExtendedSlot"),U.u8("lastExtendedStartIndex"),U.u8(),U.seq(Ct(),U.offset(U.u8(),-1),"authority")])},Af=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function If(n){const t=n.match(Af);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,o,i]=t,a=n.startsWith("https:")?"wss:":"ws:",f=o==null?null:parseInt(o.slice(1),10),d=f==null?"":`:${f+1}`;return`${a}//${r}${d}${i}`}const ae=xn(es(ut),lt(),n=>new ut(n)),Rc=rs([lt(),se("base64")]),ls=xn(es(_t),Rc,n=>_t.from(n[0],"base64")),Ac=30*1e3;function Sf(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Xt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...o}=n;t=r,e=o}return{commitment:t,config:e}}function ca(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Ic(n){return Ce([ct({jsonrpc:se("2.0"),id:lt(),result:n}),ct({jsonrpc:se("2.0"),id:lt(),error:ct({code:on(),message:lt(),data:wt(jh())})})])}const vf=Ic(on());function Bt(n){return xn(Ic(n),vf,t=>"error"in t?t:{...t,result:ft(t.result,n)})}function fe(n){return Bt(ct({context:ct({slot:X()}),value:n}))}function _i(n){return ct({context:ct({slot:X()}),value:n})}function mo(n,t){return n===0?new Lr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new je(t)}const kf=ct({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),Tf=Bt(dt(pt(ct({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:wt(pt(X()))})))),xf=dt(ct({slot:X(),prioritizationFee:X()})),Bf=ct({total:X(),validator:X(),foundation:X(),epoch:X()}),Of=ct({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:wt(X()),transactionCount:wt(X())}),Nf=ct({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:nr(),firstNormalEpoch:X(),firstNormalSlot:X()}),Cf=tc(lt(),dt(X())),Dr=pt(Ce([ct({}),lt()])),Mf=ct({err:Dr}),Lf=se("receivedSignature"),Pf=ct({"solana-core":lt(),"feature-set":wt(X())}),Uf=ct({program:lt(),programId:ae,parsed:on()}),Df=ct({programId:ae,accounts:dt(ae),data:lt()}),ua=fe(ct({err:pt(Ce([ct({}),lt()])),logs:pt(dt(lt())),accounts:wt(pt(dt(pt(ct({executable:nr(),owner:lt(),lamports:X(),data:dt(lt()),rentEpoch:wt(X())}))))),unitsConsumed:wt(X()),returnData:wt(pt(ct({programId:lt(),data:rs([lt(),se("base64")])}))),innerInstructions:wt(pt(dt(ct({index:X(),instructions:dt(Ce([Uf,Df]))}))))})),Hf=fe(ct({byIdentity:tc(lt(),dt(X())),range:ct({firstSlot:X(),lastSlot:X()})}));function zf(n,t,e,r,o,i){const a=e||bf;let f;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(b,O)=>{const L=await new Promise((P,z)=>{try{r(b,O,(D,N)=>P([D,N]))}catch(D){z(D)}});return await a(...L)}),new wl(async(b,O)=>{const L={method:"POST",body:b,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},zd)};try{let P=5,z,D=500;for(;d?z=await d(n,L):z=await a(n,L),!(z.status!==429||o===!0||(P-=1,P===0));)console.error(`Server responded with ${z.status} ${z.statusText}.  Retrying after ${D}ms delay...`),await vr(D),D*=2;const N=await z.text();z.ok?O(null,N):O(new Error(`${z.status} ${z.statusText}: ${N}`))}catch(P){P instanceof Error&&O(P)}},{})}function Ff(n){return(t,e)=>new Promise((r,o)=>{n.request(t,e,(i,a)=>{if(i){o(i);return}r(a)})})}function Kf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(i=>n.request(i.methodName,i.args));n.request(o,(i,a)=>{if(i){r(i);return}e(a)})})}const qf=Bt(kf),Wf=Bt(Bf),Vf=Bt(xf),$f=Bt(Of),Gf=Bt(Nf),jf=Bt(Cf),Yf=Bt(X()),Zf=fe(ct({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:dt(ae)})),Lo=ct({amount:lt(),uiAmount:pt(X()),decimals:X(),uiAmountString:wt(lt())}),Xf=fe(dt(ct({address:ae,amount:lt(),uiAmount:pt(X()),decimals:X(),uiAmountString:wt(lt())}))),Jf=fe(dt(ct({pubkey:ae,account:ct({executable:nr(),owner:ae,lamports:X(),data:ls,rentEpoch:X()})}))),Po=ct({program:lt(),parsed:on(),space:X()}),Qf=fe(dt(ct({pubkey:ae,account:ct({executable:nr(),owner:ae,lamports:X(),data:Po,rentEpoch:X()})}))),td=fe(dt(ct({lamports:X(),address:ae}))),Rn=ct({executable:nr(),owner:ae,lamports:X(),data:ls,rentEpoch:X()}),ed=ct({pubkey:ae,account:Rn}),rd=xn(Ce([es(_t),Po]),Ce([Rc,Po]),n=>Array.isArray(n)?ft(n,ls):n),Uo=ct({executable:nr(),owner:ae,lamports:X(),data:rd,rentEpoch:X()}),nd=ct({pubkey:ae,account:Uo}),id=ct({state:Ce([se("active"),se("inactive"),se("activating"),se("deactivating")]),active:X(),inactive:X()}),od=Bt(dt(ct({signature:lt(),slot:X(),err:Dr,memo:pt(lt()),blockTime:wt(pt(X()))}))),sd=Bt(dt(ct({signature:lt(),slot:X(),err:Dr,memo:pt(lt()),blockTime:wt(pt(X()))}))),ad=ct({subscription:X(),result:_i(Rn)}),cd=ct({pubkey:ae,account:Rn}),ud=ct({subscription:X(),result:_i(cd)}),hd=ct({parent:X(),slot:X(),root:X()}),ld=ct({subscription:X(),result:hd}),fd=Ce([ct({type:Ce([se("firstShredReceived"),se("completed"),se("optimisticConfirmation"),se("root")]),slot:X(),timestamp:X()}),ct({type:se("createdBank"),parent:X(),slot:X(),timestamp:X()}),ct({type:se("frozen"),slot:X(),timestamp:X(),stats:ct({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),ct({type:se("dead"),slot:X(),timestamp:X(),err:lt()})]),dd=ct({subscription:X(),result:fd}),pd=ct({subscription:X(),result:_i(Ce([Mf,Lf]))}),yd=ct({subscription:X(),result:X()}),gd=ct({pubkey:lt(),gossip:pt(lt()),tpu:pt(lt()),rpc:pt(lt()),version:pt(lt())}),ha=ct({votePubkey:lt(),nodePubkey:lt(),activatedStake:X(),epochVoteAccount:nr(),epochCredits:dt(rs([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:pt(X())}),md=Bt(ct({current:dt(ha),delinquent:dt(ha)})),wd=Ce([se("processed"),se("confirmed"),se("finalized")]),bd=ct({slot:X(),confirmations:pt(X()),err:Dr,confirmationStatus:wt(wd)}),Ed=fe(dt(pt(bd))),_d=Bt(X()),Sc=ct({accountKey:ae,writableIndexes:dt(X()),readonlyIndexes:dt(X())}),fs=ct({signatures:dt(lt()),message:ct({accountKeys:dt(lt()),header:ct({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:dt(ct({accounts:dt(X()),data:lt(),programIdIndex:X()})),recentBlockhash:lt(),addressTableLookups:wt(dt(Sc))})}),vc=ct({pubkey:ae,signer:nr(),writable:nr(),source:wt(Ce([se("transaction"),se("lookupTable")]))}),kc=ct({accountKeys:dt(vc),signatures:dt(lt())}),Tc=ct({parsed:on(),program:lt(),programId:ae}),xc=ct({accounts:dt(ae),data:lt(),programId:ae}),Rd=Ce([xc,Tc]),Ad=Ce([ct({parsed:on(),program:lt(),programId:lt()}),ct({accounts:dt(lt()),data:lt(),programId:lt()})]),Bc=xn(Rd,Ad,n=>"accounts"in n?ft(n,xc):ft(n,Tc)),Oc=ct({signatures:dt(lt()),message:ct({accountKeys:dt(vc),instructions:dt(Bc),recentBlockhash:lt(),addressTableLookups:wt(pt(dt(Sc)))})}),ii=ct({accountIndex:X(),mint:lt(),owner:wt(lt()),programId:wt(lt()),uiTokenAmount:Lo}),Nc=ct({writable:dt(ae),readonly:dt(ae)}),Ri=ct({err:Dr,fee:X(),innerInstructions:wt(pt(dt(ct({index:X(),instructions:dt(ct({accounts:dt(X()),data:lt(),programIdIndex:X()}))})))),preBalances:dt(X()),postBalances:dt(X()),logMessages:wt(pt(dt(lt()))),preTokenBalances:wt(pt(dt(ii))),postTokenBalances:wt(pt(dt(ii))),loadedAddresses:wt(Nc),computeUnitsConsumed:wt(X())}),ds=ct({err:Dr,fee:X(),innerInstructions:wt(pt(dt(ct({index:X(),instructions:dt(Bc)})))),preBalances:dt(X()),postBalances:dt(X()),logMessages:wt(pt(dt(lt()))),preTokenBalances:wt(pt(dt(ii))),postTokenBalances:wt(pt(dt(ii))),loadedAddresses:wt(Nc),computeUnitsConsumed:wt(X())}),sn=Ce([se(0),se("legacy")]),Hr=ct({pubkey:lt(),lamports:X(),postBalance:pt(X()),rewardType:pt(lt()),commission:wt(pt(X()))}),Id=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:fs,meta:pt(Ri),version:wt(sn)})),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),Sd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),vd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:kc,meta:pt(Ri),version:wt(sn)})),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),kd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:Oc,meta:pt(ds),version:wt(sn)})),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),Td=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:kc,meta:pt(ds),version:wt(sn)})),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),xd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),rewards:wt(dt(Hr)),blockTime:pt(X()),blockHeight:pt(X())}))),Bd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:fs,meta:pt(Ri)})),rewards:wt(dt(Hr)),blockTime:pt(X())}))),la=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),signatures:dt(lt()),blockTime:pt(X())}))),wo=Bt(pt(ct({slot:X(),meta:pt(Ri),blockTime:wt(pt(X())),transaction:fs,version:wt(sn)}))),zn=Bt(pt(ct({slot:X(),transaction:Oc,meta:pt(ds),blockTime:wt(pt(X())),version:wt(sn)}))),Od=fe(ct({blockhash:lt(),lastValidBlockHeight:X()})),Nd=fe(nr()),Cd=ct({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),Md=Bt(dt(Cd)),Ld=fe(pt(ct({feeCalculator:ct({lamportsPerSignature:X()})}))),Pd=Bt(lt()),Ud=Bt(lt()),Dd=ct({err:Dr,logs:dt(lt()),signature:lt()}),Hd=ct({result:_i(Dd),subscription:X()}),zd={"solana-client":"js/1.0.0-maintenance"};class Cc{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const A={};return async b=>{const{commitment:O,config:L}=Xt(b),P=this._buildArgs([],O,void 0,L),z=sa(P);return A[z]=A[z]??(async()=>{try{const D=await this._rpcRequest("getBlockHeight",P),N=ft(D,Bt(X()));if("error"in N)throw new mt(N.error,"failed to get block height information");return N.result}finally{delete A[z]}})(),await A[z]}})();let r,o,i,a,f,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,f=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=Sf(t),this._rpcWsEndpoint=r||If(t),this._rpcClient=zf(t,o,i,a,f,d),this._rpcRequest=Ff(this._rpcClient),this._rpcBatchRequest=Kf(this._rpcClient),this._rpcWebSocket=new Ef(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,void 0,o),a=await this._rpcRequest("getBalance",i),f=ft(a,fe(X()));if("error"in f)throw new mt(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=ft(e,Bt(pt(X())));if("error"in r)throw new mt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ft(t,Bt(X()));if("error"in e)throw new mt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ft(t,Yf);if("error"in e)throw new mt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=ft(r,Zf);if("error"in o)throw new mt(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),i=ft(o,fe(Lo));if("error"in i)throw new mt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),i=ft(o,fe(Lo));if("error"in i)throw new mt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:i}=Xt(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const f=this._buildArgs(a,o,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",f),A=ft(d,Jf);if("error"in A)throw new mt(A.error,`failed to get token accounts owned by account ${t.toBase58()}`);return A.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const i=this._buildArgs(o,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),f=ft(a,Qf);if("error"in f)throw new mt(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),i=ft(o,td);if("error"in i)throw new mt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),i=ft(o,Xf);if("error"in i)throw new mt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"base64",o),a=await this._rpcRequest("getAccountInfo",i),f=ft(a,fe(pt(Rn)));if("error"in f)throw new mt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),a=await this._rpcRequest("getAccountInfo",i),f=ft(a,fe(pt(Uo)));if("error"in f)throw new mt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(A=>A.toBase58()),a=this._buildArgs([i],r,"jsonParsed",o),f=await this._rpcRequest("getMultipleAccounts",a),d=ft(f,fe(dt(pt(Uo))));if("error"in d)throw new mt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(A=>A.toBase58()),a=this._buildArgs([i],r,"base64",o),f=await this._rpcRequest("getMultipleAccounts",a),d=ft(f,fe(dt(pt(Rn))));if("error"in d)throw new mt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:i}=Xt(e),a=this._buildArgs([t.toBase58()],o,void 0,{...i,epoch:r??i?.epoch}),f=await this._rpcRequest("getStakeActivation",a),d=ft(f,Bt(id));if("error"in d)throw new mt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=Xt(e),{encoding:i,...a}=o||{},f=this._buildArgs([t.toBase58()],r,i||"base64",{...a,...a.filters?{filters:ca(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",f),A=dt(ed),b=a.withContext===!0?ft(d,fe(A)):ft(d,Bt(A));if("error"in b)throw new mt(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),a=await this._rpcRequest("getProgramAccounts",i),f=ft(a,Bt(dt(nd)));if("error"in f)throw new mt(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let o;try{o=Ae.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ht(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,i=!1;const a=new Promise((d,A)=>{try{r=this.onSignature(e,(O,L)=>{r=void 0;const P={context:L,value:O};d({__type:ar.PROCESSED,response:P})},t);const b=new Promise(O=>{r==null?O():o=this._onSubscriptionStateChange(r,L=>{L==="subscribed"&&O()})});(async()=>{if(await b,i)return;const O=await this.getSignatureStatus(e);if(i||O==null)return;const{context:L,value:P}=O;if(P!=null)if(P?.err)A(P.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(P.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(P.confirmationStatus==="processed"||P.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:ar.PROCESSED,response:{context:L,value:P}})}})()}catch(b){A(b)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let i=!1;const a=new Promise(O=>{const L=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let P=await L();if(!i){for(;P<=r;)if(await vr(1e3),i||(P=await L(),i))return;O({__type:ar.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),A=this.getCancellationPromise(e);let b;try{const O=await Promise.race([A,d,a]);if(O.__type===ar.PROCESSED)b=O.response;else throw new ss(o)}finally{i=!0,f()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:i,signature:a}}){let f=!1;const d=new Promise(P=>{let z=i,D=null;const N=async()=>{try{const{context:$,value:V}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return D=$.slot,V?.nonce}catch{return z}};(async()=>{if(z=await N(),!f)for(;;){if(i!==z){P({__type:ar.NONCE_INVALID,slotInWhichNonceDidAdvance:D});return}if(await vr(2e3),f||(z=await N(),f))return}})()}),{abortConfirmation:A,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),O=this.getCancellationPromise(e);let L;try{const P=await Promise.race([O,b,d]);if(P.__type===ar.PROCESSED)L=P.response;else{let z;for(;;){const D=await this.getSignatureStatus(a);if(D==null)break;if(D.context.slot<(P.slotInWhichNonceDidAdvance??r)){await vr(400);continue}z=D;break}if(z?.value){const D=t||"finalized",{confirmationStatus:N}=z.value;switch(D){case"processed":case"recent":if(N!=="processed"&&N!=="confirmed"&&N!=="finalized")throw new Vr(a);break;case"confirmed":case"single":case"singleGossip":if(N!=="confirmed"&&N!=="finalized")throw new Vr(a);break;case"finalized":case"max":case"root":if(N!=="finalized")throw new Vr(a);break;default:}L={context:z.context,value:{err:z.value.err}}}else throw new Vr(a)}}finally{f=!0,A()}return L}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(d=>{let A=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{A=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:ar.TIMED_OUT,timeoutMs:A}),A)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let f;try{const d=await Promise.race([a,o]);if(d.__type===ar.PROCESSED)f=d.response;else throw new as(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return f}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ft(t,Bt(dt(gd)));if("error"in e)throw new mt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=ft(r,md);if("error"in o)throw new mt(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",o),a=ft(i,Bt(X()));if("error"in a)throw new mt(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",o),a=ft(i,Bt(lt()));if("error"in a)throw new mt(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),i=ft(o,Bt(dt(ae)));if("error"in i)throw new mt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);Ht(o.length===1);const i=o[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),i=ft(o,Ed);if("error"in i)throw new mt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",o),a=ft(i,Bt(X()));if("error"in a)throw new mt(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=ft(r,qf);if("error"in o)throw new mt(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:i}=Xt(r),a=this._buildArgs([t.map(A=>A.toBase58())],o,void 0,{...i,epoch:e??i?.epoch}),f=await this._rpcRequest("getInflationReward",a),d=ft(f,Tf);if("error"in d)throw new mt(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ft(t,Wf);if("error"in e)throw new mt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",o),a=ft(i,$f);if("error"in a)throw new mt(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ft(t,Gf);if("error"in e)throw new mt(e.error,"failed to get epoch schedule");const r=e.result;return new _c(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ft(t,jf);if("error"in e)throw new mt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ft(o,_d);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=ft(e,Md);if("error"in r)throw new mt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ft(o,Ld);if("error"in i)throw new mt(i.error,"failed to get fee calculator");const{context:a,value:f}=i.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ot(t.serialize()).toString("base64"),o=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",o),a=ft(i,fe(pt(X())));if("error"in a)throw new mt(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(a=>a.toBase58()),r=e?.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),i=ft(o,Vf);if("error"in i)throw new mt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",o),a=ft(i,Od);if("error"in a)throw new mt(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t],r,void 0,o),a=await this._rpcRequest("isBlockhashValid",i),f=ft(a,Nd);if("error"in f)throw new mt(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ft(t,Bt(Pf));if("error"in e)throw new mt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ft(t,Bt(lt()));if("error"in e)throw new mt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),a=await this._rpcRequest("getBlock",i);try{switch(o?.transactionDetails){case"accounts":{const f=ft(a,vd);if("error"in f)throw f.error;return f.result}case"none":{const f=ft(a,Sd);if("error"in f)throw f.error;return f.result}default:{const f=ft(a,Id);if("error"in f)throw f.error;const{result:d}=f;return d?{...d,transactions:d.transactions.map(({transaction:A,meta:b,version:O})=>({meta:b,transaction:{...A,message:mo(O,A.message)},version:O}))}:null}}}catch(f){throw new mt(f,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),a=await this._rpcRequest("getBlock",i);try{switch(o?.transactionDetails){case"accounts":{const f=ft(a,Td);if("error"in f)throw f.error;return f.result}case"none":{const f=ft(a,xd);if("error"in f)throw f.error;return f.result}default:{const f=ft(a,kd);if("error"in f)throw f.error;return f.result}}}catch(f){throw new mt(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:f,...d}=t;r=f,e=d}const o=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",o),a=ft(i,Hf);if("error"in a)throw new mt(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),a=await this._rpcRequest("getTransaction",i),f=ft(a,wo);if("error"in f)throw new mt(f.error,"failed to get transaction");const d=f.result;return d&&{...d,transaction:{...d.transaction,message:mo(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),a=await this._rpcRequest("getTransaction",i),f=ft(a,zn);if("error"in f)throw new mt(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(i)).map(d=>{const A=ft(d,zn);if("error"in A)throw new mt(A.error,"failed to get transactions");return A.result})}async getTransactions(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,o)}));return(await this._rpcBatchRequest(i)).map(d=>{const A=ft(d,wo);if("error"in A)throw new mt(A.error,"failed to get transactions");const b=A.result;return b&&{...b,transaction:{...b.transaction,message:mo(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getBlock",r),i=ft(o,Bd);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const f={...a,transactions:a.transactions.map(({transaction:d,meta:A})=>{const b=new je(d.message);return{meta:A,transaction:{...d,message:b}}})};return{...f,transactions:f.transactions.map(({transaction:d,meta:A})=>({meta:A,transaction:Dt.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",o),a=ft(i,Bt(dt(X())));if("error"in a)throw new mt(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=ft(o,la);if("error"in i)throw new mt(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=ft(o,la);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getTransaction",r),i=ft(o,wo);if("error"in i)throw new mt(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const f=new je(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:Dt.populate(f,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getTransaction",r),i=ft(o,zn);if("error"in i)throw new mt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const f=ft(a,zn);if("error"in f)throw new mt(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},i=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(o.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>a));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(o.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),a=ft(i,od);if("error"in a)throw new mt(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",o),a=ft(i,sd);if("error"in a)throw new mt(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=new Mo({key:t,state:Mo.deserialize(o.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=Ei.fromAccountData(o.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=ft(r,Pd);if("error"in o)throw new mt(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await vr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ac;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await vr(wc/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",o),a=ft(i,fe(X()));if("error"in a)throw new mt(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const D=t.serialize(),N=_t.from(D).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const $=e||{};$.encoding="base64","commitment"in $||($.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&($.innerInstructions=e.innerInstructions);const V=[N,$],H=await this._rpcRequest("simulateTransaction",V),rt=ft(H,ua);if("error"in rt)throw new Error("failed to simulate transaction: "+rt.error.message);return rt.result}let o;if(t instanceof Dt){let z=t;o=new Dt,o.feePayer=z.feePayer,o.instructions=t.instructions,o.nonceInfo=z.nonceInfo,o.signatures=z.signatures}else o=Dt.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(o.nonceInfo&&i)o.sign(...i);else{let z=this._disableBlockhashCaching;for(;;){const D=await this._blockhashWithExpiryBlockHeight(z);if(o.lastValidBlockHeight=D.lastValidBlockHeight,o.recentBlockhash=D.blockhash,!i)break;if(o.sign(...i),!o.signature)throw new Error("!signature");const N=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(N)&&!this._blockhashInfo.transactionSignatures.includes(N)){this._blockhashInfo.simulatedSignatures.push(N);break}else z=!0}}const a=o._compile(),f=a.serialize(),A=o._serialize(f).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const z=(Array.isArray(r)?r:a.nonProgramIds()).map(D=>D.toBase58());b.accounts={encoding:"base64",addresses:z}}i&&(b.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(b.innerInstructions=e.innerInstructions);const O=[A,b],L=await this._rpcRequest("simulateTransaction",O),P=ft(L,ua);if("error"in P){let z;if("data"in P.error&&(z=P.error.data.logs,z&&Array.isArray(z))){const D=`
    `,N=D+z.join(D);console.error(P.error.message,N)}throw new _n({action:"simulate",signature:"",transactionMessage:P.error.message,logs:z})}return P.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let a=this._disableBlockhashCaching;for(;;){const f=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ot(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,i=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),i&&(r.preflightCommitment=i);const a=[t,r],f=await this._rpcRequest("sendTransaction",a),d=ft(f,Ud);if("error"in d){let A;throw"data"in d.error&&(A=d.error.data.logs),new _n({action:o?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:A})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const o=this._subscriptionStateChangeCallbacksByHash[t];o&&o.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const f=await this._rpcWebSocket.call(a,i);this._setSubscription(r,{...o,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=o.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:f}),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=o;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=ft(t,ad);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=sa([t.method,e]),i=this._subscriptionsByHash[o];return i===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[o];Ht(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:o,config:i}=Xt(r),a=this._buildArgs([t.toBase58()],o||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=ft(t,ud);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const{commitment:i,config:a}=Xt(r),f=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(o?{filters:ca(o)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=ft(t,Hd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=ft(t,ld);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=ft(t,dd);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const i=e||this._commitment;if(i||r||o){let a={};r&&(a.encoding=r),i&&(a.commitment=i),o&&(a=Object.assign(a,o)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=ft(t,pd);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){e(a.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return i}onSignatureWithOptions(t,e,r){const{commitment:o,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],o,void 0,i),f=this._makeSubscription({callback:(d,A)=>{e(d,A);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=ft(t,yd);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Nr{constructor(t){this._keypair=void 0,this._keypair=t??ra()}static generate(){return new Nr(ra())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),i=ni(o);for(let a=0;a<32;a++)if(r[a]!==i[a])throw new Error("provided secretKey is invalid")}return new Nr({publicKey:r,secretKey:t})}static fromSeed(t){const e=ni(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Nr({publicKey:e,secretKey:r})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const lr=Object.freeze({CreateLookupTable:{index:0,layout:U.struct([U.u32("instruction"),rn("recentSlot"),U.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:U.struct([U.u32("instruction")])},ExtendLookupTable:{index:2,layout:U.struct([U.u32("instruction"),rn(),U.seq(Ct(),U.offset(U.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:U.struct([U.u32("instruction")])},CloseLookupTable:{index:4,layout:U.struct([U.u32("instruction")])}});class Fd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=U.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(lr))if(a.index==r){o=i;break}if(!o)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return o}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Kt(lr.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Kt(lr.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new ut(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(ps.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class ps{constructor(){}static createLookupTable(t){const[e,r]=ut.findProgramAddressSync([t.authority.toBuffer(),Xa().encode(t.recentSlot)],this.programId),o=lr.CreateLookupTable,i=Lt(o,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ee.programId,isSigner:!1,isWritable:!1}];return[new Gt({programId:this.programId,keys:a,data:i}),e]}static freezeLookupTable(t){const e=lr.FreezeLookupTable,r=Lt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:o,data:r})}static extendLookupTable(t){const e=lr.ExtendLookupTable,r=Lt(e,{addresses:t.addresses.map(i=>i.toBytes())}),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&o.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ee.programId,isSigner:!1,isWritable:!1}),new Gt({programId:this.programId,keys:o,data:r})}static deactivateLookupTable(t){const e=lr.DeactivateLookupTable,r=Lt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:o,data:r})}static closeLookupTable(t){const e=lr.CloseLookupTable,r=Lt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Gt({programId:this.programId,keys:o,data:r})}}ps.programId=new ut("AddressLookupTab1e1111111111111111111111111");class Kd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=U.u8("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(tr))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return o}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Kt(tr.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Kt(tr.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Kt(tr.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Kt(tr.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(An.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const tr=Object.freeze({RequestUnits:{index:0,layout:U.struct([U.u8("instruction"),U.u32("units"),U.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:U.struct([U.u8("instruction"),U.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:U.struct([U.u8("instruction"),U.u32("units")])},SetComputeUnitPrice:{index:3,layout:U.struct([U.u8("instruction"),rn("microLamports")])}});class An{constructor(){}static requestUnits(t){const e=tr.RequestUnits,r=Lt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=tr.RequestHeapFrame,r=Lt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=tr.SetComputeUnitLimit,r=Lt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=tr.SetComputeUnitPrice,r=Lt(e,{microLamports:BigInt(t.microLamports)});return new Gt({keys:[],programId:this.programId,data:r})}}An.programId=new ut("ComputeBudget111111111111111111111111111111");const fa=64,da=32,pa=64,ya=U.struct([U.u8("numSignatures"),U.u8("padding"),U.u16("signatureOffset"),U.u16("signatureInstructionIndex"),U.u16("publicKeyOffset"),U.u16("publicKeyInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u16("messageInstructionIndex")]);class Ai{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,instructionIndex:i}=t;Ht(e.length===da,`Public Key must be ${da} bytes but received ${e.length} bytes`),Ht(o.length===pa,`Signature must be ${pa} bytes but received ${o.length} bytes`);const a=ya.span,f=a+e.length,d=f+o.length,A=1,b=_t.alloc(d+r.length),O=i??65535;return ya.encode({numSignatures:A,padding:0,signatureOffset:f,signatureInstructionIndex:O,publicKeyOffset:a,publicKeyInstructionIndex:O,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:O},b),b.fill(e,a),b.fill(o,f),b.fill(r,d),new Gt({keys:[],programId:Ai.programId,data:b})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ht(e.length===fa,`Private key must be ${fa} bytes but received ${e.length} bytes`);try{const i=Nr.fromSecretKey(e),a=i.publicKey.toBytes(),f=is(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:f,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Ai.programId=new ut("Ed25519SigVerify111111111111111111111111111");const qd=(n,t)=>{const e=mi.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};mi.utils.isValidPrivateKey;const Wd=mi.getPublicKey,ga=32,bo=20,ma=64,Vd=11,Eo=U.struct([U.u8("numSignatures"),U.u16("signatureOffset"),U.u8("signatureInstructionIndex"),U.u16("ethAddressOffset"),U.u8("ethAddressInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u8("messageInstructionIndex"),U.blob(20,"ethAddress"),U.blob(64,"signature"),U.u8("recoveryId")]);class jr{constructor(){}static publicKeyToEthAddress(t){Ht(t.length===ma,`Public key must be ${ma} bytes but received ${t.length} bytes`);try{return _t.from(Xs(Ot(t))).slice(-bo)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,recoveryId:i,instructionIndex:a}=t;return jr.createInstructionWithEthAddress({ethAddress:jr.publicKeyToEthAddress(e),message:r,signature:o,recoveryId:i,instructionIndex:a})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:o,recoveryId:i,instructionIndex:a=0}=t;let f;typeof e=="string"?e.startsWith("0x")?f=_t.from(e.substr(2),"hex"):f=_t.from(e,"hex"):f=e,Ht(f.length===bo,`Address must be ${bo} bytes but received ${f.length} bytes`);const d=1+Vd,A=d,b=d+f.length,O=b+o.length+1,L=1,P=_t.alloc(Eo.span+r.length);return Eo.encode({numSignatures:L,signatureOffset:b,signatureInstructionIndex:a,ethAddressOffset:A,ethAddressInstructionIndex:a,messageDataOffset:O,messageDataSize:r.length,messageInstructionIndex:a,signature:Ot(o),ethAddress:Ot(f),recoveryId:i},P),P.fill(Ot(r),Eo.span),new Gt({keys:[],programId:jr.programId,data:P})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ht(e.length===ga,`Private key must be ${ga} bytes but received ${e.length} bytes`);try{const i=Ot(e),a=Wd(i,!1).slice(1),f=_t.from(Xs(Ot(r))),[d,A]=qd(f,i);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:d,recoveryId:A,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}jr.programId=new ut("KeccakSecp256k11111111111111111111111111111");var Mc;const Lc=new ut("StakeConfig11111111111111111111111111111111");class Pc{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Bn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Mc=Bn;Bn.default=new Mc(0,0,ut.default);class $d{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=U.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(be))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a StakeInstruction");return o}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Kt(be.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Pc(new ut(e.staker),new ut(e.withdrawer)),lockup:new Bn(r.unixTimestamp,r.epoch,new ut(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Kt(be.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Kt(be.Authorize,t.data),o={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:o,authorityOwner:i}=Kt(be.AuthorizeWithSeed,t.data),a={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:o,authorityOwner:new ut(i),newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(a.custodianPubkey=t.keys[3].pubkey),a}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Kt(be.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Kt(be.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Kt(be.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Kt(be.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Ii.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const be=Object.freeze({Initialize:{index:0,layout:U.struct([U.u32("instruction"),Zl(),Xl()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Ct("newAuthorized"),U.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:U.struct([U.u32("instruction")])},Split:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Withdraw:{index:4,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Deactivate:{index:5,layout:U.struct([U.u32("instruction")])},Merge:{index:7,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:U.struct([U.u32("instruction"),Ct("newAuthorized"),U.u32("stakeAuthorizationType"),Tr("authoritySeed"),Ct("authorityOwner")])}}),Gd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ii{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:o}=t,i=o||Bn.default,a=be.Initialize,f=Lt(a,{authorized:{staker:Ot(r.staker.toBuffer()),withdrawer:Ot(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ot(i.custodian.toBuffer())}}),d={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new Gt(d)}static createAccountWithSeed(t){const e=new Dt;e.add(Ee.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static createAccount(t){const e=new Dt;e.add(Ee.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:o}=t,i=be.Delegate,a=Lt(i);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:Lc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,stakeAuthorizationType:i,custodianPubkey:a}=t,f=be.Authorize,d=Lt(f,{newAuthorized:Ot(o.toBuffer()),stakeAuthorizationType:i.index}),A=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&A.push({pubkey:a,isSigner:!0,isWritable:!1}),new Dt().add({keys:A,programId:this.programId,data:d})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:o,authorityOwner:i,newAuthorizedPubkey:a,stakeAuthorizationType:f,custodianPubkey:d}=t,A=be.AuthorizeWithSeed,b=Lt(A,{newAuthorized:Ot(a.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:o,authorityOwner:Ot(i.toBuffer())}),O=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1}];return d&&O.push({pubkey:d,isSigner:!0,isWritable:!1}),new Dt().add({keys:O,programId:this.programId,data:b})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:o,lamports:i}=t,a=be.Split,f=Lt(a,{lamports:i});return new Gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(t,e){const r=new Dt;return r.add(Ee.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,basePubkey:a,seed:f,lamports:d}=t,A=new Dt;return A.add(Ee.allocate({accountPubkey:i,basePubkey:a,seed:f,space:this.space,programId:this.programId})),e&&e>0&&A.add(Ee.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),A.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,lamports:d}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:o}=t,i=be.Merge,a=Lt(i);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:o,lamports:i,custodianPubkey:a}=t,f=be.Withdraw,d=Lt(f,{lamports:i}),A=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&A.push({pubkey:a,isSigner:!0,isWritable:!1}),new Dt().add({keys:A,programId:this.programId,data:d})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,o=be.Deactivate,i=Lt(o);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Ii.programId=new ut("Stake11111111111111111111111111111111111111");Ii.space=200;class Uc{constructor(t,e,r,o){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=o}}class jd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=U.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(er))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a VoteInstruction");return o}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Kt(er.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Uc(new ut(e.nodePubkey),new ut(e.authorizedVoter),new ut(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Kt(er.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:o,voteAuthorizationType:i}}=Kt(er.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ut(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new ut(o),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Kt(er.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(an.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const er=Object.freeze({InitializeAccount:{index:0,layout:U.struct([U.u32("instruction"),Jl()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Ct("newAuthorized"),U.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Ql()])}}),Yd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class an{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:o}=t,i=er.InitializeAccount,a=Lt(i,{voteInit:{nodePubkey:Ot(o.nodePubkey.toBuffer()),authorizedVoter:Ot(o.authorizedVoter.toBuffer()),authorizedWithdrawer:Ot(o.authorizedWithdrawer.toBuffer()),commission:o.commission}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new Gt(f)}static createAccount(t){const e=new Dt;return e.add(Ee.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,voteAuthorizationType:i}=t,a=er.Authorize,f=Lt(a,{newAuthorized:Ot(o.toBuffer()),voteAuthorizationType:i.index}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:d,programId:this.programId,data:f})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:o,newAuthorizedPubkey:i,voteAuthorizationType:a,votePubkey:f}=t,d=er.AuthorizeWithSeed,A=Lt(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ot(r.toBuffer()),currentAuthorityDerivedKeySeed:o,newAuthorized:Ot(i.toBuffer()),voteAuthorizationType:a.index}}),b=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Dt().add({keys:b,programId:this.programId,data:A})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:o,toPubkey:i}=t,a=er.Withdraw,f=Lt(a,{lamports:o}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:d,programId:this.programId,data:f})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return an.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:o}=t,i=er.UpdateValidatorIdentity,a=Lt(i),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:f,programId:this.programId,data:a})}}an.programId=new ut("Vote111111111111111111111111111111111111111");an.space=3762;const Dc=new ut("Va1idator1nfo111111111111111111111111111111"),Zd=ct({name:lt(),website:wt(lt()),details:wt(lt()),iconUrl:wt(lt()),keybaseUsername:wt(lt())});class ys{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Pe(e)!==2)return null;const o=[];for(let i=0;i<2;i++){const a=new ut(Ue(e,0,rr)),f=Qe(e)===1;o.push({publicKey:a,isSigner:f})}if(o[0].publicKey.equals(Dc)&&o[1].isSigner){const i=Tr().decode(_t.from(e)),a=JSON.parse(i);return Ja(a,Zd),new ys(o[1].publicKey,a)}return null}}const Xd=new ut("Vote111111111111111111111111111111111111111"),Jd=U.struct([Ct("nodePubkey"),Ct("authorizedWithdrawer"),U.u8("commission"),U.nu64(),U.seq(U.struct([U.nu64("slot"),U.u32("confirmationCount")]),U.offset(U.u32(),-8),"votes"),U.u8("rootSlotValid"),U.nu64("rootSlot"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),Ct("authorizedVoter")]),U.offset(U.u32(),-8),"authorizedVoters"),U.struct([U.seq(U.struct([Ct("authorizedPubkey"),U.nu64("epochOfLastAuthorizedSwitch"),U.nu64("targetEpoch")]),32,"buf"),U.nu64("idx"),U.u8("isEmpty")],"priorVoters"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),U.nu64("credits"),U.nu64("prevCredits")]),U.offset(U.u32(),-8),"epochCredits"),U.struct([U.nu64("slot"),U.nu64("timestamp")],"lastTimestamp")]);class gs{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Jd.decode(Ot(t),4);let o=r.rootSlot;return r.rootSlotValid||(o=null),new gs({nodePubkey:new ut(r.nodePubkey),authorizedWithdrawer:new ut(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:o,authorizedVoters:r.authorizedVoters.map(Qd),priorVoters:t0(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Qd({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new ut(n)}}function wa({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new ut(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function t0({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(wa),...n.slice(0,t).map(wa)]}const ba={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function e0(n,t){const e=t===!1?"http":"https";if(!n)return ba[e].devnet;const r=ba[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function r0(n,t,e,r){let o,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(o=e,i=r):i=e;const a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},f=await n.sendRawTransaction(t,a),d=i&&i.commitment,b=(await(o?n.confirmTransaction(o,d):n.confirmTransaction(f,d))).value;if(b.err)throw f!=null?new _n({action:a?.skipPreflight?"send":"simulate",signature:f,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${f} failed (${JSON.stringify(b)})`);return f}const n0=1e9,i0=Object.freeze(Object.defineProperty({__proto__:null,Account:Gl,AddressLookupTableAccount:Mo,AddressLookupTableInstruction:Fd,AddressLookupTableProgram:ps,Authorized:Pc,BLOCKHASH_CACHE_TIMEOUT_MS:Ac,BPF_LOADER_DEPRECATED_PROGRAM_ID:jl,BPF_LOADER_PROGRAM_ID:df,BpfLoader:pf,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:tr,ComputeBudgetInstruction:Kd,ComputeBudgetProgram:An,Connection:Cc,Ed25519Program:Ai,Enum:Vl,EpochSchedule:_c,FeeCalculatorLayout:bc,Keypair:Nr,LAMPORTS_PER_SOL:n0,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:lr,Loader:Pr,Lockup:Bn,MAX_SEED_LENGTH:yc,Message:je,MessageAccountKeys:En,MessageV0:Lr,NONCE_ACCOUNT_LENGTH:Co,NonceAccount:Ei,PACKET_DATA_SIZE:_r,PUBLIC_KEY_LENGTH:rr,PublicKey:ut,SIGNATURE_LENGTH_IN_BYTES:bn,SOLANA_SCHEMA:dn,STAKE_CONFIG_ID:Lc,STAKE_INSTRUCTION_LAYOUTS:be,SYSTEM_INSTRUCTION_LAYOUTS:Jt,SYSVAR_CLOCK_PUBKEY:Xe,SYSVAR_EPOCH_SCHEDULE_PUBKEY:of,SYSVAR_INSTRUCTIONS_PUBKEY:sf,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Vn,SYSVAR_RENT_PUBKEY:en,SYSVAR_REWARDS_PUBKEY:af,SYSVAR_SLOT_HASHES_PUBKEY:cf,SYSVAR_SLOT_HISTORY_PUBKEY:uf,SYSVAR_STAKE_HISTORY_PUBKEY:$n,Secp256k1Program:jr,SendTransactionError:_n,SolanaJSONRPCError:mt,SolanaJSONRPCErrorCode:hf,StakeAuthorizationLayout:Gd,StakeInstruction:$d,StakeProgram:Ii,Struct:os,SystemInstruction:lf,SystemProgram:Ee,Transaction:Dt,TransactionExpiredBlockheightExceededError:ss,TransactionExpiredNonceInvalidError:Vr,TransactionExpiredTimeoutError:as,TransactionInstruction:Gt,TransactionMessage:us,TransactionStatus:ar,VALIDATOR_INFO_KEY:Dc,VERSION_PREFIX_MASK:wi,VOTE_PROGRAM_ID:Xd,ValidatorInfo:ys,VersionedMessage:cs,VersionedTransaction:hs,VoteAccount:gs,VoteAuthorizationLayout:Yd,VoteInit:Uc,VoteInstruction:jd,VoteProgram:an,clusterApiUrl:e0,sendAndConfirmRawTransaction:r0,sendAndConfirmTransaction:No},Symbol.toStringTag,{value:"Module"}));var Fn={exports:{}},Ea;function o0(){if(Ea)return Fn.exports;Ea=1;const n=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,i=new RegExp("^"+o.source),a=new RegExp(o.source+r.source,"gu"),f=new RegExp("\\d+"+r.source,"gu"),d=(L,P,z)=>{let D=!1,N=!1,$=!1;for(let V=0;V<L.length;V++){const H=L[V];D&&n.test(H)?(L=L.slice(0,V)+"-"+L.slice(V),D=!1,$=N,N=!0,V++):N&&$&&t.test(H)?(L=L.slice(0,V-1)+"-"+L.slice(V-1),$=N,N=!1,D=!0):(D=P(H)===H&&z(H)!==H,$=N,N=z(H)===H&&P(H)!==H)}return L},A=(L,P)=>(e.lastIndex=0,L.replace(e,z=>P(z))),b=(L,P)=>(a.lastIndex=0,f.lastIndex=0,L.replace(a,(z,D)=>P(D)).replace(f,z=>P(z))),O=(L,P)=>{if(!(typeof L=="string"||Array.isArray(L)))throw new TypeError("Expected the input to be `string | string[]`");if(P={pascalCase:!1,preserveConsecutiveUppercase:!1,...P},Array.isArray(L)?L=L.map($=>$.trim()).filter($=>$.length).join("-"):L=L.trim(),L.length===0)return"";const z=P.locale===!1?$=>$.toLowerCase():$=>$.toLocaleLowerCase(P.locale),D=P.locale===!1?$=>$.toUpperCase():$=>$.toLocaleUpperCase(P.locale);return L.length===1?P.pascalCase?D(L):z(L):(L!==z(L)&&(L=d(L,z,D)),L=L.replace(i,""),P.preserveConsecutiveUppercase?L=A(L,z):L=z(L),P.pascalCase&&(L=D(L.charAt(0))+L.slice(1)),b(L,D))};return Fn.exports=O,Fn.exports.default=O,Fn.exports}o0();var ln={},yt={},_a;function Ra(){if(_a)return yt;_a=1;class n{constructor(g,h){if(!Number.isInteger(g))throw new TypeError("span must be an integer");this.span=g,this.property=h}makeDestinationObject(){return{}}decode(g,h){throw new Error("Layout is abstract")}encode(g,h,c){throw new Error("Layout is abstract")}getSpan(g,h){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(g){const h=Object.create(this.constructor.prototype);return Object.assign(h,this),h.property=g,h}fromArray(g){}}yt.Layout=n;function t(R,g){return g.property?R+"["+g.property+"]":R}yt.nameWithProperty=t;function e(R,g){if(typeof R!="function")throw new TypeError("Class must be constructor");if(R.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(g&&g instanceof n))throw new TypeError("layout must be a Layout");if(g.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");R.layout_=g,g.boundConstructor_=R,g.makeDestinationObject=()=>new R,Object.defineProperty(R.prototype,"encode",{value:function(h,c){return g.encode(this,h,c)},writable:!0}),Object.defineProperty(R,"decode",{value:function(h,c){return g.decode(h,c)},writable:!0})}yt.bindConstructorLayout=e;class r extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class o extends r{constructor(g,h){if(g===void 0&&(g=1),!Number.isInteger(g)||0>=g)throw new TypeError("elementSpan must be a (positive) integer");super(-1,h),this.elementSpan=g}isCount(){return!0}decode(g,h){h===void 0&&(h=0);const c=g.length-h;return Math.floor(c/this.elementSpan)}encode(g,h,c){return 0}}class i extends r{constructor(g,h,c){if(!(g instanceof n))throw new TypeError("layout must be a Layout");if(h===void 0)h=0;else if(!Number.isInteger(h))throw new TypeError("offset must be integer or undefined");super(g.span,c||g.property),this.layout=g,this.offset=h}isCount(){return this.layout instanceof a||this.layout instanceof f}decode(g,h){return h===void 0&&(h=0),this.layout.decode(g,h+this.offset)}encode(g,h,c){return c===void 0&&(c=0),this.layout.encode(g,h,c+this.offset)}}class a extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readUIntLE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeUIntLE(g,c,this.span),this.span}}class f extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readUIntBE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeUIntBE(g,c,this.span),this.span}}class d extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readIntLE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeIntLE(g,c,this.span),this.span}}class A extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readIntBE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeIntBE(g,c,this.span),this.span}}const b=Math.pow(2,32);function O(R){const g=Math.floor(R/b),h=R-g*b;return{hi32:g,lo32:h}}function L(R,g){return R*b+g}class P extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32LE(h),u=g.readUInt32LE(h+4);return L(u,c)}encode(g,h,c){c===void 0&&(c=0);const u=O(g);return h.writeUInt32LE(u.lo32,c),h.writeUInt32LE(u.hi32,c+4),8}}class z extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32BE(h),u=g.readUInt32BE(h+4);return L(c,u)}encode(g,h,c){c===void 0&&(c=0);const u=O(g);return h.writeUInt32BE(u.hi32,c),h.writeUInt32BE(u.lo32,c+4),8}}class D extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32LE(h),u=g.readInt32LE(h+4);return L(u,c)}encode(g,h,c){c===void 0&&(c=0);const u=O(g);return h.writeUInt32LE(u.lo32,c),h.writeInt32LE(u.hi32,c+4),8}}class N extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readInt32BE(h),u=g.readUInt32BE(h+4);return L(c,u)}encode(g,h,c){c===void 0&&(c=0);const u=O(g);return h.writeInt32BE(u.hi32,c),h.writeUInt32BE(u.lo32,c+4),8}}class $ extends n{constructor(g){super(4,g)}decode(g,h){return h===void 0&&(h=0),g.readFloatLE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeFloatLE(g,c),4}}class V extends n{constructor(g){super(4,g)}decode(g,h){return h===void 0&&(h=0),g.readFloatBE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeFloatBE(g,c),4}}class H extends n{constructor(g){super(8,g)}decode(g,h){return h===void 0&&(h=0),g.readDoubleLE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeDoubleLE(g,c),8}}class rt extends n{constructor(g){super(8,g)}decode(g,h){return h===void 0&&(h=0),g.readDoubleBE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeDoubleBE(g,c),8}}class at extends n{constructor(g,h,c){if(!(g instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(h instanceof r&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let u=-1;!(h instanceof r)&&0<g.span&&(u=h*g.span),super(u,c),this.elementLayout=g,this.count=h}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0,u=this.count;if(u instanceof r&&(u=u.decode(g,h)),0<this.elementLayout.span)c=u*this.elementLayout.span;else{let _=0;for(;_<u;)c+=this.elementLayout.getSpan(g,h+c),++_}return c}decode(g,h){h===void 0&&(h=0);const c=[];let u=0,_=this.count;for(_ instanceof r&&(_=_.decode(g,h));u<_;)c.push(this.elementLayout.decode(g,h)),h+=this.elementLayout.getSpan(g,h),u+=1;return c}encode(g,h,c){c===void 0&&(c=0);const u=this.elementLayout,_=g.reduce((B,F)=>B+u.encode(F,h,c+B),0);return this.count instanceof r&&this.count.encode(g.length,h,c),_}}class st extends n{constructor(g,h,c){if(!(Array.isArray(g)&&g.reduce((_,B)=>_&&B instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof h=="boolean"&&c===void 0&&(c=h,h=void 0);for(const _ of g)if(0>_.span&&_.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let u=-1;try{u=g.reduce((_,B)=>_+B.getSpan(),0)}catch{}super(u,h),this.fields=g,this.decodePrefixes=!!c}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;try{c=this.fields.reduce((u,_)=>{const B=_.getSpan(g,h);return h+=B,u+B},0)}catch{throw new RangeError("indeterminate span")}return c}decode(g,h){h===void 0&&(h=0);const c=this.makeDestinationObject();for(const u of this.fields)if(u.property!==void 0&&(c[u.property]=u.decode(g,h)),h+=u.getSpan(g,h),this.decodePrefixes&&g.length===h)break;return c}encode(g,h,c){c===void 0&&(c=0);const u=c;let _=0,B=0;for(const F of this.fields){let tt=F.span;if(B=0<tt?tt:0,F.property!==void 0){const ht=g[F.property];ht!==void 0&&(B=F.encode(ht,h,c),0>tt&&(tt=F.getSpan(h,c)))}_=c,c+=tt}return _+B-u}fromArray(g){const h=this.makeDestinationObject();for(const c of this.fields)c.property!==void 0&&0<g.length&&(h[c.property]=g.shift());return h}layoutFor(g){if(typeof g!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===g)return h}offsetOf(g){if(typeof g!="string")throw new TypeError("property must be string");let h=0;for(const c of this.fields){if(c.property===g)return h;0>c.span?h=-1:0<=h&&(h+=c.span)}}}class ot{constructor(g){this.property=g}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class nt extends ot{constructor(g,h){if(!(g instanceof r&&g.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(h||g.property||"variant"),this.layout=g}decode(g,h){return this.layout.decode(g,h)}encode(g,h,c){return this.layout.encode(g,h,c)}}class j extends n{constructor(g,h,c){const u=g instanceof a||g instanceof f;if(u)g=new nt(new i(g));else if(g instanceof r&&g.isCount())g=new nt(g);else if(!(g instanceof ot))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(h===void 0&&(h=null),!(h===null||h instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(h!==null){if(0>h.span)throw new Error("defaultLayout must have constant span");h.property===void 0&&(h=h.replicate("content"))}let _=-1;h&&(_=h.span,0<=_&&u&&(_+=g.layout.span)),super(_,c),this.discriminator=g,this.usesPrefixDiscriminator=u,this.defaultLayout=h,this.registry={};let B=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(F){return B(F)},this.configGetSourceVariant=function(F){B=F.bind(this)}}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);const c=this.getVariant(g,h);if(!c)throw new Error("unable to determine span for unrecognized variant");return c.getSpan(g,h)}defaultGetSourceVariant(g){if(g.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&g.hasOwnProperty(this.defaultLayout.property))return;const h=this.registry[g[this.discriminator.property]];if(h&&(!h.layout||g.hasOwnProperty(h.property)))return h}else for(const h in this.registry){const c=this.registry[h];if(g.hasOwnProperty(c.property))return c}throw new Error("unable to infer src variant")}decode(g,h){h===void 0&&(h=0);let c;const u=this.discriminator,_=u.decode(g,h);let B=this.registry[_];if(B===void 0){let F=0;B=this.defaultLayout,this.usesPrefixDiscriminator&&(F=u.layout.span),c=this.makeDestinationObject(),c[u.property]=_,c[B.property]=this.defaultLayout.decode(g,h+F)}else c=B.decode(g,h);return c}encode(g,h,c){c===void 0&&(c=0);const u=this.getSourceVariant(g);if(u===void 0){const _=this.discriminator,B=this.defaultLayout;let F=0;return this.usesPrefixDiscriminator&&(F=_.layout.span),_.encode(g[_.property],h,c),F+B.encode(g[B.property],h,c+F)}return u.encode(g,h,c)}addVariant(g,h,c){const u=new q(this,g,h,c);return this.registry[g]=u,u}getVariant(g,h){let c=g;return Ut.isBuffer(g)&&(h===void 0&&(h=0),c=this.discriminator.decode(g,h)),this.registry[c]}}class q extends n{constructor(g,h,c,u){if(!(g instanceof j))throw new TypeError("union must be a Union");if(!Number.isInteger(h)||0>h)throw new TypeError("variant must be a (non-negative) integer");if(typeof c=="string"&&u===void 0&&(u=c,c=null),c){if(!(c instanceof n))throw new TypeError("layout must be a Layout");if(g.defaultLayout!==null&&0<=c.span&&c.span>g.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof u!="string")throw new TypeError("variant must have a String property")}let _=g.span;0>g.span&&(_=c?c.span:0,0<=_&&g.usesPrefixDiscriminator&&(_+=g.discriminator.layout.span)),super(_,u),this.union=g,this.variant=h,this.layout=c||null}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;return this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),c+this.layout.getSpan(g,h+c)}decode(g,h){const c=this.makeDestinationObject();if(h===void 0&&(h=0),this!==this.union.getVariant(g,h))throw new Error("variant mismatch");let u=0;return this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout?c[this.property]=this.layout.decode(g,h+u):this.property?c[this.property]=!0:this.union.usesPrefixDiscriminator&&(c[this.union.discriminator.property]=this.variant),c}encode(g,h,c){c===void 0&&(c=0);let u=0;if(this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout&&!g.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,h,c);let _=u;if(this.layout&&(this.layout.encode(g[this.property],h,c+u),_+=this.layout.getSpan(h,c+u),0<=this.union.span&&_>this.union.span))throw new Error("encoded variant overruns containing union");return _}fromArray(g){if(this.layout)return this.layout.fromArray(g)}}function G(R){return 0>R&&(R+=4294967296),R}class x extends n{constructor(g,h,c){if(!(g instanceof a||g instanceof f))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof h=="string"&&c===void 0&&(c=h,h=void 0),4<g.span)throw new RangeError("word cannot exceed 32 bits");super(g.span,c),this.word=g,this.msb=!!h,this.fields=[];let u=0;this._packedSetValue=function(_){return u=G(_),this},this._packedGetValue=function(){return u}}decode(g,h){const c=this.makeDestinationObject();h===void 0&&(h=0);const u=this.word.decode(g,h);this._packedSetValue(u);for(const _ of this.fields)_.property!==void 0&&(c[_.property]=_.decode(u));return c}encode(g,h,c){c===void 0&&(c=0);const u=this.word.decode(h,c);this._packedSetValue(u);for(const _ of this.fields)if(_.property!==void 0){const B=g[_.property];B!==void 0&&_.encode(B)}return this.word.encode(this._packedGetValue(),h,c)}addField(g,h){const c=new I(this,g,h);return this.fields.push(c),c}addBoolean(g){const h=new s(this,g);return this.fields.push(h),h}fieldFor(g){if(typeof g!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===g)return h}}class I{constructor(g,h,c){if(!(g instanceof x))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(h)||0>=h)throw new TypeError("bits must be positive integer");const u=8*g.span,_=g.fields.reduce((B,F)=>B+F.bits,0);if(h+_>u)throw new Error("bits too long for span remainder ("+(u-_)+" of "+u+" remain)");this.container=g,this.bits=h,this.valueMask=(1<<h)-1,h===32&&(this.valueMask=4294967295),this.start=_,this.container.msb&&(this.start=u-_-h),this.wordMask=G(this.valueMask<<this.start),this.property=c}decode(){const g=this.container._packedGetValue();return G(g&this.wordMask)>>>this.start}encode(g){if(!Number.isInteger(g)||g!==G(g&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const h=this.container._packedGetValue(),c=G(g<<this.start);this.container._packedSetValue(G(h&~this.wordMask)|c)}}class s extends I{constructor(g,h){super(g,1,h)}decode(g,h){return!!I.prototype.decode.call(this,g,h)}encode(g){return typeof g=="boolean"&&(g=+g),I.prototype.encode.call(this,g)}}class l extends n{constructor(g,h){if(!(g instanceof r&&g.isCount()||Number.isInteger(g)&&0<=g))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let c=-1;g instanceof r||(c=g),super(c,h),this.length=g}getSpan(g,h){let c=this.span;return 0>c&&(c=this.length.decode(g,h)),c}decode(g,h){h===void 0&&(h=0);let c=this.span;return 0>c&&(c=this.length.decode(g,h)),g.slice(h,h+c)}encode(g,h,c){let u=this.length;if(this.length instanceof r&&(u=g.length),!(Ut.isBuffer(g)&&u===g.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+u+") Buffer as src");if(c+u>h.length)throw new RangeError("encoding overruns Buffer");return h.write(g.toString("hex"),c,u,"hex"),this.length instanceof r&&this.length.encode(u,h,c),u}}class E extends n{constructor(g){super(-1,g)}getSpan(g,h){if(!Ut.isBuffer(g))throw new TypeError("b must be a Buffer");h===void 0&&(h=0);let c=h;for(;c<g.length&&g[c]!==0;)c+=1;return 1+c-h}decode(g,h,c){h===void 0&&(h=0);let u=this.getSpan(g,h);return g.slice(h,h+u-1).toString("utf-8")}encode(g,h,c){c===void 0&&(c=0),typeof g!="string"&&(g=g.toString());const u=new Ut(g,"utf8"),_=u.length;if(c+_>h.length)throw new RangeError("encoding overruns Buffer");return u.copy(h,c),h[c+_]=0,_+1}}class S extends n{constructor(g,h){if(typeof g=="string"&&h===void 0&&(h=g,g=void 0),g===void 0)g=-1;else if(!Number.isInteger(g))throw new TypeError("maxSpan must be an integer");super(-1,h),this.maxSpan=g}getSpan(g,h){if(!Ut.isBuffer(g))throw new TypeError("b must be a Buffer");return h===void 0&&(h=0),g.length-h}decode(g,h,c){h===void 0&&(h=0);let u=this.getSpan(g,h);if(0<=this.maxSpan&&this.maxSpan<u)throw new RangeError("text length exceeds maxSpan");return g.slice(h,h+u).toString("utf-8")}encode(g,h,c){c===void 0&&(c=0),typeof g!="string"&&(g=g.toString());const u=new Ut(g,"utf8"),_=u.length;if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");if(c+_>h.length)throw new RangeError("encoding overruns Buffer");return u.copy(h,c),_}}class v extends n{constructor(g,h){super(0,h),this.value=g}decode(g,h,c){return this.value}encode(g,h,c){return 0}}return yt.ExternalLayout=r,yt.GreedyCount=o,yt.OffsetLayout=i,yt.UInt=a,yt.UIntBE=f,yt.Int=d,yt.IntBE=A,yt.Float=$,yt.FloatBE=V,yt.Double=H,yt.DoubleBE=rt,yt.Sequence=at,yt.Structure=st,yt.UnionDiscriminator=ot,yt.UnionLayoutDiscriminator=nt,yt.Union=j,yt.VariantLayout=q,yt.BitStructure=x,yt.BitField=I,yt.Boolean=s,yt.Blob=l,yt.CString=E,yt.UTF8=S,yt.Constant=v,yt.greedy=(R,g)=>new o(R,g),yt.offset=(R,g,h)=>new i(R,g,h),yt.u8=R=>new a(1,R),yt.u16=R=>new a(2,R),yt.u24=R=>new a(3,R),yt.u32=R=>new a(4,R),yt.u40=R=>new a(5,R),yt.u48=R=>new a(6,R),yt.nu64=R=>new P(R),yt.u16be=R=>new f(2,R),yt.u24be=R=>new f(3,R),yt.u32be=R=>new f(4,R),yt.u40be=R=>new f(5,R),yt.u48be=R=>new f(6,R),yt.nu64be=R=>new z(R),yt.s8=R=>new d(1,R),yt.s16=R=>new d(2,R),yt.s24=R=>new d(3,R),yt.s32=R=>new d(4,R),yt.s40=R=>new d(5,R),yt.s48=R=>new d(6,R),yt.ns64=R=>new D(R),yt.s16be=R=>new A(2,R),yt.s24be=R=>new A(3,R),yt.s32be=R=>new A(4,R),yt.s40be=R=>new A(5,R),yt.s48be=R=>new A(6,R),yt.ns64be=R=>new N(R),yt.f32=R=>new $(R),yt.f32be=R=>new V(R),yt.f64=R=>new H(R),yt.f64be=R=>new rt(R),yt.struct=(R,g,h)=>new st(R,g,h),yt.bits=(R,g,h)=>new x(R,g,h),yt.seq=(R,g,h)=>new at(R,g,h),yt.union=(R,g,h)=>new j(R,g,h),yt.unionLayoutDiscriminator=(R,g)=>new nt(R,g),yt.blob=(R,g)=>new l(R,g),yt.cstr=R=>new E(R),yt.utf8=(R,g)=>new S(R,g),yt.const=(R,g)=>new v(R,g),yt}const s0=Zo(i0);var Aa;function a0(){return Aa||(Aa=1,function(n){var t=ln&&ln.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(n,"__esModule",{value:!0}),n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0,n.u64=f,n.i64=d,n.u128=A,n.i128=b,n.u256=O,n.i256=L,n.publicKey=z,n.option=N,n.bool=$,n.vec=rt,n.tagged=at,n.vecU8=st,n.str=ot,n.rustEnum=nt,n.array=j,n.map=G;const e=Ra(),r=s0,o=t(Jo());var i=Ra();Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return i.struct}});class a extends e.Layout{constructor(I,s,l){super(I,l),this.blob=(0,e.blob)(I),this.signed=s}decode(I,s=0){const l=new o.default(this.blob.decode(I,s),10,"le");return this.signed?l.fromTwos(this.span*8).clone():l}encode(I,s,l=0){return this.signed&&(I=I.toTwos(this.span*8)),this.blob.encode(I.toArrayLike(Ut,"le",this.span),s,l)}}function f(x){return new a(8,!1,x)}function d(x){return new a(8,!0,x)}function A(x){return new a(16,!1,x)}function b(x){return new a(16,!0,x)}function O(x){return new a(32,!1,x)}function L(x){return new a(32,!0,x)}class P extends e.Layout{constructor(I,s,l,E){super(I.span,E),this.layout=I,this.decoder=s,this.encoder=l}decode(I,s){return this.decoder(this.layout.decode(I,s))}encode(I,s,l){return this.layout.encode(this.encoder(I),s,l)}getSpan(I,s){return this.layout.getSpan(I,s)}}function z(x){return new P((0,e.blob)(32),I=>new r.PublicKey(I),I=>I.toBuffer(),x)}class D extends e.Layout{constructor(I,s){super(-1,s),this.layout=I,this.discriminator=(0,e.u8)()}encode(I,s,l=0){return I==null?this.discriminator.encode(0,s,l):(this.discriminator.encode(1,s,l),this.layout.encode(I,s,l+1)+1)}decode(I,s=0){const l=this.discriminator.decode(I,s);if(l===0)return null;if(l===1)return this.layout.decode(I,s+1);throw new Error("Invalid option "+this.property)}getSpan(I,s=0){const l=this.discriminator.decode(I,s);if(l===0)return 1;if(l===1)return this.layout.getSpan(I,s+1)+1;throw new Error("Invalid option "+this.property)}}function N(x,I){return new D(x,I)}function $(x){return new P((0,e.u8)(),V,H,x)}function V(x){if(x===0)return!1;if(x===1)return!0;throw new Error("Invalid bool: "+x)}function H(x){return x?1:0}function rt(x,I){const s=(0,e.u32)("length"),l=(0,e.struct)([s,(0,e.seq)(x,(0,e.offset)(s,-s.span),"values")]);return new P(l,({values:E})=>E,E=>({values:E}),I)}function at(x,I,s){const l=(0,e.struct)([f("tag"),I.replicate("data")]);function E({tag:S,data:v}){if(!S.eq(x))throw new Error("Invalid tag, expected: "+x.toString("hex")+", got: "+S.toString("hex"));return v}return new P(l,E,S=>({tag:x,data:S}),s)}function st(x){const I=(0,e.u32)("length"),s=(0,e.struct)([I,(0,e.blob)((0,e.offset)(I,-I.span),"data")]);return new P(s,({data:l})=>l,l=>({data:l}),x)}function ot(x){return new P(st(),I=>I.toString("utf-8"),I=>Ut.from(I,"utf-8"),x)}function nt(x,I,s){const l=(0,e.union)(s??(0,e.u8)(),I);return x.forEach((E,S)=>l.addVariant(S,E,E.property)),l}function j(x,I,s){const l=(0,e.struct)([(0,e.seq)(x,I,"values")]);return new P(l,({values:E})=>E,E=>({values:E}),s)}class q extends e.Layout{constructor(I,s,l){super(I.span+s.span,l),this.keyLayout=I,this.valueLayout=s}decode(I,s){s=s||0;const l=this.keyLayout.decode(I,s),E=this.valueLayout.decode(I,s+this.keyLayout.getSpan(I,s));return[l,E]}encode(I,s,l){l=l||0;const E=this.keyLayout.encode(I[0],s,l),S=this.valueLayout.encode(I[1],s,l+E);return E+S}getSpan(I,s){return this.keyLayout.getSpan(I,s)+this.valueLayout.getSpan(I,s)}}function G(x,I,s){const l=(0,e.u32)("length"),E=(0,e.struct)([l,(0,e.seq)(new q(x,I),(0,e.offset)(l,-l.span),"values")]);return new P(E,({values:S})=>new Map(S),S=>({values:Array.from(S.entries())}),s)}}(ln)),ln}var Ne=a0();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function cn(n){let t=n.length;for(;--t>=0;)n[t]=0}const c0=3,u0=258,Hc=29,h0=256,l0=h0+1+Hc,zc=30,f0=512,d0=new Array((l0+2)*2);cn(d0);const p0=new Array(zc*2);cn(p0);const y0=new Array(f0);cn(y0);const g0=new Array(u0-c0+1);cn(g0);const m0=new Array(Hc);cn(m0);const w0=new Array(zc);cn(w0);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const Do=new Uint8Array(256);for(let n=0;n<256;n++)Do[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Do[254]=Do[254]=1;var _o={exports:{}},Ia;function b0(){return Ia||(Ia=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,A,b){this.fn=d,this.context=A,this.once=b||!1}function i(d,A,b,O,L){if(typeof b!="function")throw new TypeError("The listener must be a function");var P=new o(b,O||d,L),z=e?e+A:A;return d._events[z]?d._events[z].fn?d._events[z]=[d._events[z],P]:d._events[z].push(P):(d._events[z]=P,d._eventsCount++),d}function a(d,A){--d._eventsCount===0?d._events=new r:delete d._events[A]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var A=[],b,O;if(this._eventsCount===0)return A;for(O in b=this._events)t.call(b,O)&&A.push(e?O.slice(1):O);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(b)):A},f.prototype.listeners=function(A){var b=e?e+A:A,O=this._events[b];if(!O)return[];if(O.fn)return[O.fn];for(var L=0,P=O.length,z=new Array(P);L<P;L++)z[L]=O[L].fn;return z},f.prototype.listenerCount=function(A){var b=e?e+A:A,O=this._events[b];return O?O.fn?1:O.length:0},f.prototype.emit=function(A,b,O,L,P,z){var D=e?e+A:A;if(!this._events[D])return!1;var N=this._events[D],$=arguments.length,V,H;if(N.fn){switch(N.once&&this.removeListener(A,N.fn,void 0,!0),$){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,b),!0;case 3:return N.fn.call(N.context,b,O),!0;case 4:return N.fn.call(N.context,b,O,L),!0;case 5:return N.fn.call(N.context,b,O,L,P),!0;case 6:return N.fn.call(N.context,b,O,L,P,z),!0}for(H=1,V=new Array($-1);H<$;H++)V[H-1]=arguments[H];N.fn.apply(N.context,V)}else{var rt=N.length,at;for(H=0;H<rt;H++)switch(N[H].once&&this.removeListener(A,N[H].fn,void 0,!0),$){case 1:N[H].fn.call(N[H].context);break;case 2:N[H].fn.call(N[H].context,b);break;case 3:N[H].fn.call(N[H].context,b,O);break;case 4:N[H].fn.call(N[H].context,b,O,L);break;default:if(!V)for(at=1,V=new Array($-1);at<$;at++)V[at-1]=arguments[at];N[H].fn.apply(N[H].context,V)}}return!0},f.prototype.on=function(A,b,O){return i(this,A,b,O,!1)},f.prototype.once=function(A,b,O){return i(this,A,b,O,!0)},f.prototype.removeListener=function(A,b,O,L){var P=e?e+A:A;if(!this._events[P])return this;if(!b)return a(this,P),this;var z=this._events[P];if(z.fn)z.fn===b&&(!L||z.once)&&(!O||z.context===O)&&a(this,P);else{for(var D=0,N=[],$=z.length;D<$;D++)(z[D].fn!==b||L&&!z[D].once||O&&z[D].context!==O)&&N.push(z[D]);N.length?this._events[P]=N.length===1?N[0]:N:a(this,P)}return this},f.prototype.removeAllListeners=function(A){var b;return A?(b=e?e+A:A,this._events[b]&&a(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(_o)),_o.exports}b0();Ne.struct([Ne.publicKey("authority"),Ne.vecU8("data")]);class E0 extends TypeError{constructor(t,e){let r;const{message:o,...i}=t,{path:a}=t,f=a.length===0?o:"At path: "+a.join(".")+" -- "+o;super(f),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function _0(n){return Yr(n)&&typeof n[Symbol.iterator]=="function"}function Yr(n){return typeof n=="object"&&n!=null}function Ir(n){return typeof n=="string"?JSON.stringify(n):""+n}function R0(n){const{done:t,value:e}=n.next();return t?void 0:e}function A0(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:a}=e,{refinement:f,message:d="Expected a value of type `"+a+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+Ir(r)+"`"}=n;return{value:r,type:a,refinement:f,key:o[o.length-1],path:o,branch:i,...n,message:d}}function*Sa(n,t,e,r){_0(n)||(n=[n]);for(const o of n){const i=A0(o,t,e,r);i&&(yield i)}}function*ms(n,t,e){e===void 0&&(e={});const{path:r=[],branch:o=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:o};if(i&&(n=t.coercer(n,f),a&&t.type!=="type"&&Yr(t.schema)&&Yr(n)&&!Array.isArray(n)))for(const A in n)t.schema[A]===void 0&&delete n[A];let d=!0;for(const A of t.validator(n,f))d=!1,yield[A,void 0];for(let[A,b,O]of t.entries(n,f)){const L=ms(b,O,{path:A===void 0?r:[...r,A],branch:A===void 0?o:[...o,b],coerce:i,mask:a});for(const P of L)P[0]?(d=!1,yield[P[0],void 0]):i&&(b=P[1],A===void 0?n=b:n instanceof Map?n.set(A,b):n instanceof Set?n.add(b):Yr(n)&&(n[A]=b))}if(d)for(const A of t.refiner(n,f))d=!1,yield[A,void 0];d&&(yield[void 0,n])}class Sr{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:o,refiner:i,coercer:a=d=>d,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,o?this.validator=(d,A)=>{const b=o(d,A);return Sa(b,A,this,d)}:this.validator=()=>[],i?this.refiner=(d,A)=>{const b=i(d,A);return Sa(b,A,this,d)}:this.refiner=()=>[]}assert(t){return I0(t,this)}create(t){return Fc(t,this)}is(t){return Kc(t,this)}mask(t){return S0(t,this)}validate(t,e){return e===void 0&&(e={}),On(t,this,e)}}function I0(n,t){const e=On(n,t);if(e[0])throw e[0]}function Fc(n,t){const e=On(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function S0(n,t){const e=On(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Kc(n,t){return!On(n,t)[0]}function On(n,t,e){e===void 0&&(e={});const r=ms(n,t,e),o=R0(r);return o[0]?[new E0(o[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Nn(n,t){return new Sr({type:n,schema:null,validator:t})}function v0(){return Nn("any",()=>!0)}function Ro(n){return new Sr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Ir(t)}})}function k0(){return Nn("boolean",n=>typeof n=="boolean")}function va(n){const t=Ir(n);return new Sr({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+Ir(e)}})}function Kn(n){return new Sr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function Gn(){return Nn("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Ir(n))}function jn(n){return new Sr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function xr(){return Nn("string",n=>typeof n=="string"||"Expected a string, but received: "+Ir(n))}function Rr(n){const t=Object.keys(n);return new Sr({type:"type",schema:n,*entries(e){if(Yr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Yr(e)||"Expected an object, but received: "+Ir(e)}})}function qc(n){const t=n.map(e=>e.type).join(" | ");return new Sr({type:"union",schema:null,coercer(e,r){return(n.find(i=>{const[a]=i.validate(e,{coerce:!0});return!a})||ws()).coercer(e,r)},validator(e,r){const o=[];for(const i of n){const[...a]=ms(e,i,r),[f]=a;if(f[0])for(const[d]of a)d&&o.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Ir(e),...o]}})}function ws(){return Nn("unknown",()=>!0)}function T0(n,t,e){return new Sr({...n,coercer:(r,o)=>Kc(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}function x0(n){return T0(Wc(n),B0,t=>"error"in t?t:{...t,result:Fc(t.result,n)})}const B0=Wc(ws());function Wc(n){return qc([Rr({jsonrpc:va("2.0"),id:xr(),result:n}),Rr({jsonrpc:va("2.0"),id:xr(),error:Rr({code:ws(),message:xr(),data:jn(v0())})})])}function O0(n){return x0(Rr({context:Rr({slot:Gn()}),value:n}))}O0(Rr({err:Kn(qc([Rr({}),xr()])),logs:Kn(Ro(xr())),accounts:jn(Kn(Ro(Kn(Rr({executable:k0(),owner:xr(),lamports:Gn(),data:Ro(xr()),rentEpoch:jn(Gn())}))))),unitsConsumed:jn(Gn())}));var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},J={};Object.defineProperty(J,"__esModule",{value:!0});J.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_VIOLATED=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=J.ANCHOR_ERROR__CONSTRAINT_SPACE=J.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=J.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=J.ANCHOR_ERROR__CONSTRAINT_ZERO=J.ANCHOR_ERROR__CONSTRAINT_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_CLOSE=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=J.ANCHOR_ERROR__CONSTRAINT_STATE=J.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=J.ANCHOR_ERROR__CONSTRAINT_SEEDS=J.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=J.ANCHOR_ERROR__CONSTRAINT_OWNER=J.ANCHOR_ERROR__CONSTRAINT_RAW=J.ANCHOR_ERROR__CONSTRAINT_SIGNER=J.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=J.ANCHOR_ERROR__CONSTRAINT_MUT=J.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=J.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=J.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=J.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=J.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=J.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;J.ANCHOR_ERROR__DEPRECATED=J.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=J.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=J.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=J.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=J.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=J.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=J.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=J.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=J.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=J.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=J.ANCHOR_ERROR__INVALID_PROGRAM_ID=J.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=J.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=J.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=J.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=J.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=J.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=J.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=J.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;J.ANCHOR_ERROR__INSTRUCTION_MISSING=100;J.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;J.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;J.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;J.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;J.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;J.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;J.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;J.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;J.ANCHOR_ERROR__CONSTRAINT_RAW=2003;J.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;J.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;J.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;J.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;J.ANCHOR_ERROR__CONSTRAINT_STATE=2008;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;J.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;J.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;J.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;J.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;J.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;J.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;J.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;J.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;J.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;J.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;J.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;J.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;J.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;J.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;J.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;J.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;J.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;J.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;J.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;J.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;J.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;J.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;J.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;J.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;J.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;J.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;J.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;J.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;J.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;J.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;J.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;J.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;J.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;J.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;J.ANCHOR_ERROR__DEPRECATED=5e3;class He{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var Si=He;function C0(n,t){return t.property?n+"["+t.property+"]":n}class Br extends He{isCount(){throw new Error("ExternalLayout is abstract")}}class Vc extends Br{constructor(t,e,r){if(!(t instanceof He))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof vi||this.layout instanceof $c}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class vi extends He{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class $c extends He{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const Ho=Math.pow(2,32);function Gc(n){const t=Math.floor(n/Ho),e=n-t*Ho;return{hi32:t,lo32:e}}function jc(n,t){return n*Ho+t}class M0 extends He{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),o=t.readUInt32LE(e+4);return jc(o,r)}encode(t,e,r){r===void 0&&(r=0);const o=Gc(t);return e.writeUInt32LE(o.lo32,r),e.writeUInt32LE(o.hi32,r+4),8}}class L0 extends He{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),o=t.readInt32LE(e+4);return jc(o,r)}encode(t,e,r){r===void 0&&(r=0);const o=Gc(t);return e.writeUInt32LE(o.lo32,r),e.writeInt32LE(o.hi32,r+4),8}}class P0 extends He{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,a)=>i&&a instanceof He,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,a)=>i+a.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((o,i)=>{const a=i.getSpan(t,e);return e+=a,o+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const o=r;let i=0,a=0;for(const f of this.fields){let d=f.span;if(a=0<d?d:0,f.property!==void 0){const A=t[f.property];A!==void 0&&(a=f.encode(A,e,r),0>d&&(d=f.getSpan(e,r)))}i=r,r+=d}return i+a-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Yc{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ka extends Yc{constructor(t,e){if(!(t instanceof Br&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class Zc extends He{constructor(t,e,r){const o=t instanceof vi||t instanceof $c;if(o)t=new ka(new Vc(t));else if(t instanceof Br&&t.isCount())t=new ka(t);else if(!(t instanceof Yc))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof He))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&o&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=o,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return a(f)},this.configGetSourceVariant=function(f){a=f.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const o=this.discriminator,i=o.decode(t,e);let a=this.registry[i];if(a===void 0){let f=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(f=o.layout.span),r=this.makeDestinationObject(),r[o.property]=i,r[a.property]=this.defaultLayout.decode(t,e+f)}else r=a.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,a=this.defaultLayout;let f=0;return this.usesPrefixDiscriminator&&(f=i.layout.span),i.encode(t[i.property],e,r),f+a.encode(t[a.property],e,r+f)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new U0(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e){let r=t;return Ut.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class U0 extends He{constructor(t,e,r,o){if(!(t instanceof Zc))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof He))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),i+=this.layout.getSpan(e,r+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class D0 extends He{constructor(t,e){if(!(t instanceof Br&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Br||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Br&&(o=t.length),!(Ut.isBuffer(t)&&o===t.length))throw new TypeError(C0("Blob.encode",this)+" requires (length "+o+") Buffer as src");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,o,"hex"),this.length instanceof Br&&this.length.encode(o,e,r),o}}var H0=(n,t,e)=>new Vc(n,t,e),z0=n=>new vi(1,n),fr=n=>new vi(4,n),F0=n=>new M0(n),dr=n=>new L0(n),me=(n,t,e)=>new P0(n,t,e),Xc=(n,t,e)=>new Zc(n,t,e),Cn=(n,t)=>new D0(n,t);class K0 extends Si{constructor(t){super(-1,t),this.property=t,this.layout=me([fr("length"),fr("lengthPadding"),Cn(H0(fr(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const o={chars:Ut.from(t,"utf8")};return this.layout.encode(o,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return fr().span+fr().span+new wn(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function ki(n){return new K0(n)}function We(n){return Cn(32,n)}const Ke=Xc(fr("instruction"));Ke.addVariant(0,me([dr("lamports"),dr("space"),We("owner")]),"createAccount");Ke.addVariant(1,me([We("owner")]),"assign");Ke.addVariant(2,me([dr("lamports")]),"transfer");Ke.addVariant(3,me([We("base"),ki("seed"),dr("lamports"),dr("space"),We("owner")]),"createAccountWithSeed");Ke.addVariant(4,me([We("authorized")]),"advanceNonceAccount");Ke.addVariant(5,me([dr("lamports")]),"withdrawNonceAccount");Ke.addVariant(6,me([We("authorized")]),"initializeNonceAccount");Ke.addVariant(7,me([We("authorized")]),"authorizeNonceAccount");Ke.addVariant(8,me([dr("space")]),"allocate");Ke.addVariant(9,me([We("base"),ki("seed"),dr("space"),We("owner")]),"allocateWithSeed");Ke.addVariant(10,me([We("base"),ki("seed"),We("owner")]),"assignWithSeed");Ke.addVariant(11,me([dr("lamports"),ki("seed"),We("owner")]),"transferWithSeed");Math.max(...Object.values(Ke.registry).map(n=>n.span));class q0 extends Si{constructor(t,e,r,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function Ta(n){return new q0(Cn(32),t=>new ut(t),t=>t.toBuffer(),n)}me([fr("version"),fr("state"),Ta("authorizedPubkey"),Ta("nonce"),me([F0("lamportsPerSignature")],"feeCalculator")]);new ut("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ut("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var xa={exports:{}};(function(n,t){var e=typeof self<"u"?self:N0,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(a){var f={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function d(s){return s&&DataView.prototype.isPrototypeOf(s)}if(f.arrayBuffer)var A=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(s){return s&&A.indexOf(Object.prototype.toString.call(s))>-1};function O(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(s))throw new TypeError("Invalid character in header field name");return s.toLowerCase()}function L(s){return typeof s!="string"&&(s=String(s)),s}function P(s){var l={next:function(){var E=s.shift();return{done:E===void 0,value:E}}};return f.iterable&&(l[Symbol.iterator]=function(){return l}),l}function z(s){this.map={},s instanceof z?s.forEach(function(l,E){this.append(E,l)},this):Array.isArray(s)?s.forEach(function(l){this.append(l[0],l[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(l){this.append(l,s[l])},this)}z.prototype.append=function(s,l){s=O(s),l=L(l);var E=this.map[s];this.map[s]=E?E+", "+l:l},z.prototype.delete=function(s){delete this.map[O(s)]},z.prototype.get=function(s){return s=O(s),this.has(s)?this.map[s]:null},z.prototype.has=function(s){return this.map.hasOwnProperty(O(s))},z.prototype.set=function(s,l){this.map[O(s)]=L(l)},z.prototype.forEach=function(s,l){for(var E in this.map)this.map.hasOwnProperty(E)&&s.call(l,this.map[E],E,this)},z.prototype.keys=function(){var s=[];return this.forEach(function(l,E){s.push(E)}),P(s)},z.prototype.values=function(){var s=[];return this.forEach(function(l){s.push(l)}),P(s)},z.prototype.entries=function(){var s=[];return this.forEach(function(l,E){s.push([E,l])}),P(s)},f.iterable&&(z.prototype[Symbol.iterator]=z.prototype.entries);function D(s){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}function N(s){return new Promise(function(l,E){s.onload=function(){l(s.result)},s.onerror=function(){E(s.error)}})}function $(s){var l=new FileReader,E=N(l);return l.readAsArrayBuffer(s),E}function V(s){var l=new FileReader,E=N(l);return l.readAsText(s),E}function H(s){for(var l=new Uint8Array(s),E=new Array(l.length),S=0;S<l.length;S++)E[S]=String.fromCharCode(l[S]);return E.join("")}function rt(s){if(s.slice)return s.slice(0);var l=new Uint8Array(s.byteLength);return l.set(new Uint8Array(s)),l.buffer}function at(){return this.bodyUsed=!1,this._initBody=function(s){this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:f.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:f.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():f.arrayBuffer&&f.blob&&d(s)?(this._bodyArrayBuffer=rt(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||b(s))?this._bodyArrayBuffer=rt(s):this._bodyText=s=Object.prototype.toString.call(s):this._bodyText="",this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var s=D(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then($)}),this.text=function(){var s=D(this);if(s)return s;if(this._bodyBlob)return V(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(H(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var st=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ot(s){var l=s.toUpperCase();return st.indexOf(l)>-1?l:s}function nt(s,l){l=l||{};var E=l.body;if(s instanceof nt){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,l.headers||(this.headers=new z(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!E&&s._bodyInit!=null&&(E=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new z(l.headers)),this.method=ot(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(E)}nt.prototype.clone=function(){return new nt(this,{body:this._bodyInit})};function j(s){var l=new FormData;return s.trim().split("&").forEach(function(E){if(E){var S=E.split("="),v=S.shift().replace(/\+/g," "),R=S.join("=").replace(/\+/g," ");l.append(decodeURIComponent(v),decodeURIComponent(R))}}),l}function q(s){var l=new z,E=s.replace(/\r?\n[\t ]+/g," ");return E.split(/\r?\n/).forEach(function(S){var v=S.split(":"),R=v.shift().trim();if(R){var g=v.join(":").trim();l.append(R,g)}}),l}at.call(nt.prototype);function G(s,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new z(l.headers),this.url=l.url||"",this._initBody(s)}at.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new z(this.headers),url:this.url})},G.error=function(){var s=new G(null,{status:0,statusText:""});return s.type="error",s};var x=[301,302,303,307,308];G.redirect=function(s,l){if(x.indexOf(l)===-1)throw new RangeError("Invalid status code");return new G(null,{status:l,headers:{location:s}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(l,E){this.message=l,this.name=E;var S=Error(l);this.stack=S.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function I(s,l){return new Promise(function(E,S){var v=new nt(s,l);if(v.signal&&v.signal.aborted)return S(new a.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function g(){R.abort()}R.onload=function(){var h={status:R.status,statusText:R.statusText,headers:q(R.getAllResponseHeaders()||"")};h.url="responseURL"in R?R.responseURL:h.headers.get("X-Request-URL");var c="response"in R?R.response:R.responseText;E(new G(c,h))},R.onerror=function(){S(new TypeError("Network request failed"))},R.ontimeout=function(){S(new TypeError("Network request failed"))},R.onabort=function(){S(new a.DOMException("Aborted","AbortError"))},R.open(v.method,v.url,!0),v.credentials==="include"?R.withCredentials=!0:v.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&f.blob&&(R.responseType="blob"),v.headers.forEach(function(h,c){R.setRequestHeader(c,h)}),v.signal&&(v.signal.addEventListener("abort",g),R.onreadystatechange=function(){R.readyState===4&&v.signal.removeEventListener("abort",g)}),R.send(typeof v._bodyInit>"u"?null:v._bodyInit)})}return I.polyfill=!0,i.fetch||(i.fetch=I,i.Headers=z,i.Request=nt,i.Response=G),a.Headers=z,a.Request=nt,a.Response=G,a.fetch=I,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,n.exports=t})(xa,xa.exports);Ne.rustEnum([Ne.struct([],"uninitialized"),Ne.struct([Ne.option(Ne.publicKey(),"authorityAddress")],"buffer"),Ne.struct([Ne.publicKey("programdataAddress")],"program"),Ne.struct([Ne.u64("slot"),Ne.option(Ne.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ne.u32());function Ao(n){return new Jc(Cn(8),t=>bs.fromBuffer(t),t=>t.toBuffer(),n)}function qn(n){return new Jc(Cn(32),t=>new ut(t),t=>t.toBuffer(),n)}function Io(n,t){return new W0(n,t)}class Jc extends Si{constructor(t,e,r,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class W0 extends Si{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=fr()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class bs extends wn{toBuffer(){const t=super.toArray().reverse(),e=Ut.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=Ut.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new bs([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}me([qn("mint"),qn("owner"),Ao("amount"),Io(qn(),"delegate"),(n=>{const t=Xc(z0("discriminator"),null,n);return t.addVariant(0,me([]),"uninitialized"),t.addVariant(1,me([]),"initialized"),t.addVariant(2,me([]),"frozen"),t})("state"),Io(Ao(),"isNative"),Ao("delegatedAmount"),Io(qn(),"closeAuthority")]);new ut("11111111111111111111111111111111");const V0="rYhXyYZMT5jDnd3UyXBhi8qvJfmbaZ53sFVV3tP1t4W",$0={address:V0},G0="AJahwq4ZWUwanu1nHqJhkKTPPvAphPnK5N7VKAS5zAmo",j0="Bh9LNKmqzZzagQG3wxdM3dE1FofXZZTe7PhJDkxCAzJ6",Y0="JCfDmHEh9XNGYXD1ePsrf312Rpm59cAzcRWWnW4y36q3",Z0="Ha68VrbwLYziJswsLkipxcRdRHf5nyAx2CJRGJsReMD2",X0="MXWkzcQKRaikEF7u5a8Qx2zxw2WTeVFXGx2btV6hcJC",J0="F3sQx3Xy5u2pKBLUbR3NjhQVt1ZaASNE7p19Ds1iT8Uy",Q0="DXSZ2VGymQpMHMJX2jVboTyPRWhxxD64umjhi23ckfca",tp="7xF4iEeDRcwFML41Ecydwea5uEtYPEvzszH7bdmfNGFD",ep="CMAtAw2ZsnB2nB1jDFSBHbzpy8MYWE2wvNQbjuA3ZL84",rp="dtfBV1T4AmEKHRdKv3iWzJ71EoR1ZQPCiL3gAU8fTQr",np="5a7q2RdFVpSDf29WaoCtPT73p19THNT3pzW3soKVAwYT",ip="38Jc726q9ANJoHWZeJgUfsQgmi4tGTSQ5VfuasdrVDhW",op="38x2ZihNjoPd8ESdPix5aYAbvpioWdwJJyYgkxwss9ir",sp="Ej4tBpRbhH41T8fLyFrgFKqqD8Fqxxwn7pRKuSgjQchg",ap="9yNWsRLFpbbrWyDiM9aXx787gjjkNKUdVEp1NEUqqY4Q",cp="JCwWtYZSVqwYbKNkaBXEJgmNoTJ276Y7Prow1yH3xRYn",up="5W19zULtkABFXxEdSVZLDYSMYzWNMLKkXn1cQ3LpUvZq",hp="4w7zDPvaWzvRebYrHAYTpwrUpU4wytiHGGAQJ91S4SeJ",lp="2cCj8N8rHpvN1JDDrYnKUckFiGFoFQz93eBW2JtauqLo",fp="9jcYaAFUzi72mMEHPAXChsbctj1RACfqrtnRHmxBdFGw",dp="3vVRenYjGTtpfHzav3HKFVNp3zNSVRFdtjBUbpWVnGA2",pp="AjzV7UXwtHCGigTekt4J2JzvBhnAtnHLUJh2D4DV21KX",yp="95jirWbS6SFWTnEpSy9NnjUzRhK6Tcr4sABZ7FM71pxc",gp="3XwSWGKLDzFmgiZd6Y5g6vfHZU3RQctjRpiReuHKxz5G",mp="HXSgfYT5vmQqGQ6F2NnJBKk43rfheT7vhYXzdmEnAGYx",wp="9X5DJ1726icYsop5G5PUhFwLPNsvxKpGVBFiLTdSQ5ci",bp="FMchYUN8ZWv87MefLYoNiTR6SmaS3LuCHimu8LARpeUF",Ep="8T4o3dt5QzU7DnM3nqxgzaJbfLViRfpGiNffm1VpoyYY",_p="8jrbMERCzGyKwAzzoK6F55wUpENjtWbF8HNLHch7wPwM",Rp="EioB1mjxqEUhcVR2QpYpiomkcQQGCugaYYD7ZrXFdASF",Ap="Bb8XqaW3LG393nF9e1jo5QcKReC3puckud6TC5S26yQG",Ip="96ZQCgW52TbSyzT9YmsZEYi7bipXD6sgp11bNtCTEsFf",Sp="7eGGvXWJ3KKsoTaJydvhBLBDEHE1t8GorhcFXVrZeDRH",vp="2uoeHCiMnnCyeNhtvH9oFgYpDArc61m8uhuwQievjmRm",kp="FctNEoX8avV8vcBRK6RSeCgr91JukF9gWDzAFRCRVxHB",Tp="9AGfFhxPUSBqHTVJHWcuHUSBRAS7qc81kmtf9vE9w4bC",xp="AgoJmQ9u8Vb7fnKZG5TLgmUebn4i6gFDq7bnv8f1f6er",Bp="DwMza1FerqCFjSxXW7QHV24EkP32A5YHoxwocSPefLV2",Op="HH8XjHEduoMDohJ2ywBTvTAbJMo1Twh8DUjZBmxrBR5P",Np="2CeqfBbPVcjTrkMMqv8Wc5r7jxE4NYWfkok8nxEcw4PH",Cp="H7FxXMw4gNKoNYiSpsriX35e1WxsLJEvvVaKJ7UYd4yd",Mp="7HFkTjokosBbR6qReEcjFwGsyWte5LZHnq19eobeAvRy",Lp="3PgdnxbkdrViNFMTnsSPHZ64QBEAAHSJCa6eLuF6ktz4",Pp="3d5Tt37DWH3ZNTdzMMRgtkm4ts7jXchaPHhptRqj6EmR",Up="97JwVZqAPTWjGpXo1wfC1J5qGr4UhyYVVeYNS1xTRk15",Dp="6cP5fPZbBCa8Yfyjr5exhjDWRJT8TcfY1ZKy82wpEq72",Hp="6QKL5AAPfa7QhjL6ZKDyefwgNMgE3kcbEvk92t7j7vkK",zp="BAwmkVHT7diyR9WftweQ4T8HmUo3NXLLDjuZ9oysaLiS",Fp="9ktXaLih9rrMG1umiQFPb5B5nRoaP9rWtnfJR2257X4W",Kp="9L6j5c4V4iympNu9nQoaf5AQJrrUy47UWsVhvcSwUvN5",qp={WIF:G0,GALA:j0,BTC:Y0,AXS:Z0,SHIB:X0,ENS:J0,LTC:Q0,MANA:tp,UNI:ep,CHZ:rp,ADA:np,AERO:ip,XRP:op,APE:sp,DOGE:ap,S:cp,IMX:up,LINK:hp,GRASS:lp,QNT:fp,POL:dp,PEPE:pp,SAND:yp,ARB:gp,INJ:mp,DOT:wp,GRT:bp,CRV:Ep,ONDO:_p,JTO:Rp,RAY:Ap,SOL:Ip,RENDER:Sp,VIRTUAL:vp,COMP:kp,ETH:Tp,FIL:xp,FET:Bp,SUI:Op,WLD:Np,PYTH:Cp,CAKE:Mp,LDO:Lp,OP:Pp,HNT:Up,AVAX:Dp,AAVE:Hp,JUP:zp,BONK:Fp,TRUMP:Kp},Wp=Ut.from([61,34,117,155,75,34,123,208]),Vp=1e4,$p=2e5,Ba=new Uint8Array([185,5,173,91,12,63,86,174,120,179,229,194,245,205,82,82,137,52,163,143,21,55,213,6,102,201,68,20,176,119,206,157,229,191,141,162,2,203,2,42,35,182,157,129,223,64,80,91,24,44,18,37,71,35,150,42,170,85,72,61,231,13,227,199]),In=qp,$r="http://127.0.0.1:8900",Gp=-8;let oi,si,Cr;const pn=document.getElementById("price-feed-select"),Oa=document.getElementById("new-price"),yn=document.getElementById("update-price-button"),So=document.getElementById("status-message"),ai=document.getElementById("tx-signature"),ci=document.getElementById("feed-account-link-area");function Le(n,t=!1){console.log(n),So&&(So.textContent=`Status: ${n}`,So.className=t?"error":""),ai&&(ai.innerHTML=""),ci&&(ci.innerHTML="")}function Qc(){if($r.includes("devnet"))return{explorerClusterParam:"devnet",solscanClusterParam:"devnet"};if($r.includes("testnet"))return{explorerClusterParam:"testnet",solscanClusterParam:"testnet"};if($r.includes("mainnet"))return{explorerClusterParam:"mainnet-beta",solscanClusterParam:"mainnet-beta"};const n=`custom&customUrl=${encodeURIComponent($r)}`;return{explorerClusterParam:n,solscanClusterParam:n}}function tu(n,t,e){return`https://solscan.io/${n}/${t}?cluster=${e.solscanClusterParam}`}function jp(n){if(Cr||(Cr=Qc()),!ai)return;const t=tu("tx",n,Cr);ai.innerHTML=`Transaction: <a href="${t}" target="_blank" title="View on Solscan">${n}</a>`}function Yp(n){if(!ci||!Cr)return;const t=tu("account",n,Cr),e=`${n.substring(0,4)}...${n.substring(n.length-4)}`;ci.innerHTML=`Price Feed Account: <a href="${t}" target="_blank" title="View Price Feed Account on Solscan">${e}</a>`}function Zp(){if(!pn)return;if(pn.innerHTML='<option value="">-- Select Feed --</option>',Object.keys(In).length===0){console.warn("MOCK_PRICE_FEEDS not populated yet for dropdown."),Le("Error: Price feed list not loaded. Did you run `anchor test` in mockPriceFeed?",!0);return}const n=Object.keys(In).sort();for(const t of n){const e=document.createElement("option");e.value=t,e.textContent=t,pn.appendChild(e)}}const Xp=n=>new Promise(t=>setTimeout(t,n));function Jp(n,t){const e=Ut.alloc(20);Wp.copy(e,0),n.toArrayLike(Ut,"le",8).copy(e,8);const o=Ut.alloc(4);return o.writeInt32LE(t,0),o.copy(e,16),e}async function Qp(n,t,e,r=3,o=2e3,i="confirmed"){let a=null;for(let f=0;f<r;f++)try{const d=await n.getLatestBlockhash(i);t.recentBlockhash=d.blockhash,t.lastValidBlockHeight=d.lastValidBlockHeight,t.feePayer=e.publicKey,t.sign(e);const A=t.serialize(),b={skipPreflight:!0,commitment:i,maxRetries:0},O=await n.sendRawTransaction(A,b);console.log(`    Transaction sent (Attempt ${f+1}/${r}): ${O}`);const L=await n.confirmTransaction({signature:O,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},i);if(L.value.err)throw console.error(`    Transaction confirmation failed (Attempt ${f+1}/${r}):`,L.value.err),new Error(`Transaction failed confirmation: ${JSON.stringify(L.value.err)}`);return console.log(`    Transaction confirmed successfully: ${O}`),O}catch(d){a=d;const A=d.message||"";if(A.includes("Blockhash not found")||A.includes("block height exceeded")||A.includes("TransactionExpiredTimeoutError")||A.includes("timed out")||A.includes("Node is behind")||A.includes("Network request failed")||A.includes("failed confirmation"))f<r-1?(console.warn(`    Transaction failed (Attempt ${f+1}/${r}): ${A}. Retrying in ${o}ms...`),await Xp(o)):console.error(`    Transaction failed after ${r} attempts.`);else throw console.error("    Non-retryable transaction error:",d),d}throw console.error("Send and confirm failed after all retries.",a),a}async function ty(){if(!oi||!si||!pn||!Oa||!yn){Le("Initialization error. Check console.",!0);return}const n=pn.value,t=Oa.value.trim();if(!n){Le("Please select a price feed symbol.",!0);return}if(!t){Le("Please enter a new price.",!0);return}let e;const r=Gp;try{if(isNaN(parseFloat(t)))throw new Error("Invalid number format for price.");const f=t.split("."),d=f[0],A=f[1]||"",b=Math.abs(r);if(A.length>b)throw new Error(`Input precision (${A.length} decimals) exceeds exponent precision (${b}).`);const O=A.padEnd(b,"0"),L=d+O;e=new wn(L)}catch(f){Le(`Invalid price input/calculation: ${f.message||"Error processing price."}`,!0),console.error(f);return}const o=In[n];if(!o){Le(`Mock feed address not found for ${n}. Check mockPriceFeeds.json.`,!0);return}const i=new ut(o),a=new ut($0.address);yn.disabled=!0,Le(`Building transaction for ${n} to ${t} (raw: ${e.toString()}, exponent: ${r})...`);try{const f=Jp(e,r),d=[{pubkey:i,isSigner:!1,isWritable:!0}],A=new Gt({keys:d,programId:a,data:f}),b=new Dt().add(An.setComputeUnitPrice({microLamports:Vp})).add(An.setComputeUnitLimit({units:$p})).add(A);Le(`Sending transaction for ${n}...`);const O=await Qp(oi,b,si);Le(`Successfully updated price for ${n}!`),jp(O),Yp(i.toBase58())}catch(f){Le(`Update failed: ${f.message||f}`,!0),console.error("Price update error:",f)}finally{yn.disabled=!1}}async function ey(){if(Le("Initializing..."),Ba.length!==64){Le("ERROR: Invalid AUTHORITY_SECRET_KEY length. Paste the 64-byte array.",!0);return}try{if(Cr=Qc(),console.log("Cluster Info:",Cr),si=Nr.fromSecretKey(Ba),console.log("Authority/Payer Key:",si.publicKey.toBase58()),oi=new Cc($r,"confirmed"),console.log("Connected to:",$r),await oi.getVersion(),console.log("Connection successful."),Object.keys(In).length===0)throw new Error("Mock price feed addresses data is empty after import. Run `anchor test` in mockPriceFeed project.");console.log("Successfully loaded MOCK_PRICE_FEEDS via import:",In),Zp(),yn&&yn.addEventListener("click",ty),Le("Ready. Select feed and enter new price.")}catch(n){Le(`Initialization failed: ${n.message||n}`,!0),console.error("Initialization error:",n)}}document.addEventListener("DOMContentLoaded",ey);
